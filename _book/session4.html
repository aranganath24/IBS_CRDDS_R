<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; Elementary Data Visualization and Analysis – A Crash Course in R for Social Scientists</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./session5.html" rel="next">
<link href="./session3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-27c261d06b905028a18691de25d09dde.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/core-js-2.5.3/shim.min.js"></script>
<script src="site_libs/react-18.2.0/react.min.js"></script>
<script src="site_libs/react-18.2.0/react-dom.min.js"></script>
<script src="site_libs/reactwidget-2.0.0/react-tools.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/reactable-0.4.4/reactable.css" rel="stylesheet">
<script src="site_libs/reactable-binding-0.4.4/reactable.js"></script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./session4.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Elementary Data Visualization and Analysis</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">A Crash Course in R for Social Scientists</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/aranganath24/IBS_CRDDS_R" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R Foundations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Functional Programming</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transferring, Processing, and Wrangling Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Elementary Data Visualization and Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Tools for Reproducibility and Reporting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Conclusion and Future Reading</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">5.1</span> Introduction</a></li>
  <li><a href="#preliminaries-and-set-up" id="toc-preliminaries-and-set-up" class="nav-link" data-scroll-target="#preliminaries-and-set-up"><span class="header-section-number">5.2</span> Preliminaries and Set-Up</a></li>
  <li><a href="#missing-data" id="toc-missing-data" class="nav-link" data-scroll-target="#missing-data"><span class="header-section-number">5.3</span> Missing Data</a></li>
  <li><a href="#descriptive-statistics" id="toc-descriptive-statistics" class="nav-link" data-scroll-target="#descriptive-statistics"><span class="header-section-number">5.4</span> Descriptive Statistics</a>
  <ul>
  <li><a href="#summary-statistics-tables" id="toc-summary-statistics-tables" class="nav-link" data-scroll-target="#summary-statistics-tables"><span class="header-section-number">5.4.1</span> Summary Statistics Tables</a></li>
  <li><a href="#customizing-summary-statistics-tables" id="toc-customizing-summary-statistics-tables" class="nav-link" data-scroll-target="#customizing-summary-statistics-tables"><span class="header-section-number">5.4.2</span> Customizing Summary Statistics Tables</a></li>
  <li><a href="#frequency-tables-and-cross-tabulations" id="toc-frequency-tables-and-cross-tabulations" class="nav-link" data-scroll-target="#frequency-tables-and-cross-tabulations"><span class="header-section-number">5.4.3</span> Frequency tables and cross-tabulations</a></li>
  <li><a href="#group-level-summary-statistics" id="toc-group-level-summary-statistics" class="nav-link" data-scroll-target="#group-level-summary-statistics"><span class="header-section-number">5.4.4</span> Group-level Summary Statistics</a></li>
  </ul></li>
  <li><a href="#exploratory-visualization" id="toc-exploratory-visualization" class="nav-link" data-scroll-target="#exploratory-visualization"><span class="header-section-number">5.5</span> Exploratory Visualization</a>
  <ul>
  <li><a href="#bar-charts" id="toc-bar-charts" class="nav-link" data-scroll-target="#bar-charts"><span class="header-section-number">5.5.1</span> Bar Charts</a></li>
  <li><a href="#scatterplots" id="toc-scatterplots" class="nav-link" data-scroll-target="#scatterplots"><span class="header-section-number">5.5.2</span> Scatterplots</a></li>
  </ul></li>
  <li><a href="#basic-statistics-and-linear-regression" id="toc-basic-statistics-and-linear-regression" class="nav-link" data-scroll-target="#basic-statistics-and-linear-regression"><span class="header-section-number">5.6</span> Basic Statistics and Linear Regression</a>
  <ul>
  <li><a href="#correlations" id="toc-correlations" class="nav-link" data-scroll-target="#correlations"><span class="header-section-number">5.6.1</span> Correlations</a></li>
  <li><a href="#bivariate-and-multiple-regression" id="toc-bivariate-and-multiple-regression" class="nav-link" data-scroll-target="#bivariate-and-multiple-regression"><span class="header-section-number">5.6.2</span> Bivariate and Multiple Regression</a></li>
  <li><a href="#categorical-variables-in-regression-models" id="toc-categorical-variables-in-regression-models" class="nav-link" data-scroll-target="#categorical-variables-in-regression-models"><span class="header-section-number">5.6.3</span> Categorical Variables in Regression Models</a></li>
  <li><a href="#interaction-terms-in-a-regression" id="toc-interaction-terms-in-a-regression" class="nav-link" data-scroll-target="#interaction-terms-in-a-regression"><span class="header-section-number">5.6.4</span> Interaction Terms in a Regression</a></li>
  </ul></li>
  <li><a href="#exporting-analysis-objects" id="toc-exporting-analysis-objects" class="nav-link" data-scroll-target="#exporting-analysis-objects"><span class="header-section-number">5.7</span> Exporting Analysis Objects</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/blob/main/session4.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/edit/main/session4.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Elementary Data Visualization and Analysis</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">5.1</span> Introduction</h2>
<p>In this session, we’ll turn from tasks related to data processing and wrangling to creating basic visualization and analysis products in R. We will cover descriptive statistics, data visualization using the <em>ggplot2</em> package (part of the <em>tidyverse</em> suite), and linear regression, and also explore how to export analysis and visualization objects related to such tasks (i.e.&nbsp;plots, regression and summary statistics tables etc.) out of R for use in external applications. Our focus will be on practical issues related to implementing analysis workflows in R, rather than conceptual or methodological issues related to visualization or statistical techniques (which is beyond our curren scope)</p>
</section>
<section id="preliminaries-and-set-up" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="preliminaries-and-set-up"><span class="header-section-number">5.2</span> Preliminaries and Set-Up</h2>
<p>We will be using the following packages. Please install any packages that are not already installed (using the <code>install.packages()</code> function, and load them into memory using the <code>library()</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fastDummies)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(summarytools)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggeffects)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(effects)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(interplot)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We will continue working with the Quality of Government Institute’s basic cross-sectional dataset, which we introduced and began exploring in the previous lesson. Please go ahead and read in that data if it is not already in memory, and assign it to an object named <code>qog</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in qog data and assign to object named "qog"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>qog<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data/quality_of_government/qog_bas_cs_jan25.csv"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 194 Columns: 331
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr   (3): cname_qog, cname, ccodealp
dbl (328): ccode_qog, ccodecow, ccode, ajr_settmort, atop_ally, atop_number,...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>As before, we’ll make a copy of <code>qog</code> to work with:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make a copy of the "qog" data and assign to "qog_copy"</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>qog_copy<span class="ot">&lt;-</span>qog</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, we’ll go ahead and select some variables of interest to work with, and assign the modified dataset to a new object named <code>qog_copy_selection</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select qog variables and assign modified dataset to object named "qog_copy_selection"</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>qog_copy_selection <span class="ot">&lt;-</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  qog_copy <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">select</span>(cname_qog, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>          cname, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>          ccodealp, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>          undp_hdi, </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>          wdi_expedu,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>          wdi_acel,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>          wdi_area,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>          wdi_taxrev,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>          wdi_expmil,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>          wdi_fdiin,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>          wdi_trade,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>          cbie_index,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>          ht_region,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>          wbgi_rle,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>          bmr_dem,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>          atop_ally,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>          gol_est,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>          mad_gdppc,</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>          mad_gdppc1900,</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>          bci_bci,</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>          lis_gini,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>          top_top1_income_share,</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>          wdi_wip)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Currently, the “ht_region” variable contains numeric codes that specify a country’s region in the world (see the QOG dataset codebook for more details). We will use this variable to make a new categorical variable that encodes the region information as a string, which will make it easier to interpret in the course of making visualizations and computing relevant statistics. To do so, we will use the <code>case_when()</code> function introduced in the previous session. We’ll assign the change back to the <code>qog_copy_selection</code> object:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new character variable named "region" based on "ht_region" variable that contains region information encoded as strings</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>qog_copy_selection<span class="ot">&lt;-</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">region=</span><span class="fu">case_when</span>(ht_region<span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="st">"EasternEuropePostSoviet"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                          ht_region<span class="sc">==</span><span class="dv">2</span><span class="sc">~</span><span class="st">"LatinAmerica"</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                          ht_region<span class="sc">==</span><span class="dv">3</span><span class="sc">~</span><span class="st">"NorthAfricaMiddleEast"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                          ht_region<span class="sc">==</span><span class="dv">4</span><span class="sc">~</span><span class="st">"SubSaharanAfrica"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>                          ht_region<span class="sc">==</span><span class="dv">5</span><span class="sc">~</span><span class="st">"WesternEuropeNorthAmerica"</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>                          ht_region<span class="sc">==</span><span class="dv">6</span><span class="sc">~</span><span class="st">"EastAsia"</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                          ht_region<span class="sc">==</span><span class="dv">7</span><span class="sc">~</span><span class="st">"SouthEastAsia"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>                          ht_region<span class="sc">==</span><span class="dv">8</span><span class="sc">~</span><span class="st">"SouthAsia"</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>                          ht_region<span class="sc">==</span><span class="dv">9</span><span class="sc">~</span><span class="st">"Pacific"</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>                          ht_region<span class="sc">==</span><span class="dv">10</span><span class="sc">~</span><span class="st">"Caribbean"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="missing-data" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="missing-data"><span class="header-section-number">5.3</span> Missing Data</h2>
<p>Before proceeding, it is important to briefly acquaint ourselves with how R handles missing data, which has implications for our main topics of interest below. Most real-world social science datasets (including the QOG dataset we are working with) have missing data, and when they are read into R, “blank” cells in a dataset are automatically coded as “NA” by R. To confirm this, view <code>qog_copy_selection</code> in the data viewer:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># view "qog_copy_selection" in Viewer; note NA values</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-a08c2f73cb4fcaa29e50" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a08c2f73cb4fcaa29e50">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"cname_qog":["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Azerbaijan","Argentina","Australia","Austria","Bahamas","Bahrain","Bangladesh","Armenia","Barbados","Belgium","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Belize","Solomon Islands","Brunei","Bulgaria","Myanmar","Burundi","Belarus","Cambodia","Cameroon","Canada","Cape Verde","Central African Republic","Sri Lanka","Chad","Chile","China","Taiwan","Colombia","Comoros","Congo","Congo, Democratic Republic","Costa Rica","Croatia","Cuba","Cyprus (1975-)","Czech Republic","Benin","Denmark","Dominica","Dominican Republic","Ecuador","El Salvador","Equatorial Guinea","Ethiopia (1993-)","Eritrea","Estonia","Fiji","Finland","France (1963-)","Djibouti","Gabon","Georgia","Gambia","Germany","Ghana","Kiribati","Greece","Grenada","Guatemala","Guinea","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Cote d'Ivoire","Jamaica","Japan","Kazakhstan","Jordan","Kenya","Korea, North","Korea, South","Kuwait","Kyrgyzstan","Laos","Lebanon","Lesotho","Latvia","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia (1966-)","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Monaco","Mongolia","Moldova","Montenegro","Morocco","Mozambique","Oman","Namibia","Nauru","Nepal","Netherlands","Vanuatu","New Zealand","Nicaragua","Niger","Nigeria","Norway","Micronesia","Palau","Pakistan (1971-)","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Guinea-Bissau","Timor-Leste","Qatar","Romania","Russia","Rwanda","St Kitts and Nevis","St Lucia","St Vincent and the Grenadines","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Vietnam","Slovenia","Somalia","South Africa","Zimbabwe","Spain","South Sudan","Sudan (2012-)","Suriname","Eswatini (former Swaziland)","Sweden","Switzerland","Syria","Tajikistan","Thailand","Togo","Tonga","Trinidad and Tobago","United Arab Emirates","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","North Macedonia","Egypt","United Kingdom","Tanzania","United States","Burkina Faso","Uruguay","Uzbekistan","Venezuela","Samoa","Yemen","Zambia","Marshall Islands"],"cname":["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Azerbaijan","Argentina","Australia","Austria","Bahamas (the)","Bahrain","Bangladesh","Armenia","Barbados","Belgium","Bhutan","Bolivia (Plurinational State of)","Bosnia and Herzegovina","Botswana","Brazil","Belize","Solomon Islands","Brunei Darussalam","Bulgaria","Myanmar","Burundi","Belarus","Cambodia","Cameroon","Canada","Cabo Verde","Central African Republic (the)","Sri Lanka","Chad","Chile","China","Taiwan (Province of China)","Colombia","Comoros (the)","Congo (the)","Congo (the Democratic Republic of the)","Costa Rica","Croatia","Cuba","Cyprus","Czechia","Benin","Denmark","Dominica","Dominican Republic (the)","Ecuador","El Salvador","Equatorial Guinea","Ethiopia","Eritrea","Estonia","Fiji","Finland","France","Djibouti","Gabon","Georgia","Gambia (the)","Germany","Ghana","Kiribati","Greece","Grenada","Guatemala","Guinea","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran (Islamic Republic of)","Iraq","Ireland","Israel","Italy","Côte d'Ivoire","Jamaica","Japan","Kazakhstan","Jordan","Kenya","Korea (the Democratic People's Republic of)","Korea (the Republic of)","Kuwait","Kyrgyzstan","Lao People's Democratic Republic (the)","Lebanon","Lesotho","Latvia","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Monaco","Mongolia","Moldova (the Republic of)","Montenegro","Morocco","Mozambique","Oman","Namibia","Nauru","Nepal","Netherlands (the)","Vanuatu","New Zealand","Nicaragua","Niger (the)","Nigeria","Norway","Micronesia (Federated States of)","Palau","Pakistan","Panama","Papua New Guinea","Paraguay","Peru","Philippines (the)","Poland","Portugal","Guinea-Bissau","Timor-Leste","Qatar","Romania","Russian Federation (the)","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Viet Nam","Slovenia","Somalia","South Africa","Zimbabwe","Spain","South Sudan","Sudan (the)","Suriname","Eswatini","Sweden","Switzerland","Syrian Arab Republic (the)","Tajikistan","Thailand","Togo","Tonga","Trinidad and Tobago","United Arab Emirates (the)","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","North Macedonia","Egypt","United Kingdom of Great Britain and Northern Ireland (the)","Tanzania, the United Republic of","United States of America (the)","Burkina Faso","Uruguay","Uzbekistan","Venezuela (Bolivarian Republic of)","Samoa","Yemen","Zambia","Marshall Islands"],"ccodealp":["AFG","ALB","DZA","AND","AGO","ATG","AZE","ARG","AUS","AUT","BHS","BHR","BGD","ARM","BRB","BEL","BTN","BOL","BIH","BWA","BRA","BLZ","SLB","BRN","BGR","MMR","BDI","BLR","KHM","CMR","CAN","CPV","CAF","LKA","TCD","CHL","CHN","TWN","COL","COM","COG","COD","CRI","HRV","CUB","CYP","CZE","BEN","DNK","DMA","DOM","ECU","SLV","GNQ","ETH","ERI","EST","FJI","FIN","FRA","DJI","GAB","GEO","GMB","DEU","GHA","KIR","GRC","GRD","GTM","GIN","GUY","HTI","HND","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JAM","JPN","KAZ","JOR","KEN","PRK","KOR","KWT","KGZ","LAO","LBN","LSO","LVA","LBR","LBY","LIE","LTU","LUX","MDG","MWI","MYS","MDV","MLI","MLT","MRT","MUS","MEX","MCO","MNG","MDA","MNE","MAR","MOZ","OMN","NAM","NRU","NPL","NLD","VUT","NZL","NIC","NER","NGA","NOR","FSM","PLW","PAK","PAN","PNG","PRY","PER","PHL","POL","PRT","GNB","TLS","QAT","ROU","RUS","RWA","KNA","LCA","VCT","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SVK","VNM","SVN","SOM","ZAF","ZWE","ESP","SSD","SDN","SUR","SWZ","SWE","CHE","SYR","TJK","THA","TGO","TON","TTO","ARE","TUN","TUR","TKM","TUV","UGA","UKR","MKD","EGY","GBR","TZA","USA","BFA","URY","UZB","VEN","WSM","YEM","ZMB","MHL"],"undp_hdi":["0.473","0.785","0.74","0.855","0.59","0.819","0.738","0.844","0.949","0.92","0.799","0.884","0.662","0.774","0.803","0.938","0.677","0.691","0.776","0.68","0.756","0.698","0.564","0.824","0.796","0.599","0.419","0.801","0.596","0.581","0.934","0.65","0.387","0.783","0.393","0.856","0.785","NA","0.752","0.585","0.598","0.475","0.804","0.867","0.742","0.901","0.891","0.502","0.947","0.737","0.756","0.746","0.669","0.647","0.489","0.49","0.89","0.715","0.941","0.906","0.512","0.687","0.809","0.49","0.948","0.6","0.627","0.887","0.788","0.63","0.467","0.721","0.551","0.62","0.846","0.957","0.633","0.707","0.776","0.667","0.946","0.911","0.899","0.53","0.704","0.92","0.801","0.736","0.596","NA","0.926","0.836","0.696","0.615","0.725","0.522","0.865","0.484","0.746","0.936","0.875","0.927","0.484","0.509","0.798","0.753","0.408","0.912","0.538","0.79","0.757","NA","0.73","0.767","0.84","0.688","0.459","0.81","0.616","0.693","0.591","0.941","0.614","0.936","0.665","0.389","0.542","0.964","0.634","0.802","0.537","0.813","0.564","0.73","0.755","0.692","0.876","0.865","0.482","0.574","0.864","0.825","0.818","0.539","0.832","0.717","0.773","0.853","0.609","0.867","0.512","0.804","0.795","0.456","0.942","0.852","0.718","0.916","0.38","0.721","0.549","0.904","0.381","NA","0.689","0.612","0.949","0.965","0.558","0.677","0.797","0.545","0.738","0.804","0.931","0.729","0.841","0.74","0.653","0.545","0.755","0.764","0.726","0.931","0.529","0.921","0.445","0.814","0.721","0.69","0.708","0.425","0.565","0.729"],"wdi_expedu":["NA","3.02255988121033","5.51403284072876","2.58397221565247","2.2971088886261","2.5746488571167","3.7020800113678","4.64117002487183","5.33320999145508","5.49411010742188","3.00693249702454","2.22135806083679","1.83117997646332","2.76784992218018","4.863609790802","6.35551977157593","6.59838628768921","7.96215009689331","4.13622999191284","8.05833625793457","5.4969801902771","5.94879007339478","8.33232688903809","NA","4.73032999038696","1.99976003170013","4.87114191055298","4.60641002655029","3.01162648200989","2.82764077186584","4.74860000610352","6.03750085830688","1.87251687049866","1.50650584697723","2.8881299495697","4.99923992156982","3.98832511901855","NA","NA","2.27485394477844","3.67454195022583","2.660484790802","6.24841976165771","4.05666017532349","9.38586235046387","5.23585987091064","4.80319976806641","3.20348429679871","6.99992990493774","5.46584510803223","3.74731349945068","3.64776992797852","3.57766008377075","NA","4.06524896621704","NA","5.2632098197937","4.85268640518188","6.53825998306274","5.43038988113403","3.75143003463745","2.70079278945923","3.59441995620728","3.04477691650391","5.45488977432251","3.41949439048767","14.1951599121094","4.08201456069946","4.09030342102051","3.10634994506836","2.04074811935425","4.45058012008667","1.24275183677673","5.81050157546997","4.68406009674072","8.21780967712402","4.63514137268066","1.03221750259399","3.20495009422302","NA","3.00598001480103","6.18401002883911","4.21828985214233","3.32718992233276","5.63123989105225","3.33563995361328","4.38569402694702","3.13837003707886","4.89040184020996","NA","4.86627006530762","7.76246690750122","6.17235136032104","1.85949182510376","1.66996812820435","7.50747919082642","4.61546993255615","2.11186790466309","NA","NA","4.25490999221802","3.71989011764526","3.19807553291321","3.32295989990234","4.26109409332275","4.61379766464233","4.36370992660522","5.36479997634888","1.891970038414","4.67151021957397","4.24952983856201","1.41878998279572","3.34389615058899","5.82405996322632","NA","5.64273405075073","6.49789762496948","6.87769985198975","10.3914480209351","6.21887111663818","3.95612215995789","5.50609016418457","10.1102409362793","5.54822015762329","4.08665704727173","3.82175827026367","0.381919115781784","6.9602198600769","10.5389995574951","3.94417095184326","1.6874612569809","3.71141004562378","1.34599995613098","3.41070008277893","3.92721009254456","3.87249755859375","4.67303991317749","4.78316020965576","NA","2.9738941192627","3.2336699962616","3.32452988624573","3.99480700492859","5.58984994888306","2.78379011154175","3.62086009979248","5.46375846862793","3.10892009735107","5.51617622375488","5.11466979980469","5.61201000213623","3.29867005348206","5.62358999252319","9.44223594665527","2.82470989227295","4.79718017578125","2.94517493247986","5.36526012420654","NA","6.54902982711792","2.05048990249634","4.86506986618042","NA","NA","4.13154983520508","5.28714895248413","7.57219982147217","5.03708982467651","NA","5.70163345336914","2.98212432861328","4.23118162155151","4.92703914642334","3.00432991981506","3.89403009414673","6.67984676361084","3.53787994384766","3.8489100933075","12.8456897735596","2.63593602180481","5.14011001586914","NA","NA","5.90458011627197","3.11515331268311","5.42829990386963","5.22401523590088","4.46065998077393","5.36828899383545","NA","5.2044882774353","NA","3.10643219947815","7.54093980789185"],"wdi_acel":["97.7","100","99.8","100","48.2","100","100","100","100","100","100","100","99","100","100","100","100","98.6","100","73.7","99.5","97.7","76.3","100","99.8","72.5","10.2","100","82.5","65.4","100","95.5","15.7","100","11.3","100","100","NA","100","87.9","49.7","20.8","100","100","100","100","100","42","100","100","98.1","100","97.9","66.8","54.2","52.5","100","92.1","100","100","65.4","91.8","100","63.7","100","86.3","92.8","100","93.7","97.9","46.8","92.9","47.2","94.1","100","100","99.6","99.2","100","100","100","100","100","71.1","100","100","100","99.9","76.5","52.6","100","100","99.7","100","100","50.4","100","29.8","70.2","100","100","100","35.1","14.2","100","100","53.4","100","47.7","99.6","100","100","100","100","99.8","100","31.5","100","55.2","100","89.9","100","70","100","86.3","18.6","59.5","100","83.6","100","94.9","95.3","20.9","100","95.6","97.5","100","100","35.8","100","100","100","100","48.7","100","100","100","100","78.5","100","68","100","100","27.5","100","100","100","100","49.3","89.3","49","100","7.7","NA","98.8","82.9","100","100","88.8","99.6","100","55.7","100","100","100","99.9","100","100","99.7","45.2","100","100","100","100","42.7","100","19","100","99.9","100","98.3","74.9","46.7","99.8"],"wdi_area":["652230","27400","2381741","470","1246700","440","82650","2736690","7692020","82520","10010","790","130170","28470","430","30280","38140","1083300","51200","566730","8358140","22810","27990","5270","108560","652670","25680","202950","176520","472710","8788700","4030","622980","61860","1259200","743532","9388210","NA","1109500","1861","341500","2267050","51060","55960","103800","9240","77186.83","112760","40000","750","47531","248360","20720","28050","1128571.265","121040.829","42750","18270","303947.7","547557","23180","257670","69490","10120","349390","227533","810","128900","340","107160","245720","196850","27560","111890","91260","100830","2973190","1892555.47","1622500","434128","68890","21640","295717","318000","10830","364500","2699700","88794","569140","120410","97600","17820","191800","230800","10230","30360","62230","96320","1759540","160","62610","2574.46","581800","94280","328550","300","1220190","320","1030700","1997","1943950","2.084","1557507","32970","13450","446300","786380","309500","823290","20","143350","33670","12190","263310","120340","1266700","910770","364270","700","460","770880","74180","452860","397300","1280000","298170","306100","91605.6","28120","14870","11490","230080","16376870","24670","260","610","390","60","960","2149690","192530","84090","460","72180","718","48080","313429","20136.4","627340","1213090","386850","499733.244","631930","NA","156000","17200","407283.54","39509.63","183630","138790","510890","54390","720","5130","71020","155360","769630","469930","30","200520","579400","25220","995450","241930","885800","9147420","273600","175020","440653","882050","2780","527970","743390","180"],"wdi_taxrev":["NA","18.1985959060486","NA","NA","10.090385804431","NA","13.4213202980155","8.79392955783953","23.0272760652611","25.8506768631894","14.1763815936458","2.92231784869143","7.64236301017901","22.0010047423132","NA","22.2891257982306","12.2846378373934","NA","19.0981491977883","22.2295140207709","14.1366751318622","NA","21.4486577466021","NA","20.6743441728497","6.01765247726484","15.6362454762579","12.8250049647951","16.3649333016786","11.3461577378065","13.2198942999607","18.3857032934311","8.20629229709995","7.36992757109497","NA","19.6644047302073","7.96512804614377","NA","14.4451638062259","NA","6.50908825817085","8.39903438797131","13.9991922763022","20.8906141534785","NA","23.2332556283931","13.3573220039494","NA","35.1882997859342","NA","14.3774132098545","12.7055177467813","19.6896754276569","5.39509912593539","5.32472623532696","NA","21.6363289048472","15.8742098117681","20.6718954456962","13.9020621729271","NA","9.12747298107656","21.4728937487649","NA","11.2023110201938","12.2446867253345","21.5449264","25.9156492201809","NA","11.6129518261926","NA","NA","NA","NA","21.2506256455826","21.4128299641834","12.0174277483193","9.09400997883352","NA","1.34459361810327","17.1720318490757","24.6153959630754","25.0485390639159","12.3894127185479","25.7094656957291","13.3082711121133","9.44711136309549","15.9811020446786","13.2546715485857","NA","16.7347339402527","NA","16.4912602816795","10.3910216640385","5.68479554564454","31.9410692057445","22.0925138760382","NA","NA","NA","21.2707093741651","25.8655065735814","10.2385306991003","11.40096954561","11.2146465719606","19.4461807952138","14.164539862387","23.8223254592062","NA","18.264394630822","13.4470069331931","NA","16.9088495192029","18.3881163669346","NA","19.6935295967337","22.747755709622","NA","28.0639865897267","44.3468321505376","17.4853032787772","24.5070280167289","15.8771617065457","NA","18.9072309186047","NA","NA","25.5027658859496","7.04821639784946","17.9294565123661","NA","7.45946064719901","12.1465996811431","9.79425505793564","15.9225447315513","14.1300039313539","19.093627413349","21.545073186115","9.16392889225127","15.1003110662796","NA","14.6626856945539","11.606494475109","15.0744684401213","15.0423826463699","NA","NA","17.2959731612318","NA","9.67348884669067","17.5501329724803","24.493256284499","26.1767418994855","NA","12.8128979341856","19.287022165904","NA","18.5907666064944","5.8864372548248e-05","25.1700288921631","7.21476500513885","15.0386569472057","NA","NA","NA","24.127993711269","27.290370392512","10.0936772612024","NA","10.345980548358","14.3046633623499","14.2024496426634","21.3033075587168","NA","0.535243668700213","NA","17.8815776968346","NA","NA","12.4588666784696","19.0823227721039","17.186641898978","NA","26.4102511340457","10.8557996439654","11.3004081413642","15.9829408306659","18.5148717533759","14.8464898245603","NA","25.022326284123","NA","16.7804106778084","17.2302400064597"],"wdi_expmil":["1.827933856217","1.22084466120546","5.58544666775166","NA","1.28992265308256","NA","5.27005900628497","0.630928835372215","1.98912270035816","0.873694846766333","NA","3.55388299692097","1.19664698573287","4.47078156298276","NA","1.05034404939086","NA","1.41111958813376","0.929365426321555","3.04556932426419","1.16368211072875","1.00947819584936","NA","3.23636748209722","1.51713160983634","3.39115163606364","2.04300976329884","1.11835004010897","2.34734246417442","0.978117031343036","1.26729446473527","0.579317677142293","2.15034556057488","1.89424834227119","2.80826952779774","1.93228691717414","1.61307386433133","NA","3.23758910406394","NA","2.47848232699844","0.542970228782383","NA","2.01266537086965","2.87620737245072","1.90746002348489","1.39741190368455","0.550883648806243","1.32422710157036","NA","0.65056272603802","2.24439369241334","1.22343572258204","1.46249872263959","0.49197376876991","NA","2.01304423406157","1.5997674680295","1.26152989821883","1.91536145421393","NA","1.5398824689606","1.60542784800892","0.76855558144666","1.32678559033803","0.384879261038789","NA","3.8631706100809","NA","0.397670423818451","1.48454111736468","0.995030769840688","0.110133662270893","1.54111976577739","1.68336608855554","NA","2.47144662861613","0.74178636312329","2.19253403937114","2.30492820761499","0.251475874908046","4.97605222586197","1.72006283098808","0.910633112973165","1.46676867767402","1.01829737669403","0.819281683646492","4.81123191507576","1.07091960171957","NA","2.80900611973598","6.59030254506636","1.5607751592689","NA","3.36622246400457","1.56061124415555","2.06553307283479","0.998322660417257","NA","NA","1.96692451680381","0.471678356636088","0.692132176722242","0.75913111163443","0.986864882084694","NA","3.43787625232372","0.496378473621832","2.29399489807024","0.166434352050263","0.682059196439262","NA","0.634517577391162","0.367566304907699","1.55528019503059","3.94279963364595","1.88537169538203","6.55798322028562","3.25048104938115","NA","1.23009788741636","1.37664709536688","NA","1.16789777249676","0.540141928775309","1.35370281969671","1.01270192678284","1.72188687044335","NA","NA","2.87198606564158","NA","0.339121498498937","0.928803634265998","1.18067972352829","1.40682590650867","2.22199525295471","1.53634038088802","1.60258794398635","1.08312161714349","6.4523551123317","1.86366582653499","3.7204513646667","1.51203855994152","NA","NA","NA","NA","NA","7.58146863585647","1.73912588958141","2.00618591411266","2.77755038036736","0.609065850522684","2.78363121983816","1.77217536688217","2.28456986005062","1.23544123825207","NA","0.809812625998238","0.815977410678401","1.36942532659619","2.62614385621105","NA","NA","1.78385478033566","1.19327656149619","0.776260426446761","NA","0.929863567458312","1.30612765710848","3.11153706019691","NA","0.894832903670522","NA","2.63670026160052","1.89889704063657","NA","NA","2.57785468025078","3.22834693677077","1.46631957337464","1.12200927143154","2.16157191775693","1.0794434996739","3.45797721923449","2.40194309061394","2.10130868239947","3.5554825523167","0.313630729266034","NA","NA","0.979965767794135","NA"],"wdi_fdiin":["0.144401085222495","6.7961408036867","0.466642750804028","NA","-6.54854227564072","18.1006036013337","-3.11473447263613","1.36462688641751","1.78341600361351","3.70886934393561","3.36940934585663","4.52867279425205","0.414118154944474","2.64030281211345","4.82753763389546","4.91189848179391","0.244983589293264","1.44427761116124","3.10277232367734","-1.70154533730106","2.77979084916568","5.17597863176034","1.83340987016897","1.46181722244564","2.97392384442079","3.11492561696787","0.806162274299769","1.76640687852003","12.9203431053741","2.14148940890135","2.94525148855338","4.45730500132353","0.214980465443776","0.668428427839163","5.98558469761778","4.81019970676228","1.93078622294539","NA","3.00175693787234","0.310531969004356","-2.15982873754758","3.03220638870425","5.53072986406839","6.72446813889904","NA","26.1977316596488","4.57464586893815","1.95608661099464","4.18974353475944","5.1036226068351","3.55430627298153","0.603682730215786","2.7560499827498","4.59725955429429","3.82830640829097","NA","20.4542211360062","9.52129029040505","7.98565320892034","3.31195540543806","4.92494796840667","7.56368134687312","6.77908886878379","12.5026201248137","2.38764360816347","3.18592251630377","0.356621411313479","2.85672824512124","13.5574961877895","4.21410178870597","1.22801539228598","27.8124987352703","0.24571528666924","2.84361329738545","18.2734736968849","1.80346001426939","1.41217101040886","1.78785563145541","0.396828813937793","-1.25770209772783","17.8869865733027","3.87899084703941","1.15562898844264","1.91282655892028","2.18644459267792","0.695725961783807","2.31675874599247","1.34316062049226","0.422364158406335","NA","1.21315499855807","-0.192086717893054","2.44569276771409","5.69344695957329","2.5929006838647","-0.514055700839224","9.38107588608647","15.2455267850161","1.26185502585239","-1303.10826691135","4.44860230039192","29.3542717520448","2.45649402526377","1.02931314907109","5.41557013448805","12.2342196073402","3.31414782752808","26.2697703937372","11.6047527792443","2.20464612454668","2.69638965324324","NA","14.2177319422671","2.8200678267721","11.8356969374313","1.59651938753365","32.7522138541297","9.97056448137009","6.7751489770655","NA","0.531690906776235","-11.217005209151","4.53028102541425","1.78987576941341","8.62623142316684","3.98812628006034","0.75156918029235","2.81683452885051","NA","13.678433954997","0.616039439073827","2.0066366147897","-0.0410230725868999","0.765490446184672","3.15535335133475","3.04078855310047","5.30890265442735","3.07236641831478","1.07446364648058","-11.5693012777808","-0.608353846418717","4.10699673507739","2.1943240262796","1.91427196306746","2.78723268868289","5.93499709559899","18.6712623378309","NA","11.25092620282","2.64391059965147","9.40426190185874","7.29017542321983","7.52808883301193","4.99593944670397","31.6207400179128","2.29385763784245","4.27314566190187","3.58914562379553","6.10852344029523","9.6779493605082","0.881174075434015","3.9560014902077","NA","NA","-4.30666395669143","2.32671514927082","8.5723862546828","-14.4091790381318","NA","0.94025522151091","2.99428727205672","-1.63291202920242","0.81070105805349","-3.81598012642742","4.97788431407126","1.16937529005457","1.57281942883698","2.57428691451556","0.331298850213827","4.06673785807037","3.98166133947207","4.97315294989199","1.20617861055665","0.188516350562574","1.68494347865961","2.01663293567767","-0.407049209196581","5.67393088579674","3.27625046164089","NA","1.0603950693965","-1.30563839823089","1.78407846118257","0.193738453653779"],"wdi_trade":["51.4117163747271","76.0179821075752","47.2709030076405","NA","74.4644985945172","101.122883462968","76.286865687015","32.9300242545298","39.7023602363157","110.984958052906","72.9516487962776","159.87298054363","27.7240047036631","79.6698888228399","69.8688030759052","174.038993727527","77.5824514467004","59.0213965632554","96.4859085777747","88.7551314233315","37.6563307568833","99.1470033287338","66.6394072717162","147.123112375318","120.974653390581","NA","28.8186599995439","136.014450556595","129.11145154834","36.7458684244446","62.4241644131018","77.4550586265341","44.159119995104","41.2299717494043","82.984776867047","64.8384472541565","37.3019908656257","NA","40.0591463936128","42.2777287262852","85.5462031552188","80.4813114206906","70.7816423027085","101.433303428325","80.0237849857828","174.859607592058","142.49501163665","48.0548608324409","110.712208517714","106.96050417924","52.7348670680051","53.1511986943634","81.8450759800765","76.9666485998527","24.3450393271265","NA","161.541265116077","81.7252085972258","78.9215842721731","61.9523139995796","264.020253506591","74.4919637746964","101.60090754891","42.0979827874535","89.1610941409004","62.7078309128346","73.5010885714286","89.6559253903021","NA","49.491532191391","105.803010495533","NA","37.1654017679449","103.372643459918","159.688274120647","76.2967140833855","45.4230887840438","40.2047582749671","44.3738340508665","61.5032683117218","227.404790299365","55.1949222878766","62.0679468955691","45.1140327762435","90.1106076335994","36.7714832870467","58.6686085779207","80.48924243797","30.6892819236191","NA","80.1994569268269","96.4100152459388","100.261376861569","NA","78.8286204025241","138.562032031328","132.334030966869","NA","121.135115484334","NA","155.636625710561","393.14119815602","54.4570415917068","NA","134.018926345978","NA","67.2099446691173","314.682664160793","88.3068737571235","98.0000292393386","83.2907026935293","NA","119.098078437771","88.4708865399267","105.029993243347","75.6321941874613","112.078964460828","93.9161461607843","83.544303123051","110.63829787234","43.0538047912219","156.956168654023","61.8209434451996","48.5496455680671","106.695198216544","37.0158935503713","NA","71.2227137759599","87.6064871794872","82.8001275691572","27.030421558764","78.7627100301698","NA","69.7422730211357","55.2742548782987","63.4846098136712","112.081813490052","85.6259080141689","55.5513379949577","99.891798855757","92.7791585715124","86.8531207651432","50.196441103259","54.6383128041512","NA","NA","NA","342.470174017661","NA","57.1428135634067","69.3759939883832","117.773070852372","183.77081501466","58.3908280709773","329.78497877736","184.2012064756","186.675832800038","161.285643631514","82.0839190980559","56.0846247448035","50.8471283664568","67.3912901193661","NA","NA","NA","88.9520577439276","88.2464014779394","130.25616282247","97.8512542311977","71.825937435383","117.144503626655","57.5850134996963","73.367469327191","NA","166.571899325291","94.2210932352001","71.0824413868968","33.0581170797482","NA","41.7136307424782","82.69796136345","146.721411484074","29.8569734808122","59.3486477481733","29.9151840074048","25.2534846631337","62.5929625003689","56.823738109386","63.848290989831","NA","60.8888856520264","58.9022786120284","86.2085111934645","118.047657212332"],"cbie_index":["0.87","0.791","0.586","NA","0.732","0.5495","0.7315","0.557","0.424","0.912","0.7185","0.5145","0.539","NA","NA","0.912","NA","0.837","0.8985","0.579","0.552","NA","NA","0.704","0.8195","0.765","0.8045","0.619","0.7285","0.8535","0.604","NA","0.8535","0.5225","0.8535","0.746","0.659","0.454","0.757","0.439","0.8535","0.8815","0.8265","0.862","0.354","0.8955","0.795","0.811","0.606","0.5495","0.835","0.6725","NA","0.8535","0.4945","NA","0.912","NA","0.912","0.912","NA","0.8535","0.847","0.692","0.912","0.6935","NA","0.8955","0.5495","0.6255","0.652","NA","0.3655","NA","0.662","0.6955","0.5885","0.8415","0.448","0.733","0.8955","NA","0.8955","0.811","0.6555","0.3665","0.7165","0.659","0.6325","NA","0.6795","0.564","0.736","0.52","0.437","NA","0.912","0.7155","0.5735","NA","0.912","0.912","NA","0.7415","0.563","0.509","0.811","0.912","0.6445","0.7325","0.6485","NA","0.7305","0.861","0.7905","0.768","NA","0.6185","0.637","NA","0.652","0.8955","NA","0.4205","NA","0.811","0.6445","0.7245","NA","NA","0.4645","0.4575","NA","0.6295","0.8045","0.639","0.848","0.8955","0.811","NA","0.607","0.796","0.5655","0.595","0.5495","0.5495","0.5495","NA","NA","0.5005","0.811","NA","0.588","0.6735","0.544","0.8955","0.3015","0.8955","0.678","0.506","0.534","0.8955","NA","NA","NA","NA","0.77","0.8335","NA","NA","0.4355","0.811","NA","0.5355","0.685","0.7205","0.801","0.4105","NA","0.4665","0.7235","0.8295","0.64","0.4165","0.702","0.6045","0.811","0.7095","0.862","0.816","NA","0.715","0.552","NA"],"ht_region":["8","1","3","5","4","10","1","2","5","5","10","3","8","1","10","5","8","2","1","4","2","10","9","7","1","7","4","1","7","4","5","4","4","8","4","2","6","6","2","4","4","4","2","1","2","3","1","4","5","10","2","2","2","4","4","4","1","9","5","5","4","4","1","4","5","4","9","5","10","2","4","10","2","2","1","5","8","7","3","3","5","3","5","4","10","6","1","3","4","6","6","3","1","7","3","4","1","4","3","5","1","5","4","4","7","8","4","5","4","4","2","5","6","1","1","3","4","3","4","9","8","5","9","5","2","4","4","5","9","9","8","2","9","2","2","7","1","5","4","7","3","1","1","4","10","10","10","5","4","3","4","1","4","4","7","1","7","1","4","4","4","5","4","4","10","4","5","5","3","1","7","4","9","10","3","3","3","1","9","4","1","1","3","5","4","5","4","2","1","2","9","3","4","9"],"wbgi_rle":["-1.877234","-0.28071627","-0.83302283","1.6420512","-0.9837536","0.30315053","-0.60676503","-0.4779479","1.6385597","1.7517545","0.07066511","0.44151598","-0.625694","-0.11983846","0.34128785","1.2917758","0.60534126","-1.1776018","-0.30325684","0.45328143","-0.30141738","-0.800228","-0.36349618","0.8605746","-0.06886845","-1.4677804","-1.3125911","-1.1214325","-0.91917795","-1.1164058","1.5928903","0.3277349","-1.6887134","0.01691215","-1.3422123","0.8898907","0.010268886","1.2563621","-0.4708285","-1.2578434","-1.0992813","-1.7238457","0.42366722","0.27541894","-0.41991216","0.60567933","1.0904073","-0.6269569","1.8957213","0.6916984","-0.11635073","-0.3549922","-0.8663832","-1.2027557","-0.62326586","-1.583522","1.389358","0.3006743","2.0134761","1.2591676","-1.029475","-0.7081888","0.14443676","-0.4056209","1.5718048","-0.10768442","0.8861823","0.3211656","0.49048543","-1.1102566","-1.1587706","-0.41662157","-1.2628647","-1.0879738","0.5053734","1.7126335","-0.108451806","-0.25344428","-0.9664825","-1.7488469","1.493008","0.90678936","0.24034803","-0.66102356","-0.19631037","1.5403281","-0.5089701","0.18259557","-0.42144787","-1.6355757","1.0954695","0.23914553","-1.098766","-0.66391677","-1.0917931","-0.43136242","0.9495165","-0.9426622","-1.8036795","1.7042607","1.0746465","1.747622","-0.88559556","-0.24857236","0.5320658","-0.1147239","-0.9193341","0.83541155","-0.68713975","0.84269637","-0.8079965","1.3904055","-0.25020286","-0.35734102","-0.08406404","-0.24368088","-1.0551804","0.38286868","0.3349745","-0.07409875","-0.48883876","1.6986274","0.4493874","1.7811666","-1.3663368","-0.42556235","-0.8708126","1.9079183","0.52166194","0.7148594","-0.65862066","-0.26938578","-0.75168806","-0.57589704","-0.5325147","-0.6668026","0.4255692","1.1050274","-1.4620886","-1.0252875","0.90376914","0.38048443","-0.8861793","0.17209966","0.45481855","0.60516506","0.580293","1.6420512","-0.72777414","0.20560572","-0.39860958","-0.11550256","0.30399367","-0.8397703","1.8194607","0.6784757","-0.17222163","1.0016801","-2.2824454","0.064979695","-1.2821223","0.84325826","-2.0709317","NA","-0.12621364","-0.575524","1.6993572","1.7679853","-2.0821385","-1.2068437","0.09379883","-0.58592135","0.42982838","-0.15831885","0.7989683","0.066302925","-0.43371212","-1.4587215","0.72579783","-0.36933488","-0.6817383","-0.10046881","-0.26064572","1.3955137","-0.5514627","1.3891569","-0.46313876","0.6980622","-0.92124164","-2.3008955","0.8861823","-1.8043497","-0.606376","0.7725424"],"bmr_dem":["0","1","0","1","0","1","0","1","1","1","1","0","0","1","1","1","0","1","1","1","1","1","1","0","1","0","0","0","0","0","1","1","0","1","0","1","0","1","1","0","0","0","1","1","0","1","1","0","1","1","1","1","1","0","0","0","1","1","1","1","0","0","1","1","1","1","1","1","1","1","0","1","0","0","1","1","1","1","0","0","1","1","1","0","1","1","0","0","1","0","1","0","0","0","0","1","1","1","0","1","1","1","1","1","0","0","0","1","0","1","1","1","1","1","1","0","0","0","1","1","1","1","1","1","0","0","1","1","1","1","0","1","1","1","1","1","1","1","0","1","0","1","0","0","1","1","1","1","1","0","1","1","1","1","0","1","0","1","0","1","0","1","0","NA","1","0","1","1","0","0","0","0","0","1","0","1","0","0","1","0","1","1","0","1","0","1","1","1","0","0","0","0","1","1"],"atop_ally":["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","NA","1","1","1","1","1","NA","1","1","1","1","1","1","1","1","1","1","1","1","1","1","NA","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","NA","1","1","NA","1","1","1","1","1","NA","NA","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","NA","1","1","1","1","1","1","1","1","1","1","1","NA","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","NA"],"gol_est":["NA","2","NA","3","NA","1","NA","2","1","2","1","NA","1","2","1","2","1","3","2","1","2","1","1","NA","2","1","2","NA","NA","NA","1","2","1","2","NA","2","NA","3","2","1","1","NA","2","2","2","2","2","2","2","1","2","2","2","NA","NA","NA","2","1","2","1","NA","NA","3","1","3","1","1","2","1","2","NA","2","NA","2","3","2","1","2","NA","NA","2","2","3","NA","1","3","NA","NA","1","NA","3","NA","2","1","1","3","2","1","NA","2","3","2","3","1","1","1","1","2","1","1","3","NA","1","3","2","NA","2","NA","NA","1","3","2","1","3","2","3","1","2","1","1","1","3","1","2","2","3","2","2","2","2","NA","2","3","NA","1","1","1","2","2","NA","3","2","3","1","NA","2","NA","2","2","2","NA","2","NA","NA","2","NA","2","2","NA","NA","3","NA","NA","1","NA","2","2","NA","1","1","3","2","NA","1","NA","1","NA","2","NA","3","NA","NA","1","1"],"mad_gdppc":["1485.54700630816","12455.9165536791","13337.2618338984","NA","6137.00384465022","NA","16971.724514572","17470.6824151873","50704.934853449","42184.6961214896","NA","37323.1039243003","4684.00301024777","12242.4774722192","10386.5261713722","40970.8057833041","NA","6355.61521053972","11553.7607086497","15612.0777736517","14292.9350590379","NA","NA","NA","19753.9944646969","5113.33684775278","723.19207410926","19541.914363355","3796.48438877529","2791.79010028351","44379.5948708567","6173.23012358778","606.859105151281","11751.9486190918","1402.67317110642","22324.9614330869","18666.6045694826","51943.8822886389","13553.3994282833","1886.06081817543","4168.02435849684","817.432228683087","14931.9560232048","25059.9466649754","7485.82078791566","30252.325663827","31452.5563545455","2395.16621333511","49258.7496587633","8419.47300425071","17046.6460256345","9937.6964730908","9017.39142174899","22537.5405933053","2190.67517903773","NA","30499.1570565719","NA","39977.8548881836","38242.1347477576","3541.57124159078","15597.7710654441","12994.7724217991","1964.49366993667","46159.0518809143","4190.57829675246","NA","23732.201072604","NA","7764.69611634589","1769.86232471939","NA","1591.76001531958","5062.11872929809","28085.9622261249","40412.6167447661","7315.1213627107","12233.9685932949","18052.368971168","12355.5869490596","57278.4234586267","34969.0140630838","34827.1349694271","3853.16267699803","7193.10627375964","37678.2757984495","25936.3827604878","9019.89487021807","3292.75843679599","1577.13211047099","40277.9521182031","66418.2057341951","5035.92728981148","6961.12141822525","10573.8611313567","2311.89088424953","26738.6144624428","790.284116936443","14797.0974646119","NA","30557.0300586146","55346.675082633","1343.44385784738","1211.20925392886","24764.6496985662","NA","1643.01437211731","33031.1817247111","3527.42783189627","19069.048309685","15853.3763293067","NA","12992.1665600573","7557.38553254587","19656.5572877982","8391.29466453273","1073.56996438119","46573.5757638282","7796.06158987141","NA","2902.05017222503","48001.838150041","NA","37837.4580660753","4978.84140892313","941.257517436465","5029.08820703286","86334.5932512676","NA","NA","5463.77452761607","21539.0707663531","NA","8845.65915842836","12550.4608899758","7894.17795244597","30687.6628625035","27138.478461995","1593.81857804725","NA","143468.756460503","26102.5876430824","26119.9476386955","2106.97364604572","NA","9067.72075035536","NA","NA","3821.0011049889","49841.1456183865","2607.23208916868","16563.8287271075","30125.9538148002","1665.10477335035","77945.485939299","27365.6226058327","7507.75870737035","31019.9430025664","NA","11273.1591124078","1687.25315401305","32553.0510281635","NA","NA","NA","8725.72467687463","46226.5446571126","62595.3100393776","2682.33982343848","5205.60584566686","16019.5187549168","1534.82364710111","NA","25237.6641683782","72460.0406882181","10726.2562201682","26175.9304755498","17169.0600843758","NA","2083.82818966425","10133.8847202138","13692.0458495545","12868.2614190964","37134.3283802194","3008.1130797545","57522.704625517","1706.96325376644","19222.2958348679","12076.0915768601","4896.80187880547","NA","1972.21025392371","3321.59449582601","NA"],"mad_gdppc1900":["NA","1092","NA","NA","NA","NA","NA","4583","6397","4594","NA","NA","NA","NA","NA","5947","NA","1462","NA","NA","874","NA","NA","NA","NA","NA","NA","NA","NA","NA","4640","NA","NA","2056","NA","3386","972","NA","1089","NA","NA","NA","NA","NA","NA","NA","NA","NA","4809","NA","NA","1098","NA","NA","NA","NA","NA","NA","2659","4584","NA","NA","NA","NA","4758","1126.66310160428","NA","1972","NA","NA","NA","NA","NA","NA","2681","2289.47334642053","955","1151","NA","NA","NA","NA","3264","NA","926","2123.25060819","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","1401.09040590406","NA","NA","NA","NA","NA","NA","817.743016759777","NA","NA","NA","NA","NA","1822","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","5306","NA","6851","NA","NA","1024.70119521912","3249","NA","NA","NA","NA","NA","NA","1084","NA","2700","2075","NA","NA","NA","1406.82067086439","1049.18078743003","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","2206","NA","NA","NA","NA","1494","NA","2672.39052813789","NA","NA","NA","NA","3320","6611.77821356305","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","7594","NA","8037.5712","NA","3387","NA","1846","NA","NA","NA","NA"],"bci_bci":["70.507206","56.955081","49.363506","14.475297","62.067964","34.658181","40.03576","52.839005","9.408537","14.372516","23.783083","35.394438","55.690688","46.602346","22.328548","14.996354","11.12723","64.328726","52.08056","33.331763","45.410364","46.352493","39.71011","21.022983","48.286909","54.835174","68.40758","36.172846","58.35419","57.162489","12.004714","52.310429","70.84754","45.752096","73.249922","38.825647","42.77728","24.957994","55.895177","60.536543","69.321163","71.852233","44.400077","44.225166","40.724197","33.255715","35.439764","53.708631","-2.838399","25.628718","54.927697","54.697991","52.052774","72.428637","54.996494","66.288608","14.98243","30.654798","-3.496812","15.932278","54.959864","64.577967","29.400245","55.52821","7.992592","58.721189","49.046228","43.618991","34.217953","60.087391","61.115404","46.558706","72.458776","58.171921","33.672163","7.769404","44.333303","49.316538","60.997314","68.569045","11.498394","26.954873","38.585972","56.138595","50.653361","11.50294","49.975955","35.597565","63.751165","78.274202","33.299564","46.821653","66.882506","59.885922","61.882033","41.545042","33.061941","63.342694","66.839395","2.542914","33.751649","3.735266","56.310596","54.356076","37.838077","44.518237","59.627652","28.293833","57.24037","34.4135","57.393789","NA","51.742866","56.581807","39.723042","40.662802","57.855471","33.566489","42.17693","64.58218","51.929177","5.062764","41.537572","-0.763475","62.025113","42.72923","66.962794","1.958433","31.970154","70.57807","56.754902","53.451344","57.117711","65.211088","60.72385","53.15041","33.512374","32.734581","78.94162","54.659808","20.705247","44.669724","60.500154","24.326638","37.49018","28.218503","24.733542","NA","39.467751","34.664687","47.077191","50.881127","18.813309","63.469625","0.049689","40.629882","53.418386","28.312533","76.714452","52.354479","62.169869","30.74539","72.370941","NA","55.80463","50.473672","2.803769","2.781703","76.125673","56.007563","48.925691","60.98144","38.636006","51.543303","19.635486","39.770841","42.872663","70.968182","36.247682","72.007407","62.350343","44.782321","48.41172","10.05678","46.972337","24.454729","40.611605","21.182593","54.962107","78.661953","24.498443","76.391466","57.156663","45.046681"],"lis_gini":["NA","NA","NA","NA","NA","NA","NA","NA","0.329","0.281","NA","NA","NA","NA","NA","0.255","NA","NA","NA","NA","0.47","NA","NA","NA","NA","NA","NA","NA","NA","NA","0.3","NA","NA","NA","NA","NA","0.413","0.308","0.485","NA","NA","NA","NA","NA","NA","NA","NA","NA","0.285","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","0.288","NA","NA","0.346","NA","0.302","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","0.29","0.345","0.335","NA","NA","NA","NA","NA","NA","NA","0.332","NA","NA","NA","NA","NA","NA","NA","NA","NA","0.356","0.288","NA","NA","NA","NA","0.365","NA","NA","NA","0.418","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","0.27","NA","NA","NA","NA","NA","0.278","NA","NA","NA","NA","NA","0.443","0.436","NA","0.299","NA","NA","NA","NA","0.295","0.313","NA","NA","NA","NA","NA","NA","NA","NA","0.317","NA","NA","NA","0.236","NA","NA","NA","NA","NA","0.319","NA","NA","NA","NA","0.285","0.31","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","0.302","NA","0.371","NA","0.383","NA","NA","NA","NA","NA","NA"],"top_top1_income_share":["0.1508","0.0827","0.2327","0.1141","0.2596","0.2118","0.1399","0.1297","0.0991","0.1069","0.1892","0.255","0.1616","0.15","0.2118","0.0749","0.14","0.1892","0.0944","0.2274","0.218","0.1892","0.1609","0.1314","0.1872","0.1666","0.1448","0.0961","0.1813","0.1326","0.1162","0.1391","0.1559","0.2047","0.1295","0.2306","0.1572","0.1933","0.1794","0.1416","0.2052","0.1941","0.2495","0.0873","0.1559","0.0875","0.0767","0.1284","0.1643","0.2118","0.1604","0.1658","0.1263","0.1893","0.1382","0.1382","0.1441","0.1609","0.1088","0.1269","0.1586","0.1102","0.1853","0.159","0.1055","0.1519","0.1609","0.1397","0.2118","0.1892","0.0871","0.1892","0.1892","0.1892","0.1039","0.0952","0.2213","0.1785","0.1827","0.1569","0.1536","0.1684","0.1274","0.2103","0.1892","0.0601","0.1488","0.2038","0.159","0.1476","0.1514","0.1759","0.1809","0.1971","0.2134","0.1445","0.0962","0.1217","0.1677","0.1141","0.1184","0.0907","0.1517","0.1522","0.1487","0.1308","0.1212","0.0925","0.0997","0.1589","0.2359","0.1141","0.1605","0.099","0.0797","0.1341","0.2481","0.1986","0.2156","0.1609","0.1372","0.1005","0.1609","0.1677","0.1892","0.1413","0.1158","0.0693","0.1609","0.1609","0.1665","0.1892","0.1637","0.1892","0.274","0.1662","0.1048","0.0965","0.1103","0.1523","0.2429","0.1004","0.2376","0.1989","0.2118","0.2118","0.2118","0.1141","0.1597","0.2523","0.1303","0.1022","0.2045","0.1502","0.1421","0.0788","0.1574","0.0875","0.1627","0.1931","0.1749","0.1006","0.1535","NA","0.1892","0.1932","0.1321","0.1093","0.2157","0.1453","0.1983","0.1406","0.1609","0.1892","0.1612","0.2261","0.1897","0.195","0.1609","0.2138","0.0933","0.0738","0.1905","0.1029","0.1814","0.1988","0.1473","0.1722","0.1665","0.1892","0.1609","0.25","0.186","0.1609"],"wdi_wip":["27.0161290322581","35.7142857142857","8.10810810810811","46.4285714285714","29.5454545454545","11.1111111111111","18.1818181818182","44.7470817120623","31.1258278145695","40.4371584699454","17.9487179487179","15","20.8571428571429","33.6448598130841","20","42","17.0212765957447","46.1538461538462","26.1904761904762","10.7692307692308","15.2046783625731","12.5","8","9.09090909090909","23.75","15.2941176470588","38.2113821138211","40","21.6","33.8888888888889","30.4733727810651","38.8888888888889","12.8571428571429","5.38116591928251","32.258064516129","35.4838709677419","24.9411764705882","NA","18.8235294117647","16.6666666666667","11.2582781456954","12.8","45.6140350877193","31.1258278145695","53.4129692832764","14.2857142857143","25","8.43373493975904","39.6648044692737","34.375","27.8947368421053","39.4160583941606","27.3809523809524","23","42.5882352941177","22","25.7425742574257","21.5686274509804","46","39.5147313691508","26.1538461538462","16.1971830985916","19.3333333333333","8.62068965517241","34.9184782608696","14.5454545454545","6.66666666666667","21.6666666666667","46.6666666666667","19.375","16.6666666666667","35.7142857142857","2.54237288135593","27.34375","13.0653266331658","47.6190476190476","14.4444444444444","21.0434782608696","5.59440559440559","28.8753799392097","22.5","28.3333333333333","35.7142857142857","14.1732283464567","28.5714285714286","9.67741935483871","27.1028037383178","11.5384615384615","21.6138328530259","17.6128093158661","19","1.53846153846154","20.4545454545455","21.9512195121951","4.6875","23.3333333333333","29","10.958904109589","15.9574468085106","28","27.6595744680851","35","17.8807947019868","22.9166666666667","14.8648648648649","4.59770114942529","27.2727272727273","13.4328358208955","20.2614379084967","20","50","33.3333333333333","17.1052631578947","39.6039603960396","24.6913580246914","22.7848101265823","42.4","2.32558139534884","44.2307692307692","10.5263157894737","32.7272727272727","39.3333333333333","0","49.1666666666667","50.5494505494505","25.9036144578313","3.61111111111111","44.9704142011834","7.14285714285714","6.25","20.1754385964912","22.5352112676056","0","16.25","40","27.9605263157895","28.322440087146","40","13.7254901960784","38.4615384615385","4.44444444444444","18.5410334346505","16.2222222222222","61.25","25","11.1111111111111","18.1818181818182","33.3333333333333","23.6363636363636","19.8675496688742","43.030303030303","39.2","22.8571428571429","12.3287671232877","29.8076923076923","22.6666666666667","30.2605210420842","26.6666666666667","24.3636363636364","46.5822784810127","31.8518518518519","43.4285714285714","32.3636363636364","NA","29.4117647058824","9.58904109589041","46.9914040114613","42.5","11.2","23.8095238095238","15.7464212678937","18.6813186813187","0","26.1904761904762","50","26.2672811059908","17.3333333333333","25","6.25","33.8129496402878","20.8037825059102","41.6666666666667","27.7027027027027","34.2592592592593","36.8556701030928","27.6497695852535","6.2992125984252","24.2424242424242","32.6530612244898","22.1556886227545","7.84313725490196","0","15.0602409638554","6.06060606060606"],"region":["SouthAsia","EasternEuropePostSoviet","NorthAfricaMiddleEast","WesternEuropeNorthAmerica","SubSaharanAfrica","Caribbean","EasternEuropePostSoviet","LatinAmerica","WesternEuropeNorthAmerica","WesternEuropeNorthAmerica","Caribbean","NorthAfricaMiddleEast","SouthAsia","EasternEuropePostSoviet","Caribbean","WesternEuropeNorthAmerica","SouthAsia","LatinAmerica","EasternEuropePostSoviet","SubSaharanAfrica","LatinAmerica","Caribbean","Pacific","SouthEastAsia","EasternEuropePostSoviet","SouthEastAsia","SubSaharanAfrica","EasternEuropePostSoviet","SouthEastAsia","SubSaharanAfrica","WesternEuropeNorthAmerica","SubSaharanAfrica","SubSaharanAfrica","SouthAsia","SubSaharanAfrica","LatinAmerica","EastAsia","EastAsia","LatinAmerica","SubSaharanAfrica","SubSaharanAfrica","SubSaharanAfrica","LatinAmerica","EasternEuropePostSoviet","LatinAmerica","NorthAfricaMiddleEast","EasternEuropePostSoviet","SubSaharanAfrica","WesternEuropeNorthAmerica","Caribbean","LatinAmerica","LatinAmerica","LatinAmerica","SubSaharanAfrica","SubSaharanAfrica","SubSaharanAfrica","EasternEuropePostSoviet","Pacific","WesternEuropeNorthAmerica","WesternEuropeNorthAmerica","SubSaharanAfrica","SubSaharanAfrica","EasternEuropePostSoviet","SubSaharanAfrica","WesternEuropeNorthAmerica","SubSaharanAfrica","Pacific","WesternEuropeNorthAmerica","Caribbean","LatinAmerica","SubSaharanAfrica","Caribbean","LatinAmerica","LatinAmerica","EasternEuropePostSoviet","WesternEuropeNorthAmerica","SouthAsia","SouthEastAsia","NorthAfricaMiddleEast","NorthAfricaMiddleEast","WesternEuropeNorthAmerica","NorthAfricaMiddleEast","WesternEuropeNorthAmerica","SubSaharanAfrica","Caribbean","EastAsia","EasternEuropePostSoviet","NorthAfricaMiddleEast","SubSaharanAfrica","EastAsia","EastAsia","NorthAfricaMiddleEast","EasternEuropePostSoviet","SouthEastAsia","NorthAfricaMiddleEast","SubSaharanAfrica","EasternEuropePostSoviet","SubSaharanAfrica","NorthAfricaMiddleEast","WesternEuropeNorthAmerica","EasternEuropePostSoviet","WesternEuropeNorthAmerica","SubSaharanAfrica","SubSaharanAfrica","SouthEastAsia","SouthAsia","SubSaharanAfrica","WesternEuropeNorthAmerica","SubSaharanAfrica","SubSaharanAfrica","LatinAmerica","WesternEuropeNorthAmerica","EastAsia","EasternEuropePostSoviet","EasternEuropePostSoviet","NorthAfricaMiddleEast","SubSaharanAfrica","NorthAfricaMiddleEast","SubSaharanAfrica","Pacific","SouthAsia","WesternEuropeNorthAmerica","Pacific","WesternEuropeNorthAmerica","LatinAmerica","SubSaharanAfrica","SubSaharanAfrica","WesternEuropeNorthAmerica","Pacific","Pacific","SouthAsia","LatinAmerica","Pacific","LatinAmerica","LatinAmerica","SouthEastAsia","EasternEuropePostSoviet","WesternEuropeNorthAmerica","SubSaharanAfrica","SouthEastAsia","NorthAfricaMiddleEast","EasternEuropePostSoviet","EasternEuropePostSoviet","SubSaharanAfrica","Caribbean","Caribbean","Caribbean","WesternEuropeNorthAmerica","SubSaharanAfrica","NorthAfricaMiddleEast","SubSaharanAfrica","EasternEuropePostSoviet","SubSaharanAfrica","SubSaharanAfrica","SouthEastAsia","EasternEuropePostSoviet","SouthEastAsia","EasternEuropePostSoviet","SubSaharanAfrica","SubSaharanAfrica","SubSaharanAfrica","WesternEuropeNorthAmerica","SubSaharanAfrica","SubSaharanAfrica","Caribbean","SubSaharanAfrica","WesternEuropeNorthAmerica","WesternEuropeNorthAmerica","NorthAfricaMiddleEast","EasternEuropePostSoviet","SouthEastAsia","SubSaharanAfrica","Pacific","Caribbean","NorthAfricaMiddleEast","NorthAfricaMiddleEast","NorthAfricaMiddleEast","EasternEuropePostSoviet","Pacific","SubSaharanAfrica","EasternEuropePostSoviet","EasternEuropePostSoviet","NorthAfricaMiddleEast","WesternEuropeNorthAmerica","SubSaharanAfrica","WesternEuropeNorthAmerica","SubSaharanAfrica","LatinAmerica","EasternEuropePostSoviet","LatinAmerica","Pacific","NorthAfricaMiddleEast","SubSaharanAfrica","Pacific"]},"columns":[{"id":"cname_qog","name":"cname_qog","type":"character"},{"id":"cname","name":"cname","type":"character"},{"id":"ccodealp","name":"ccodealp","type":"character"},{"id":"undp_hdi","name":"undp_hdi","type":"character"},{"id":"wdi_expedu","name":"wdi_expedu","type":"character"},{"id":"wdi_acel","name":"wdi_acel","type":"character"},{"id":"wdi_area","name":"wdi_area","type":"character"},{"id":"wdi_taxrev","name":"wdi_taxrev","type":"character"},{"id":"wdi_expmil","name":"wdi_expmil","type":"character"},{"id":"wdi_fdiin","name":"wdi_fdiin","type":"character"},{"id":"wdi_trade","name":"wdi_trade","type":"character"},{"id":"cbie_index","name":"cbie_index","type":"character"},{"id":"ht_region","name":"ht_region","type":"character"},{"id":"wbgi_rle","name":"wbgi_rle","type":"character"},{"id":"bmr_dem","name":"bmr_dem","type":"character"},{"id":"atop_ally","name":"atop_ally","type":"character"},{"id":"gol_est","name":"gol_est","type":"character"},{"id":"mad_gdppc","name":"mad_gdppc","type":"character"},{"id":"mad_gdppc1900","name":"mad_gdppc1900","type":"character"},{"id":"bci_bci","name":"bci_bci","type":"character"},{"id":"lis_gini","name":"lis_gini","type":"character"},{"id":"top_top1_income_share","name":"top_top1_income_share","type":"character"},{"id":"wdi_wip","name":"wdi_wip","type":"character"},{"id":"region","name":"region","type":"character"}],"bordered":true,"striped":true,"dataKey":"6fbf626dfd37e32fdf270a7c136b5829"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>We’ll begin by developing some basic intuitions about missing data in R using a simple toy dataset, which we’ll create below and assign to the <code>student_scores</code> data frame:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># makes toy dataset, assigned to object named "student_scores"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>student_scores<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">Age=</span><span class="fu">c</span>(<span class="dv">25</span>, <span class="cn">NA</span>, <span class="dv">30</span>, <span class="dv">22</span>, <span class="cn">NA</span>),</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">Score=</span><span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">90</span>, <span class="cn">NA</span>, <span class="dv">78</span>, <span class="dv">88</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print our toy <code>student_scores</code> data frame to get a clear sense of what it looks like:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "student_scores"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>student_scores</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Score
1  25    85
2  NA    90
3  30    NA
4  22    78
5  NA    88</code></pre>
</div>
</div>
<p>Note the “NA” values, which indicate that data corresponding to those cells is missing.</p>
<p>If we want to identify missing data, we can do so with the <code>is.na()</code> function, which returns a logical matrix with the value TRUE for missing values:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># uses "is.na" to return a logical matrix indicating missing values (TRUE for missing values)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(student_scores)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Age Score
[1,] FALSE FALSE
[2,]  TRUE FALSE
[3,] FALSE  TRUE
[4,] FALSE FALSE
[5,]  TRUE FALSE</code></pre>
</div>
</div>
<p>If we want the total number of missing values in the dataset, we can take the sum of <code>is.na(student_scores)</code> :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates total number of missing values in "student_scores"</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(student_scores))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>If we want the total number of missing values per column, we can pass <code>is.na(student_scores)</code> as an argument to the <code>colSum()</code> function, which we can do because in R, logical values can be used in numeric operations; when they’re used in this way, <code>TRUE=1</code> and <code>FALSE=0</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates total number of missing values per column</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(student_scores))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Score 
    2     1 </code></pre>
</div>
</div>
<p>If we wanted to calculate the percentage of missing data in the dataset, we could use our count of the number of NA values in the dataset <code>sum(is.na(student_scores))</code> and divide it by the total number of cells in the dataset, derived by multiplying the dataset’s rows and columns:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates missing data percentage in "student_scores"</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># first calculates count of missing values and assigns it to "total_missing"</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>total_missing<span class="ot">&lt;-</span><span class="fu">sum</span>(<span class="fu">is.na</span>(student_scores))</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates total number of cells and assigns it to "total_values"</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>total_values<span class="ot">&lt;-</span><span class="fu">prod</span>(<span class="fu">dim</span>(student_scores))</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates percentage of missing data and assigns it to "missing_pct"</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>missing_pct<span class="ot">&lt;-</span>(total_missing<span class="sc">/</span>total_values)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "missing_pct"</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>missing_pct</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30</code></pre>
</div>
</div>
<p>Calculating the percentage of data missing in a dataset can be useful, and something we may want to do frequently, so it could be useful to wrap this code into a function, which we’ll do below, and assign to a new object named <code>missing_data_percentage()</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates function to calculate the percentage of missing data in a dataset</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>missing_data_percentage<span class="ot">&lt;-</span><span class="cf">function</span>(dataset){</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># generates count of missing values</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  total_missing<span class="ot">&lt;-</span><span class="fu">sum</span>(<span class="fu">is.na</span>(dataset))</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculates total number of cells</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  total_values<span class="ot">&lt;-</span><span class="fu">prod</span>(<span class="fu">dim</span>(dataset))</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculates percentage of missing data</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>missing_pct<span class="ot">&lt;-</span>(total_missing<span class="sc">/</span>total_values)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(missing_pct)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s test out the function on <code>student_scores</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># passes "student_scores" as an argument to custom function "missing_data_percentage" which yields the percentage of missing data in the "student_scores" dataset</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">missing_data_percentage</span>(student_scores)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30</code></pre>
</div>
</div>
<p>We can now use this function for any other datasets we might create or work with, without having to retype a bunch of code. For example, if we wanted to calculate the percentage of missing data in <code>qog_copy</code>, we could pass it as an argument to <code>missing_data_percentage</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates missing data percentage in "qog_copy"</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">missing_data_percentage</span>(qog_copy)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33.78858</code></pre>
</div>
</div>
<p>If we wanted to calculate the percentage of missing data in the modified <code>qog_copy_selection</code> dataset, we could pass it as an argument to the <code>missing_data_percentage</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates missing data percentage in "qog_copy_selection"</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">missing_data_percentage</span>(qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13.10137</code></pre>
</div>
</div>
<p>It could also be useful to get a sense of the percentage of missing data at more granular levels. For example, if we wanted to uncover the percentage of missing data per column, we could carry out a simple calculation using the <code>colSums()</code> and <code>nrow()</code> functions:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates percentage of missing data per column in "student_scores" and assigns the resulting vector to an object named "missing_pct_per_col"</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>missing_pct_per_col<span class="ot">&lt;-</span><span class="fu">colSums</span>(<span class="fu">is.na</span>(student_scores))<span class="sc">/</span><span class="fu">nrow</span>(student_scores)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "missing_pct_per_col"</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>missing_pct_per_col</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Score 
   40    20 </code></pre>
</div>
</div>
<p>In many cases, after identifying patterns in the missing data, we may want to remove “NA” values from a dataset or a certain section of a dataset. If we want to remove missing data, the <code>drop_na()</code> function from the <em>tidyverse</em> is useful. The <code>drop_na()</code> function will remove all rows from the dataset with NA values in any column. For example, the following removes all rows with NA values from the “student_scores” data frame.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removes all rows with NA values from "student_scores"</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(student_scores)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Score
1  25    85
2  22    78</code></pre>
</div>
</div>
<p>The default behavior of the <code>drop_na()</code> function is to drop all rows with NA values in any column (i.e.&nbsp;only rows with complete data are kept in the dataset). However, it’s possible to change this default behavior by specifying column/variable names after passing the data frame object as an argument; when we do this, <code>drop_na()</code> no longer drops all rows with missing data in any column, but all rows with missing data in any specified column. For example, the code below drops all rows where “Age” values are NA, but not all rows where “Score” scores are NA</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removes all rows where "Age" has NA values in "student_scores"</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(student_scores, Age)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Score
1  25    85
2  30    NA
3  22    78</code></pre>
</div>
</div>
<p>If, instead, we specify “Score” as an argument, the function drops all rows where “Score” values are NA, but not all rows where “Age” values are NA.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removes all rows where "Score" has NA values in "student_scores"</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(student_scores, Score)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Score
1  25    85
2  NA    90
3  22    78
4  NA    88</code></pre>
</div>
</div>
<p>Note that we can specify more than one column argument to <code>drop_na()</code>, in which case rows which have NA values associated with those specified columns will be dropped, but rows which have NA values with other (non-specified) columns are kept.</p>
<p>Imputing missing values is a complex topic beyond the scope of our workshop, but it’s worth briefly noting that for whatever reason, NA values may be incorrectly coded, or used as placeholders for other values. For example, you may know from a dataset’s codebook, or from context, that for a particular column in the dataset, observations that appear as missing/NA should actually be coded as “0”. We can use the <code>replace_na()</code> function to replace such NA values with their proper values. For example, let’s say that NA values in the “Score” column should actually be “0” (perhaps NA was being used as a placeholder, and needs to be converted to 0 since the student never turned in their assignment). In the <code>replace_na()</code> function, the first argument is the name of the data frame object, while the second is a list that indicates the column(s) with NA values that need replacement, and a specification for what they will be replaced with. In our case, the syntax looks something like this:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace NA values in the "Score" column with 0</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">replace_na</span>(student_scores, <span class="fu">list</span>(<span class="at">Score=</span><span class="dv">0</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Score
1  25    85
2  NA    90
3  30     0
4  22    78
5  NA    88</code></pre>
</div>
</div>
<p>Sometimes, we may need to make even more targeted replacements of “NA” values. For example, let’s say we want to replace the “NA” value associated with the “Age” variable that is in row #5, with the numeric value “22”, but do not want to change the “NA” in row #2 for that column. In such scenarios, using the <code>mutate()</code> and <code>if_else()</code> functions in conjunction may provide more flexibility than the <code>replace_na()</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># changes NA values in Age column to 22 where ID is equal to 5, and makes no changes otherwise; assigns modified data frame to "student_scores_modified"</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>student_scores_modified<span class="ot">&lt;-</span>student_scores <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">mutate</span>(<span class="at">Age =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(Age) <span class="sc">&amp;</span> <span class="fu">row_number</span>()<span class="sc">==</span><span class="dv">5</span>, <span class="dv">22</span>, Age))</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "student_scores_modified"</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>student_scores_modified</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Score
1  25    85
2  NA    90
3  30    NA
4  22    78
5  22    88</code></pre>
</div>
</div>
<p>In the code above, note the use of <code>row_number()</code> in our conditional expression; <code>row_number()</code> is a handy <em>dplyr</em> function that allows us to quickly reference row positions within data processing pipelines.</p>
<p>Finally, it’s important to note that base R functions like <code>mean()</code> and <code>sum()</code> will return NA if there are missing values. For example:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates mean of "Score" (NA values are not excluded; default behavior)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(student_scores<span class="sc">$</span>Score)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>If we want such functions to carry out their calculations on non-NA values (while ignoring NA values), we must set <code>na.rm=TRUE</code> as a function argument.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates mean of "Score" (NA values are excluded due to na.rm=TRUE specification; as a result, the function computes an average based on non-NA values)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(student_scores<span class="sc">$</span>Score, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 85.25</code></pre>
</div>
</div>
<p>It is important to emphasize that when working in R, different packages or functions may handle missing data differently, so it’s useful to consult the documentation of the packages you use for more information (especially when something is not working as expected).</p>
</section>
<section id="descriptive-statistics" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="descriptive-statistics"><span class="header-section-number">5.4</span> Descriptive Statistics</h2>
<p>Once we have a dataset loaded into R, and we have wrangled it into a usable form that is appropriate for analysis (the main subject of the previous lesson), the next step is usually to get a sense of the basic structure of the dataset by calculating summary statistics. This section reviews some summary statistics functions and tools we can call on for this purpose.</p>
<section id="summary-statistics-tables" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="summary-statistics-tables"><span class="header-section-number">5.4.1</span> Summary Statistics Tables</h3>
<p>A quick way to generate a table of summary statistics is to use the&nbsp;<code>describe()</code>&nbsp;function from the <em>psych</em> package. Below, we’ll generate summary statistics for the&nbsp;<code>qog_copy_selection</code>&nbsp;data frame by passing it as an argument to the&nbsp;<code>describe()</code>&nbsp;function. We’ll assign the resulting table of summary statistics to a new object named&nbsp;<code>qog_copy_selection_summarystats1</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate summary statistics for "qog_copy_selection" and assign table of </span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># summary statistics to a new object named "qog_copy_selection_summarystats1"</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>qog_copy_selection_summarystats1<span class="ot">&lt;-</span><span class="fu">describe</span>(qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print the first few rows of <code>qog_copy_selection_summarystats1</code> to the console:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints first few rows of "qog_copy_selection_summarystats1" to console</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(qog_copy_selection_summarystats1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>           vars   n  mean    sd median trimmed   mad  min    max  range  skew
cname_qog*    1 194 97.50 56.15  97.50   97.50 71.91 1.00 194.00 193.00  0.00
cname*        2 194 97.50 56.15  97.50   97.50 71.91 1.00 194.00 193.00  0.00
ccodealp*     3 194 97.50 56.15  97.50   97.50 71.91 1.00 194.00 193.00  0.00
undp_hdi      4 190  0.72  0.15   0.74    0.73  0.17 0.38   0.96   0.58 -0.34
wdi_expedu    5 174  4.58  2.07   4.31    4.39  1.75 0.38  14.20  13.81  1.34
wdi_acel      6 192 85.84 24.47 100.00   91.30  0.00 7.70 100.00  92.30 -1.66
           kurtosis   se
cname_qog*    -1.22 4.03
cname*        -1.22 4.03
ccodealp*     -1.22 4.03
undp_hdi      -0.82 0.01
wdi_expedu     3.51 0.16
wdi_acel       1.55 1.77</code></pre>
</div>
</div>
<p>We can also view it in the R Studio data viewer:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># view "qog_copy_selection_summarystats1" in Viewer</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(qog_copy_selection_summarystats1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-8dafd4e45ee634888035" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8dafd4e45ee634888035">{"x":{"tag":{"name":"Reactable","attribs":{"data":{".rownames":["cname_qog*","cname*","ccodealp*","undp_hdi","wdi_expedu","wdi_acel","wdi_area","wdi_taxrev","wdi_expmil","wdi_fdiin","wdi_trade","cbie_index","ht_region","wbgi_rle","bmr_dem","atop_ally","gol_est","mad_gdppc","mad_gdppc1900","bci_bci","lis_gini","top_top1_income_share","wdi_wip","region*"],"vars":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],"n":["194","194","194","190","174","192","192","141","152","181","169","153","194","193","193","184","142","162","47","191","35","193","192","194"],"mean":["97.5","97.5","97.5","0.7191","4.57875832863923","85.8401041666667","663647.3700625","16.2108572691318","1.87270164764673","-2.86644631103304","89.9733953869321","0.693532679738562","4.50515463917526","-0.0657579336787565","0.606217616580311","1","1.80985915492958","19024.6336684851","2924.3332568956","44.2621896439791","0.3328","0.158515025906736","24.5112921491491","6.2680412371134"],"sd":["56.1471281545192","56.1471281545192","56.1471281545192","0.15328168729948","2.0658593722409","24.4662264486845","1839052.88341333","6.85496415306667","1.33656359763159","97.4077152130218","57.0163174557007","0.15381130221205","2.6432971690957","0.99625272055695","0.489858285523858","0","0.713925305423545","20243.3109644466","2007.79455862149","19.4858625597985","0.0612015955193788","0.0446596286291792","12.9439793023131","2.9539311259297"],"median":["97.5","97.5","97.5","0.7375","4.31240200996399","100","120375","15.8771617065457","1.53811142492431","2.81683452885051","78.7627100301698","0.7095","4","-0.15831885","1","1","2","12405.7517513694","2206","46.821653","0.313","0.1604","23.4848484848484","6"],"trimmed":["97.5","97.5","97.5","0.725888157894737","4.39082469940185","91.2974025974026","267089.425311688","16.0777202063824","1.6742372867594","3.3609168320833","81.0891611932557","0.701752032520325","4.30128205128206","-0.0839866264516128","0.632258064516129","1","1.76315789473684","15692.8358940957","2686.57873445565","45.4760339542484","0.327206896551724","0.157958064516129","24.1943761726209","6.41666666666666"],"mad":["71.9061","71.9061","71.9061","0.1749468","1.74631011414528","0","177401.9856","6.91264493853585","0.905529029972774","2.98102268459693","34.4131801794054","0.1860663","2.9652","1.04977620531","0","0","1.4826","14471.6078877646","1656.0642","19.3690852194","0.0415128","0.04344018","13.6157142857143","4.4478"],"min":["1","1","1","0.38","0.381919115781784","7.7","2.084","5.8864372548248e-05","0.110133662270893","-1303.10826691135","24.3450393271265","0.3015","1","-2.3008955","0","1","1","606.859105151281","817.743016759777","-3.496812","0.236","0.0601","0","1"],"max":["194","194","194","0.965","14.1951599121094","100","16376870","44.3468321505376","7.58146863585647","32.7522138541297","393.14119815602","0.912","10","2.0134761","1","1","3","143468.756460503","8037.5712","78.94162","0.485","0.274","61.25","10"],"range":["193","193","193","0.585","13.8132407963276","92.3","16376867.916","44.3467732861651","7.47133497358558","1335.86048076548","368.796158828893","0.6105","9","4.3143716","1","0","2","142861.897355352","7219.82818324022","82.438432","0.249","0.2139","61.25","9"],"skew":["0","0","0","-0.337616944548824","1.33615673729359","-1.65842253622204","5.45689904954331","0.470429773455362","1.74546915119653","-13.1385695265508","2.50635359043855","-0.333182353851771","0.610503139748493","0.145756643704891","-0.431419736515567","NaN","0.289722488319543","2.24733988874727","0.924532335355301","-0.521173270679645","0.907173088190825","0.0796922463771908","0.239804194040014","-0.231168542729344"],"kurtosis":["-1.21857198917567","-1.21857198917567","-1.21857198917567","-0.818051671210733","3.50867845318054","1.54942482950788","34.4960363996693","1.23302111721088","3.67360912154308","172.406557886069","8.487029135293","-0.871233261827302","-0.516486283771954","-0.66798086606984","-1.82324346831907","NaN","-1.03164953818951","8.32771857936247","-0.254124905585837","-0.399712601310902","-0.0652589569259154","-0.523464096048766","-0.596269338050695","-1.38556936430458"],"se":["4.03112887414928","4.03112887414928","4.03112887414928","0.0111202223712562","0.156612394840497","1.76569780327529","132722.20966158","0.577292123034722","0.108409623119721","7.24025845171501","4.38587057351544","0.0124349067732173","0.189777676820343","0.0717118399983131","0.0352607709554824","0","0.059911280752771","1590.46471740313","292.866936222842","1.40994753104886","0.0103449577698753","0.00321467041098705","0.934151241821929","0.212079895185611"]},"columns":[{"id":".rownames","name":"","type":"character","sortable":false,"filterable":false,"rowHeader":true},{"id":"vars","name":"vars","type":"character"},{"id":"n","name":"n","type":"character"},{"id":"mean","name":"mean","type":"character"},{"id":"sd","name":"sd","type":"character"},{"id":"median","name":"median","type":"character"},{"id":"trimmed","name":"trimmed","type":"character"},{"id":"mad","name":"mad","type":"character"},{"id":"min","name":"min","type":"character"},{"id":"max","name":"max","type":"character"},{"id":"range","name":"range","type":"character"},{"id":"skew","name":"skew","type":"character"},{"id":"kurtosis","name":"kurtosis","type":"character"},{"id":"se","name":"se","type":"character"}],"bordered":true,"striped":true,"dataKey":"b4ace257223fde58b3415a2037bbd721"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Note that the <code>describe()</code> function returns statistics for non-numeric variables (marked with a “*” in the summary statistics table output), but these results often do not have an intuitive or meaningful interpretation. We could limit the summary statistics output to numeric variables by first modifying the data frame to remove non-numeric columns and assigning the result to a new object named <code>qog_copy_selection_numeric</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removes non-numeric variables and assigns modified data frame to new object named "qog_copy_selection_numeric"</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>qog_copy_selection_numeric<span class="ot">&lt;-</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>ht_region) <span class="sc">%&gt;%</span> </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, let’s pass <code>qog_copy_selection_numeric</code> to the <code>describe()</code> function and create our summary statistics table, which we’ll assign to a new object named <code>qog_copy_selection_numeric_summarystats2</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generates summary statistics for numeric variables </span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (i.e. those in qog_copy_selection_numeric) using "describe()</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>qog_copy_selection_numeric_summarystats2<span class="ot">&lt;-</span><span class="fu">describe</span>(qog_copy_selection_numeric)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s now view the modified “numeric variables only” summary statistics table:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># views "qog_copy_selection_numeric_summarystats2" in data viewer</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(qog_copy_selection_numeric_summarystats2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-3270975d1917c9d7aee1" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3270975d1917c9d7aee1">{"x":{"tag":{"name":"Reactable","attribs":{"data":{".rownames":["undp_hdi","wdi_expedu","wdi_acel","wdi_area","wdi_taxrev","wdi_expmil","wdi_fdiin","wdi_trade","cbie_index","wbgi_rle","bmr_dem","atop_ally","gol_est","mad_gdppc","mad_gdppc1900","bci_bci","lis_gini","top_top1_income_share","wdi_wip"],"vars":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],"n":["190","174","192","192","141","152","181","169","153","193","193","184","142","162","47","191","35","193","192"],"mean":["0.7191","4.57875832863923","85.8401041666667","663647.3700625","16.2108572691318","1.87270164764673","-2.86644631103304","89.9733953869321","0.693532679738562","-0.0657579336787565","0.606217616580311","1","1.80985915492958","19024.6336684851","2924.3332568956","44.2621896439791","0.3328","0.158515025906736","24.5112921491491"],"sd":["0.15328168729948","2.0658593722409","24.4662264486845","1839052.88341333","6.85496415306667","1.33656359763159","97.4077152130218","57.0163174557007","0.15381130221205","0.99625272055695","0.489858285523858","0","0.713925305423545","20243.3109644466","2007.79455862149","19.4858625597985","0.0612015955193788","0.0446596286291792","12.9439793023131"],"median":["0.7375","4.31240200996399","100","120375","15.8771617065457","1.53811142492431","2.81683452885051","78.7627100301698","0.7095","-0.15831885","1","1","2","12405.7517513694","2206","46.821653","0.313","0.1604","23.4848484848484"],"trimmed":["0.725888157894737","4.39082469940185","91.2974025974026","267089.425311688","16.0777202063824","1.6742372867594","3.3609168320833","81.0891611932557","0.701752032520325","-0.0839866264516128","0.632258064516129","1","1.76315789473684","15692.8358940957","2686.57873445565","45.4760339542484","0.327206896551724","0.157958064516129","24.1943761726209"],"mad":["0.1749468","1.74631011414528","0","177401.9856","6.91264493853585","0.905529029972774","2.98102268459693","34.4131801794054","0.1860663","1.04977620531","0","0","1.4826","14471.6078877646","1656.0642","19.3690852194","0.0415128","0.04344018","13.6157142857143"],"min":["0.38","0.381919115781784","7.7","2.084","5.8864372548248e-05","0.110133662270893","-1303.10826691135","24.3450393271265","0.3015","-2.3008955","0","1","1","606.859105151281","817.743016759777","-3.496812","0.236","0.0601","0"],"max":["0.965","14.1951599121094","100","16376870","44.3468321505376","7.58146863585647","32.7522138541297","393.14119815602","0.912","2.0134761","1","1","3","143468.756460503","8037.5712","78.94162","0.485","0.274","61.25"],"range":["0.585","13.8132407963276","92.3","16376867.916","44.3467732861651","7.47133497358558","1335.86048076548","368.796158828893","0.6105","4.3143716","1","0","2","142861.897355352","7219.82818324022","82.438432","0.249","0.2139","61.25"],"skew":["-0.337616944548824","1.33615673729359","-1.65842253622204","5.45689904954331","0.470429773455362","1.74546915119653","-13.1385695265508","2.50635359043855","-0.333182353851771","0.145756643704891","-0.431419736515567","NaN","0.289722488319543","2.24733988874727","0.924532335355301","-0.521173270679645","0.907173088190825","0.0796922463771908","0.239804194040014"],"kurtosis":["-0.818051671210733","3.50867845318054","1.54942482950788","34.4960363996693","1.23302111721088","3.67360912154308","172.406557886069","8.487029135293","-0.871233261827302","-0.66798086606984","-1.82324346831907","NaN","-1.03164953818951","8.32771857936247","-0.254124905585837","-0.399712601310902","-0.0652589569259154","-0.523464096048766","-0.596269338050695"],"se":["0.0111202223712562","0.156612394840497","1.76569780327529","132722.20966158","0.577292123034722","0.108409623119721","7.24025845171501","4.38587057351544","0.0124349067732173","0.0717118399983131","0.0352607709554824","0","0.059911280752771","1590.46471740313","292.866936222842","1.40994753104886","0.0103449577698753","0.00321467041098705","0.934151241821929"]},"columns":[{"id":".rownames","name":"","type":"character","sortable":false,"filterable":false,"rowHeader":true},{"id":"vars","name":"vars","type":"character"},{"id":"n","name":"n","type":"character"},{"id":"mean","name":"mean","type":"character"},{"id":"sd","name":"sd","type":"character"},{"id":"median","name":"median","type":"character"},{"id":"trimmed","name":"trimmed","type":"character"},{"id":"mad","name":"mad","type":"character"},{"id":"min","name":"min","type":"character"},{"id":"max","name":"max","type":"character"},{"id":"range","name":"range","type":"character"},{"id":"skew","name":"skew","type":"character"},{"id":"kurtosis","name":"kurtosis","type":"character"},{"id":"se","name":"se","type":"character"}],"bordered":true,"striped":true,"dataKey":"1ff375844f08b66ca43fe3f0be397bd8"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Recall that we can view the documentation for any function (including those from external packages) by printing a “?” before the name of the function in the R console:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pulls up documentation for describe() function in the "Help" tab in the bottom-right window of R Studio</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>?describe</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>One thing to note from the documentation is that the <code>describe()</code> function defaults to setting <code>na.rm=TRUE</code>; under this setting, the <code>describe()</code> function simply omits NA (i.e.&nbsp;missing) values when calculating summary statistics. If, instead, we set <code>na.rm=FALSE</code>, the function deletes all rows that contain missing data, and calculates summary statistics with reference to this truncated dataset that has been excised of missing values. In practical terms, it will typically make the most sense to go with the default <code>na.rm=TRUE</code> option, but it’s important to be clear about these different options for handling missing data in the context of the <code>describe()</code> function.</p>
<p>If you’re still struggling to understand the difference, we can explore how this works in the context of our toy dataset, <code>student_scores</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "student_scores"</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>student_scores</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Score
1  25    85
2  NA    90
3  30    NA
4  22    78
5  NA    88</code></pre>
</div>
</div>
<p>Let’s pass <code>student_scores</code> as an argument to the <code>describe()</code> function, and set <code>na.rm=TRUE</code>; we’ll assign the result to a new object named <code>student_scores_summarystats</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generates summary statistics with "describe()" function </span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and assigns it to "df_sample_summary_default"; </span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># na.rm=TRUE ignores NA values when calculating summary statistics</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>student_scores_summarystats<span class="ot">&lt;-</span><span class="fu">describe</span>(student_scores, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s now print <code>student_scores_summarystats</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "student_scores_summarystats"</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>student_scores_summarystats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      vars n  mean   sd median trimmed  mad min max range  skew kurtosis   se
Age      1 3 25.67 4.04   25.0   25.67 4.45  22  30     8  0.16    -2.33 2.33
Score    2 4 85.25 5.25   86.5   85.25 3.71  78  90    12 -0.44    -1.91 2.63</code></pre>
</div>
</div>
<p>Note that the calculations are carried out by simply ignoring NA values. For example, the mean for the “Age” variable is (25+30+22)/3=25.67, while the mean for the “Score” variable is (85+90+78+88)/4=85.25. Now, let’s see how these calculations change when <code>na.rm=FALSE</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generates summary statistics with describe function and assigns</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># it to "df_sample_summary_B"; na.rm=FALSE removes rows with any NA </span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># values  before calculating summary statistics (in other words, </span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># summary statistics are computed on rows with complete data)</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>student_scores_summarystats_B<span class="ot">&lt;-</span><span class="fu">describe</span>(student_scores, <span class="at">na.rm=</span><span class="cn">FALSE</span>)</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "student_scores_summarystats_B"</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>student_scores_summarystats_B</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      vars n mean   sd median trimmed  mad min max range skew kurtosis  se
Age      1 2 23.5 2.12   23.5    23.5 2.22  22  25     3    0    -2.75 1.5
Score    2 2 81.5 4.95   81.5    81.5 5.19  78  85     7    0    -2.75 3.5</code></pre>
</div>
</div>
<p>Note that the mean of the “Age” column is now (25+22)/2=23.5, since <code>na.rm=FALSE</code> deletes all rows with NA values (here, rows 2, 3, and 5) before implementing the calculation. Analogously, the mean of the “Score” column is now (85+78)/2=81.5</p>
</section>
<section id="customizing-summary-statistics-tables" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="customizing-summary-statistics-tables"><span class="header-section-number">5.4.2</span> Customizing Summary Statistics Tables</h3>
<p>There are a variety of other packages that can help you generate summary statistics tables, beyond <em>psych</em>. For example, the <em>summarytools</em> package provides the <code>descr()</code> , which is similar to <code>describe()</code> from the <em>psych</em> package. The <em>summarytools</em> package defaults to providing information as a matrix, which we haven’t covered, so we pass <code>descr(qog_copy_selection)</code> to the <code>as.data.frame()</code> function to get the summary statistics table output as a data frame, which we’ll assign to a new object named <code>qog_copy_selection_numeric_ST</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># uses "descr" function from summarytools package to </span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create a table of summary statistics as a data frame </span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># and assigns it to "qog_copy_selection_numeric_ST"</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>qog_copy_selection_numeric_ST<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">descr</span>(qog_copy_selection_numeric))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s go ahead and view <code>qog_copy_selection_numeric_ST</code> in the data viewer:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># views "qog_copy_selection_numeric_ST" in Viewer</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(qog_copy_selection_numeric_ST)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-e6e60e19eed54366b02d" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e6e60e19eed54366b02d">{"x":{"tag":{"name":"Reactable","attribs":{"data":{".rownames":["Mean","Std.Dev","Min","Q1","Median","Q3","Max","MAD","IQR","CV","Skewness","SE.Skewness","Kurtosis","N.Valid","Pct.Valid"],"atop_ally":["1","0","1","1","1","1","1","0","0","0","NaN","0.179129750129857","NaN","184","94.8453608247423"],"bci_bci":["44.2621896439791","19.4858625597985","-3.496812","33.299564","46.821653","57.855471","78.94162","19.3690852194","24.3089665","0.440237202825531","-0.521173270679646","0.175867960777378","-0.399712601310902","191","98.4536082474227"],"bmr_dem":["0.606217616580311","0.489858285523858","0","0","1","1","1","0","1","0.808056829966705","-0.431419736515567","0.174968274845551","-1.82324346831907","193","99.4845360824742"],"cbie_index":["0.693532679738562","0.15381130221205","0.3015","0.5655","0.7095","0.8265","0.912","0.1860663","0.261","0.221779458568602","-0.333182353851769","0.19612456860849","-0.871233261827302","153","78.8659793814433"],"gol_est":["1.80985915492958","0.713925305423545","1","1","2","2","3","1.4826","1","0.394464565642582","0.289722488319543","0.203429211624252","-1.03164953818951","142","73.1958762886598"],"lis_gini":["0.3328","0.0612015955193788","0.236","0.288","0.313","0.365","0.485","0.0415128","0.0715","0.183899024998133","0.90717308819083","0.397694044332317","-0.0652589569259159","35","18.0412371134021"],"mad_gdppc":["19024.6336684851","20243.3109644466","606.859105151281","4190.57829675246","12405.7517513694","27365.6226058327","143468.756460503","14471.6078877646","22994.902094747","1.06405785873188","2.24733988874727","0.190699829538615","8.32771857936248","162","83.5051546391753"],"mad_gdppc1900":["2924.3332568956","2007.79455862149","817.743016759777","1126.66310160428","2206","4584","8037.5712","1656.0642","3444.66844919786","0.686581993993705","0.9245323353553","0.346570499481867","-0.254124905585837","47","24.2268041237113"],"top_top1_income_share":["0.158515025906736","0.0446596286291792","0.0601","0.1284","0.1604","0.1892","0.274","0.04344018","0.0608","0.281737509574993","0.0796922463771946","0.174968274845551","-0.523464096048766","193","99.4845360824742"],"undp_hdi":["0.7191","0.15328168729948","0.38","0.599","0.7375","0.84","0.965","0.1749468","0.23975","0.213157679459714","-0.337616944548822","0.176323040021206","-0.818051671210733","190","97.9381443298969"],"wbgi_rle":["-0.0657579336787565","0.99625272055695","-2.3008955","-0.800228","-0.15831885","0.60567933","2.0134761","1.04977620531","1.40590733","-15.1503045309162","0.145756643704891","0.174968274845551","-0.66798086606984","193","99.4845360824742"],"wdi_acel":["85.8401041666667","24.4662264486845","7.7","80.5","100","100","100","0","18.5","0.285020931488864","-1.65842253622204","0.175416387314151","1.54942482950788","192","98.9690721649485"],"wdi_area":["663647.3700625","1839052.88341333","2.084","23925","120375","519430","16376870","177401.9856","490862.5","2.77112961849021","5.45689904954331","0.175416387314151","34.4960363996693","192","98.9690721649485"],"wdi_expedu":["4.57875832863923","2.0658593722409","0.381919115781784","3.19807553291321","4.31240200996399","5.4969801902771","14.1951599121094","1.74631011414528","2.29683494567871","0.451183317389641","1.33615673729359","0.18412104025293","3.50867845318054","174","89.6907216494845"],"wdi_expmil":["1.87270164764673","1.33656359763159","0.110133662270893","0.996676715128972","1.53811142492431","2.29946155284262","7.58146863585647","0.905529029972774","1.29922853768331","0.713708774332069","1.74546915119653","0.196756323435163","3.67360912154308","152","78.3505154639175"],"wdi_fdiin":["-2.86644631103304","97.4077152130218","-1303.10826691135","1.15562898844264","2.81683452885051","5.1036226068351","32.7522138541297","2.98102268459693","3.94799361839246","-33.9820476797687","-13.1385695265508","0.180584322510606","172.406557886069","181","93.298969072165"],"wdi_taxrev":["16.2108572691318","6.85496415306667","5.8864372548248e-05","11.606494475109","15.8771617065457","21.2506256455826","44.3468321505376","6.91264493853585","9.64413117047363","0.422862532145026","0.470429773455359","0.204134486653284","1.23302111721088","141","72.680412371134"],"wdi_trade":["89.9733953869321","57.0163174557007","24.3450393271265","56.0846247448035","78.7627100301698","103.372643459918","393.14119815602","34.4131801794054","47.2880187151149","0.633701965014225","2.50635359043855","0.186778420583329","8.487029135293","169","87.1134020618557"],"wdi_wip":["24.5112921491491","12.9439793023131","0","15.0301204819277","23.4848484848484","33.728904726686","61.25","13.6157142857143","18.6417015469935","0.528082290543891","0.239804194040012","0.175416387314151","-0.596269338050695","192","98.9690721649485"]},"columns":[{"id":".rownames","name":"","type":"character","sortable":false,"filterable":false,"rowHeader":true},{"id":"atop_ally","name":"atop_ally","type":"character"},{"id":"bci_bci","name":"bci_bci","type":"character"},{"id":"bmr_dem","name":"bmr_dem","type":"character"},{"id":"cbie_index","name":"cbie_index","type":"character"},{"id":"gol_est","name":"gol_est","type":"character"},{"id":"lis_gini","name":"lis_gini","type":"character"},{"id":"mad_gdppc","name":"mad_gdppc","type":"character"},{"id":"mad_gdppc1900","name":"mad_gdppc1900","type":"character"},{"id":"top_top1_income_share","name":"top_top1_income_share","type":"character"},{"id":"undp_hdi","name":"undp_hdi","type":"character"},{"id":"wbgi_rle","name":"wbgi_rle","type":"character"},{"id":"wdi_acel","name":"wdi_acel","type":"character"},{"id":"wdi_area","name":"wdi_area","type":"character"},{"id":"wdi_expedu","name":"wdi_expedu","type":"character"},{"id":"wdi_expmil","name":"wdi_expmil","type":"character"},{"id":"wdi_fdiin","name":"wdi_fdiin","type":"character"},{"id":"wdi_taxrev","name":"wdi_taxrev","type":"character"},{"id":"wdi_trade","name":"wdi_trade","type":"character"},{"id":"wdi_wip","name":"wdi_wip","type":"character"}],"bordered":true,"striped":true,"dataKey":"d2a69e1fe6e98e8471c0d329f7aa8089"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Another handy package for generating summary statistics is <em>stargazer</em>. Though <em>stargazer</em> is most useful for creating and exporting regression tables (which we’ll explore further below), it can also produce a well-formatted summary statistics table that can be exported as a text file. For example, the code below uses <em>stargazer</em> to create a summary statistics table for <code>qog_copy_selection_numeric</code> (we’ll export it out of R as a text file in a later section):</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># uses stargazer package to generate summary statistics for qog_copy_selection_numeric</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(<span class="fu">as.data.frame</span>(qog_copy_selection_numeric), <span class="at">type =</span> <span class="st">"text"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================================================
Statistic              N     Mean       St. Dev.       Min          Max      
-----------------------------------------------------------------------------
undp_hdi              190    0.719        0.153       0.380        0.965     
wdi_expedu            174    4.579        2.066       0.382        14.195    
wdi_acel              192   85.840       24.466       7.700       100.000    
wdi_area              192 663,647.400 1,839,053.000   2.084    16,376,870.000
wdi_taxrev            141   16.211        6.855       0.0001       44.347    
wdi_expmil            152    1.873        1.337       0.110        7.581     
wdi_fdiin             181   -2.866       97.408     -1,303.108     32.752    
wdi_trade             169   89.973       57.016       24.345      393.141    
cbie_index            153    0.694        0.154       0.302        0.912     
wbgi_rle              193   -0.066        0.996       -2.301       2.013     
bmr_dem               193    0.606        0.490         0            1       
atop_ally             184    1.000        0.000         1            1       
gol_est               142    1.810        0.714         1            3       
mad_gdppc             162 19,024.630   20,243.310    606.859    143,468.800  
mad_gdppc1900         47   2,924.333    2,007.795    817.743     8,037.571   
bci_bci               191   44.262       19.486       -3.497       78.942    
lis_gini              35     0.333        0.061       0.236        0.485     
top_top1_income_share 193    0.159        0.045       0.060        0.274     
wdi_wip               192   24.511       12.944       0.000        61.250    
-----------------------------------------------------------------------------</code></pre>
</div>
</div>
<p>Despite the variety of options available for generating summary statistics, it is important to emphasize that if the available options do not provide exactly what you are looking for, it is possible to customize summary statistics functions to produce outputs tailored to your specific needs. For example, it could be nice to have a column in the <code>student_scores_summarystats</code> summary statistics table that provides information on the number of NA values there are for each variable. The <code>describe()</code> function does not provide this information, but that is something we can add with a little bit of extra work on our own. To get that information into <code>student_scores_summarystats</code>, we’ll first write a very simple function, <code>count_missing()</code>, to count the number of NA values in a vector:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a named function to count missing values</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>count_missing <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>(<span class="fu">is.na</span>(x))</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Next, we’ll iteratively apply the <code>count_missing</code> function to the columns of the original <code>student_scores</code> data frame, and generate a new vector that contains the number of NA values for each column; we will assign this vector to a new object named <code>missing_values_vector</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># applies "count_missing" function to the columns of "student_scores",</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and deposits the results (i.e. count of missing values in each </span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co"># column of "student_scores") to a numeric vector assigned to the object "missing_values_vector"</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>missing_values_vector <span class="ot">&lt;-</span> <span class="fu">map_dbl</span>(<span class="at">.x=</span>student_scores, <span class="at">.f=</span>count_missing)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Recall that <code>map()</code> family functions iteratively apply a function to elements of a list or vector. It might seem surprising, then, that we used a <code>map()</code> function to apply a function across the columns of a data frame, but under the hood, a data frame is a kind of list, where the elements (columns) are vectors. This is what allows us to use <code>map_dbl()</code> across the columns of <code>student_scores</code>.</p>
<p>Now, we’ll add this vector as a column to <code>student_scores_summarystats</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adds "missing_values_vector" as a column named "missing_values" to "student_scores_summarystats" summary stats table</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>student_scores_summarystats<span class="ot">&lt;-</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  student_scores_summarystats <span class="sc">%&gt;%</span> </span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">missing_values=</span>missing_values_vector)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s view the updated <code>student_scores_summarystats</code> object in the R Studio data viewer, and confirm that a new “missing_values” column that indicates the number of NA values for each variable has been added to the data frame:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(student_scores_summarystats)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-8c03caeea4cf5a85ac1e" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8c03caeea4cf5a85ac1e">{"x":{"tag":{"name":"Reactable","attribs":{"data":{".rownames":["Age","Score"],"vars":[1,2],"n":[3,4],"mean":[25.6666666666667,85.25],"sd":[4.04145188432738,5.25198375219624],"median":[25,86.5],"trimmed":[25.6666666666667,85.25],"mad":[4.4478,3.7065],"min":[22,78],"max":[30,90],"range":[8,12],"skew":[0.160468587938029,-0.43682242715828],"kurtosis":[-2.33333333333333,-1.90611793886511],"se":[2.33333333333333,2.62599187609812],"missing_values":[2,1]},"columns":[{"id":".rownames","name":"","type":"character","sortable":false,"filterable":false,"rowHeader":true},{"id":"vars","name":"vars","type":"numeric"},{"id":"n","name":"n","type":"numeric"},{"id":"mean","name":"mean","type":"numeric"},{"id":"sd","name":"sd","type":"numeric"},{"id":"median","name":"median","type":"numeric"},{"id":"trimmed","name":"trimmed","type":"numeric"},{"id":"mad","name":"mad","type":"numeric"},{"id":"min","name":"min","type":"numeric"},{"id":"max","name":"max","type":"numeric"},{"id":"range","name":"range","type":"numeric"},{"id":"skew","name":"skew","type":"numeric"},{"id":"kurtosis","name":"kurtosis","type":"numeric"},{"id":"se","name":"se","type":"numeric"},{"id":"missing_values","name":"missing_values","type":"numeric"}],"bordered":true,"striped":true,"dataKey":"90671917c5c0545d4c810ae1d5a54a54"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In case we expect to carry out this procedure for several datasets, we can wrap up this process for adding a “missing_values” column to the standard summary statistics table generated by <code>describe()</code> into a custom function that we’ll call <code>summary_stats_na</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># makes function to automate the creation of a "missing_value" column in summary statistics</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># generated. by describe()</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>summary_stats_na<span class="ot">&lt;-</span><span class="cf">function</span>(dataset_input){</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create summary stats table and assign to "summary_stats"</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>summary_stats<span class="ot">&lt;-</span><span class="fu">describe</span>(dataset_input)</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co"># create a missing values vector and adds it as a column to "summary_stats"; the result</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co"># is assigned to "summary_stats_missing_values"</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>summary_stats_missing_values<span class="ot">&lt;-</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  summary_stats <span class="sc">%&gt;%</span> </span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">missing_values=</span><span class="fu">map_dbl</span>(<span class="at">.x=</span>dataset_input, <span class="at">.f=</span>count_missing))</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(summary_stats_missing_values)</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s test out <code>summary_stats_na()</code> by using it to generate a summary statistics table with a “missing_values” column for the data in <code>qog_copy_selection_numeric</code>. We’ll assign the result to a new object named <code>qog_copy_selection_numeric_summaryNA:</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates a summary statistics table for the data in "qog_copy_selection_numeric" that includes a "missing_values" column that indicates the number of NA values for each variable by passing "qog_copy_selection_numeric" as an argument to the "summary_stats_na" function; the resulting summary statistics table is assigned to "qog_copy_selection_numeric_summaryNA" </span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>qog_copy_selection_numeric_summaryNA<span class="ot">&lt;-</span><span class="fu">summary_stats_na</span>(qog_copy_selection_numeric)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, let’s view <code>qog_copy_selection_numeric_summaryNA</code> in the data viewer and confirm the existence of the “missing_values” column:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># views "qog_copy_selection_numeric_summaryNA" in data viewer</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(qog_copy_selection_numeric_summaryNA)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-0c9084c773ffb3c2c3d3" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0c9084c773ffb3c2c3d3">{"x":{"tag":{"name":"Reactable","attribs":{"data":{".rownames":["undp_hdi","wdi_expedu","wdi_acel","wdi_area","wdi_taxrev","wdi_expmil","wdi_fdiin","wdi_trade","cbie_index","wbgi_rle","bmr_dem","atop_ally","gol_est","mad_gdppc","mad_gdppc1900","bci_bci","lis_gini","top_top1_income_share","wdi_wip"],"vars":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],"n":["190","174","192","192","141","152","181","169","153","193","193","184","142","162","47","191","35","193","192"],"mean":["0.7191","4.57875832863923","85.8401041666667","663647.3700625","16.2108572691318","1.87270164764673","-2.86644631103304","89.9733953869321","0.693532679738562","-0.0657579336787565","0.606217616580311","1","1.80985915492958","19024.6336684851","2924.3332568956","44.2621896439791","0.3328","0.158515025906736","24.5112921491491"],"sd":["0.15328168729948","2.0658593722409","24.4662264486845","1839052.88341333","6.85496415306667","1.33656359763159","97.4077152130218","57.0163174557007","0.15381130221205","0.99625272055695","0.489858285523858","0","0.713925305423545","20243.3109644466","2007.79455862149","19.4858625597985","0.0612015955193788","0.0446596286291792","12.9439793023131"],"median":["0.7375","4.31240200996399","100","120375","15.8771617065457","1.53811142492431","2.81683452885051","78.7627100301698","0.7095","-0.15831885","1","1","2","12405.7517513694","2206","46.821653","0.313","0.1604","23.4848484848484"],"trimmed":["0.725888157894737","4.39082469940185","91.2974025974026","267089.425311688","16.0777202063824","1.6742372867594","3.3609168320833","81.0891611932557","0.701752032520325","-0.0839866264516128","0.632258064516129","1","1.76315789473684","15692.8358940957","2686.57873445565","45.4760339542484","0.327206896551724","0.157958064516129","24.1943761726209"],"mad":["0.1749468","1.74631011414528","0","177401.9856","6.91264493853585","0.905529029972774","2.98102268459693","34.4131801794054","0.1860663","1.04977620531","0","0","1.4826","14471.6078877646","1656.0642","19.3690852194","0.0415128","0.04344018","13.6157142857143"],"min":["0.38","0.381919115781784","7.7","2.084","5.8864372548248e-05","0.110133662270893","-1303.10826691135","24.3450393271265","0.3015","-2.3008955","0","1","1","606.859105151281","817.743016759777","-3.496812","0.236","0.0601","0"],"max":["0.965","14.1951599121094","100","16376870","44.3468321505376","7.58146863585647","32.7522138541297","393.14119815602","0.912","2.0134761","1","1","3","143468.756460503","8037.5712","78.94162","0.485","0.274","61.25"],"range":["0.585","13.8132407963276","92.3","16376867.916","44.3467732861651","7.47133497358558","1335.86048076548","368.796158828893","0.6105","4.3143716","1","0","2","142861.897355352","7219.82818324022","82.438432","0.249","0.2139","61.25"],"skew":["-0.337616944548824","1.33615673729359","-1.65842253622204","5.45689904954331","0.470429773455362","1.74546915119653","-13.1385695265508","2.50635359043855","-0.333182353851771","0.145756643704891","-0.431419736515567","NaN","0.289722488319543","2.24733988874727","0.924532335355301","-0.521173270679645","0.907173088190825","0.0796922463771908","0.239804194040014"],"kurtosis":["-0.818051671210733","3.50867845318054","1.54942482950788","34.4960363996693","1.23302111721088","3.67360912154308","172.406557886069","8.487029135293","-0.871233261827302","-0.66798086606984","-1.82324346831907","NaN","-1.03164953818951","8.32771857936247","-0.254124905585837","-0.399712601310902","-0.0652589569259154","-0.523464096048766","-0.596269338050695"],"se":["0.0111202223712562","0.156612394840497","1.76569780327529","132722.20966158","0.577292123034722","0.108409623119721","7.24025845171501","4.38587057351544","0.0124349067732173","0.0717118399983131","0.0352607709554824","0","0.059911280752771","1590.46471740313","292.866936222842","1.40994753104886","0.0103449577698753","0.00321467041098705","0.934151241821929"],"missing_values":["4","20","2","2","53","42","13","25","41","1","1","10","52","32","147","3","159","1","2"]},"columns":[{"id":".rownames","name":"","type":"character","sortable":false,"filterable":false,"rowHeader":true},{"id":"vars","name":"vars","type":"character"},{"id":"n","name":"n","type":"character"},{"id":"mean","name":"mean","type":"character"},{"id":"sd","name":"sd","type":"character"},{"id":"median","name":"median","type":"character"},{"id":"trimmed","name":"trimmed","type":"character"},{"id":"mad","name":"mad","type":"character"},{"id":"min","name":"min","type":"character"},{"id":"max","name":"max","type":"character"},{"id":"range","name":"range","type":"character"},{"id":"skew","name":"skew","type":"character"},{"id":"kurtosis","name":"kurtosis","type":"character"},{"id":"se","name":"se","type":"character"},{"id":"missing_values","name":"missing_values","type":"character"}],"bordered":true,"striped":true,"dataKey":"a4595db9d8f2f92ef168ff73d6da7422"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="frequency-tables-and-cross-tabulations" class="level3" data-number="5.4.3">
<h3 data-number="5.4.3" class="anchored" data-anchor-id="frequency-tables-and-cross-tabulations"><span class="header-section-number">5.4.3</span> Frequency tables and cross-tabulations</h3>
<p>Frequency tables and cross-tabulations (often referred to as “crosstabs”) are especially useful ways to quickly convey the basic structure and relevant patterns in qualitative data. A frequency table shows how often each value of a single variable occurs, while a crosstab is essentially a bivariate frequency table that shows how often different combinations of two different variables appear in a given dataset.</p>
<p>We can quickly create a frequency table using the <code>count()</code> function in <em>dplyr</em>. Below, we use <code>count()</code> to create a table that displays the number of observations associated with each value of the “region” variable:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates frequency table for the region variable</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   region                        n
   &lt;chr&gt;                     &lt;int&gt;
 1 Caribbean                    13
 2 EastAsia                      6
 3 EasternEuropePostSoviet      28
 4 LatinAmerica                 20
 5 NorthAfricaMiddleEast        20
 6 Pacific                      12
 7 SouthAsia                     8
 8 SouthEastAsia                11
 9 SubSaharanAfrica             49
10 WesternEuropeNorthAmerica    27</code></pre>
</div>
</div>
<p>Now, let’s say that we’d like to add a column to this table, based on the information about the number of observations associated with each regional category, that displays the percentage associated with each regional category (as a share of the overall dataset). We can do so by using <code>mutate()</code> to define a “percent” column; we’ll add the resulting frequency table to a new object named <code>region_frequency</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adds percentage column and assigns modified frequency</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co"># table to new object called "region_frequency"</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>region_frequency<span class="ot">&lt;-</span>qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">count</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">mutate</span>(<span class="at">percent=</span>n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s view <code>region_frequency</code> in the data viewer:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Views "region_frequency" in data viewer</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(region_frequency)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-a162de1e3f56729ebcd9" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a162de1e3f56729ebcd9">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"region":["Caribbean","EastAsia","EasternEuropePostSoviet","LatinAmerica","NorthAfricaMiddleEast","Pacific","SouthAsia","SouthEastAsia","SubSaharanAfrica","WesternEuropeNorthAmerica"],"n":[13,6,28,20,20,12,8,11,49,27],"percent":[6.70103092783505,3.09278350515464,14.4329896907216,10.3092783505155,10.3092783505155,6.18556701030928,4.12371134020619,5.67010309278351,25.2577319587629,13.9175257731959]},"columns":[{"id":"region","name":"region","type":"character"},{"id":"n","name":"n","type":"numeric"},{"id":"percent","name":"percent","type":"numeric"}],"bordered":true,"striped":true,"dataKey":"07e1eecd4b5e95a8f61a4aa679238bdb"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>We can create crosstabs by passing two variable names to <code>count()</code>. The following creates a “long” crosstab of region and democracy status (the dichotomous “bmr_dem” variable), in which the combinations of variables are displayed as separate rows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates long crosstab of region and democracy status (bmr_dem)</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co"># variables from "qog_copy_selection" data frame</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(region, bmr_dem)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 3
   region                    bmr_dem     n
   &lt;chr&gt;                       &lt;dbl&gt; &lt;int&gt;
 1 Caribbean                       1    13
 2 EastAsia                        0     2
 3 EastAsia                        1     4
 4 EasternEuropePostSoviet         0     8
 5 EasternEuropePostSoviet         1    20
 6 LatinAmerica                    0     5
 7 LatinAmerica                    1    15
 8 NorthAfricaMiddleEast           0    17
 9 NorthAfricaMiddleEast           1     3
10 Pacific                         0     2
11 Pacific                         1    10
12 SouthAsia                       0     5
13 SouthAsia                       1     3
14 SouthEastAsia                   0     8
15 SouthEastAsia                   1     3
16 SubSaharanAfrica                0    29
17 SubSaharanAfrica                1    19
18 SubSaharanAfrica               NA     1
19 WesternEuropeNorthAmerica       1    27</code></pre>
</div>
</div>
<p>If, instead, we want a “wide” crosstab in which the combinations are displayed across columns, we can pass the “long” crosstab we just created to the <code>pivot_wider()</code> function introduced in the previous session:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates wide crosstab of region and democracy status (bmr_dem)</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co"># variables from "qog_copy_selection" data frame</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(region, bmr_dem) <span class="sc">%&gt;%</span> </span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>bmr_dem,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from=</span>n,</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill=</span><span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   region                      `1`   `0`  `NA`
   &lt;chr&gt;                     &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1 Caribbean                    13     0     0
 2 EastAsia                      4     2     0
 3 EasternEuropePostSoviet      20     8     0
 4 LatinAmerica                 15     5     0
 5 NorthAfricaMiddleEast         3    17     0
 6 Pacific                      10     2     0
 7 SouthAsia                     3     5     0
 8 SouthEastAsia                 3     8     0
 9 SubSaharanAfrica             19    29     1
10 WesternEuropeNorthAmerica    27     0     0</code></pre>
</div>
</div>
<p>We might further refine the appearance of this crosstab by adding rows and columns containing information on the total number of observations associated with each value of the two variables, as well as modifying the column names so that they are more intuitive and descriptive. We can do the former using the <code>adorn_totals()</code> function from the <em>janitor</em> package, while we can modify the column names using the familiar <code>rename()</code> function. We’ll assign the result to a new object named <code>region_demo_crosstab</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates wide cross-tab of region and democracy status, with</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co"># row and column totals and modified column names and assigns the </span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co"># result to "region_demo_crosstab"</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>region_demo_crosstab<span class="ot">&lt;-</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(region, bmr_dem) <span class="sc">%&gt;%</span> </span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>bmr_dem,</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from=</span>n,</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where=</span><span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Region=</span>region,</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">Democracy =</span> <span class="st">`</span><span class="at">1</span><span class="st">`</span>,</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Non-Democracy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">0</span><span class="st">`</span>,</span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">Missing =</span> <span class="st">`</span><span class="at">NA</span><span class="st">`</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You may have noticed the backticks in some of the arguments to the <code>rename()</code> function, which may be confusing at a first glance. In general, such notation is <em>not</em> required to specify arguments within the <code>rename()</code> function (note, for example, the absence of such notation when we rename “region” to “Region”), but such backticks are required when referencing non-syntactic (i.e.&nbsp;invalid) variable names. Numeric column names, as well as “NA” and column names with symbols such as a hyphen, are considered non-syntactic, which is why the “1”, “0”, “NA”, and “Non-Democracy” are enclosed by backticks. If non-syntactic variable names were not flagged with backticks, R would not know what exactly you were referring to. For example, if we wrote <code>Democracy=1</code>, R would read that as “rename the value 1 to ‘Democracy’” which makes no sense; writing <code>Democracy=`1`</code>, ensures that R correctly interprets it as “rename the variable named 1 to ‘Democracy’”, which is what we want.</p>
<p>Let’s go ahead and view <code>region_demo_crosstab</code> in the data viewer:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># views "region_demo_crosstab" in crosstab</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(region_demo_crosstab)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-3a69cf5176589565b8cf" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3a69cf5176589565b8cf">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Region":["Caribbean","EastAsia","EasternEuropePostSoviet","LatinAmerica","NorthAfricaMiddleEast","Pacific","SouthAsia","SouthEastAsia","SubSaharanAfrica","WesternEuropeNorthAmerica","Total"],"Democracy":[13,4,20,15,3,10,3,3,19,27,117],"Non-Democracy":[0,2,8,5,17,2,5,8,29,0,76],"Missing":[0,0,0,0,0,0,0,0,1,0,1],"Total":[13,6,28,20,20,12,8,11,49,27,194]},"columns":[{"id":"Region","name":"Region","type":"character"},{"id":"Democracy","name":"Democracy","type":"numeric"},{"id":"Non-Democracy","name":"Non-Democracy","type":"numeric"},{"id":"Missing","name":"Missing","type":"numeric"},{"id":"Total","name":"Total","type":"numeric"}],"bordered":true,"striped":true,"dataKey":"6c5c1288a302abb96145ebeb50aa20d4"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>If we wanted to create wide crosstab in which the regions are arrayed across columns (rather than rows), we can modify the argument to <code>pivot_wider()</code>; we’ll assign the crosstab structured in this way to a new object named <code>demo_region_crosstab</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates wide cross-tab of democracy status and region (with regional # categories spread across columns), with row and column totals and modified column names and assigns the result to "demo_region_crosstab"</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>demo_region_crosstab<span class="ot">&lt;-</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(bmr_dem, region) <span class="sc">%&gt;%</span> </span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>region,</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">values_from=</span>n,</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">values_fill=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>(<span class="at">where=</span><span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Democracy=</span>bmr_dem)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># views "demo_region_crosstab" in Viewer</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(demo_region_crosstab)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-b1bd12c5d40ca4d446d7" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b1bd12c5d40ca4d446d7">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Democracy":["0","1",null,"Total"],"EastAsia":[2,4,0,6],"EasternEuropePostSoviet":[8,20,0,28],"LatinAmerica":[5,15,0,20],"NorthAfricaMiddleEast":[17,3,0,20],"Pacific":[2,10,0,12],"SouthAsia":[5,3,0,8],"SouthEastAsia":[8,3,0,11],"SubSaharanAfrica":[29,19,1,49],"Caribbean":[0,13,0,13],"WesternEuropeNorthAmerica":[0,27,0,27],"Total":[76,117,1,194]},"columns":[{"id":"Democracy","name":"Democracy","type":"character"},{"id":"EastAsia","name":"EastAsia","type":"numeric"},{"id":"EasternEuropePostSoviet","name":"EasternEuropePostSoviet","type":"numeric"},{"id":"LatinAmerica","name":"LatinAmerica","type":"numeric"},{"id":"NorthAfricaMiddleEast","name":"NorthAfricaMiddleEast","type":"numeric"},{"id":"Pacific","name":"Pacific","type":"numeric"},{"id":"SouthAsia","name":"SouthAsia","type":"numeric"},{"id":"SouthEastAsia","name":"SouthEastAsia","type":"numeric"},{"id":"SubSaharanAfrica","name":"SubSaharanAfrica","type":"numeric"},{"id":"Caribbean","name":"Caribbean","type":"numeric"},{"id":"WesternEuropeNorthAmerica","name":"WesternEuropeNorthAmerica","type":"numeric"},{"id":"Total","name":"Total","type":"numeric"}],"bordered":true,"striped":true,"dataKey":"3c368d50735ef210dba36c92a88bd9e6"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Another handy function for making frequency tables and crosstabs is the <code>tabyl()</code> function from the <em>janitor</em> package. If we want to make a frequency table, we can pass a data frame and variable of interest to <code>tabyl()</code> as arguments. For example, the following makes a frequency table for the “region” variable:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># makes frequency table of region variable using tabyl()</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(qog_copy_selection, region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    region  n    percent
                 Caribbean 13 0.06701031
                  EastAsia  6 0.03092784
   EasternEuropePostSoviet 28 0.14432990
              LatinAmerica 20 0.10309278
     NorthAfricaMiddleEast 20 0.10309278
                   Pacific 12 0.06185567
                 SouthAsia  8 0.04123711
             SouthEastAsia 11 0.05670103
          SubSaharanAfrica 49 0.25257732
 WesternEuropeNorthAmerica 27 0.13917526</code></pre>
</div>
</div>
<p>Note that the frequency table generated by <code>tabyl()</code> automatically includes a column that includes the percentage of observations associated with each category.</p>
<p>To create a wide crosstab using <code>tabyl()</code>, we can supply the names of the relevant data frame, followed by the names of the variables of interest, as arguments to the function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># makes crosstab of region and democracy status using tabyl(); adds </span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co"># row and column totals using "adorn_totals" function</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(qog_copy_selection, region, bmr_dem) <span class="sc">%&gt;%</span> </span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where=</span><span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    region  0   1 NA_ Total
                 Caribbean  0  13   0    13
                  EastAsia  2   4   0     6
   EasternEuropePostSoviet  8  20   0    28
              LatinAmerica  5  15   0    20
     NorthAfricaMiddleEast 17   3   0    20
                   Pacific  2  10   0    12
                 SouthAsia  5   3   0     8
             SouthEastAsia  8   3   0    11
          SubSaharanAfrica 29  19   1    49
 WesternEuropeNorthAmerica  0  27   0    27
                     Total 76 117   1   194</code></pre>
</div>
</div>
<p>Within <code>tabyl()</code> the first variable argument specifies the variable that will form the crosstab’s rows, while the second specifies the variable that will form its columns; so, if we wanted to create a crosstab in which the regions are spread across columns (as in <code>demo_region_crosstab</code>, we could simply reverse the order of “region” and “bmr_dem” in the code above.</p>
</section>
<section id="group-level-summary-statistics" class="level3" data-number="5.4.4">
<h3 data-number="5.4.4" class="anchored" data-anchor-id="group-level-summary-statistics"><span class="header-section-number">5.4.4</span> Group-level Summary Statistics</h3>
<p>In many cases, it is useful to generate summary statistics for subgroups in a dataset, in addition to summary statistics for the dataset as a whole (which we discussed above). One way to generate group-level summary statistics is to use the <code>describeBy()</code> function (from the <em>psych</em> package), where the first argument is the data frame we would like to generate group-level summary statistics for, and the second argument is the name of the column that contains the relevant groups for which we want disaggregated summary statistics. Below, we use <code>describeBy()</code> to generate summary statistics for each of the different regional categories that comprise the “region” variable (referenced using dollar sign notation) within <code>qog_copy_selection</code>. The output of the <code>describeBy()</code> function is a list in which the various elements are summary statistics tables for each group; we’ll assign this output list to a new object named <code>summary_stats_by_region</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates summary statistics for each regional grouping, </span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and puts results in list object named "summary_stats_by_region"</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>summary_stats_by_region<span class="ot">&lt;-</span><span class="fu">describeBy</span>(qog_copy_selection, qog_copy_selection<span class="sc">$</span>region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You may notice that the function throws a warning (along the lines of “no missing arguments…”), which is driven by the fact that for some groups, there is no valid data for certain variables, which makes it impossible to compute the desired statistic. In this case, this warning can be safely ignored.</p>
<p>The <code>summary_stats_by_region</code> list object contains summary statistics for each regional grouping, which we can access by name using double bracket notation. For example, the following extracts the summary statistics table for the Pacific region observations:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing continent-level summary statistics for </span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The Pacific from the "summary_stats_by_region" list</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>summary_stats_by_region[[<span class="st">"Pacific"</span>]]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>           vars  n   mean    sd median trimmed   mad   min   max  range  skew
cname_qog     1 12 133.92 38.69 134.00  135.90 34.84 59.00 189.0 130.00 -0.26
cname         2 12 134.42 38.94 134.00  136.50 37.06 59.00 189.0 130.00 -0.28
ccodealp      3 12 134.83 46.29 139.50  137.00 54.11 58.00 190.0 132.00 -0.41
undp_hdi      4 12   0.67  0.07   0.67    0.67  0.08  0.56   0.8   0.24  0.06
wdi_expedu    5 12   7.50  3.83   6.88    7.45  3.68  1.35  14.2  12.85  0.25
wdi_acel      6 12  86.12 22.95  95.55   91.26  6.60 20.90 100.0  79.10 -1.84
           kurtosis    se
cname_qog     -1.00 11.17
cname         -1.03 11.24
ccodealp      -1.30 13.36
undp_hdi      -1.20  0.02
wdi_expedu    -1.19  1.11
wdi_acel       2.52  6.63</code></pre>
</div>
</div>
<p>Recall that we can extract an element from a list and assign it to a separate object. For example, the following extracts the summary statistics for observations from Western Europe and North America (“WesternEuropeNorthAmerica”) and assigns it to a new object named <code>we_na_summary</code>; after creating that object, we’ll view the corresponding summary statistics table in the data viewer.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracts group level summary statistics table for "WesternEuropeNorthAmerica" from "summary_stats_by_region" list and assigns it to a new object named "we_na_summary"</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>we_na_summary<span class="ot">&lt;-</span>summary_stats_by_region[[<span class="st">"WesternEuropeNorthAmerica"</span>]]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># views "we_na_summary" in data viewer</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(we_na_summary)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-e8d3f15a0ecf381e2b7f" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e8d3f15a0ecf381e2b7f">{"x":{"tag":{"name":"Reactable","attribs":{"data":{".rownames":["cname_qog","cname","ccodealp","undp_hdi","wdi_expedu","wdi_acel","wdi_area","wdi_taxrev","wdi_expmil","wdi_fdiin","wdi_trade","cbie_index","ht_region","wbgi_rle","bmr_dem","atop_ally","gol_est","mad_gdppc","mad_gdppc1900","bci_bci","lis_gini","top_top1_income_share","wdi_wip","region"],"vars":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],"n":["27","27","27","26","26","27","27","23","22","24","24","23","27","27","27","27","26","23","20","25","17","27","27","27"],"mean":["95.074074074074","95.3333333333333","81.6666666666667","0.924269230769231","5.14155022456096","100","1093372.97251852","21.0248968568649","1.48056408284329","-49.8237733487013","123.602813050276","0.776347826086957","5","1.45674512740741","1","1","1.96153846153846","44863.0592398807","4581.51066440607","13.149061","0.299294117647059","0.116140740740741","36.646735761731","10"],"sd":["55.2984392086918","55.5012127379629","51.0904175871637","0.0313669350652023","1.55397581012289","0","2697121.05766737","6.355464410608","0.859365292350552","267.109553699577","98.8715369779279","0.177744226014301","0","0.446919329495899","0","0","0.598716576070463","13310.2082524117","1875.78947474805","12.9997902628152","0.0275856953552977","0.0287286677950154","8.80913954158051","0"],"median":["100","100","79","0.935","5.39654994010925","100","100830","22.2891257982306","1.32550634595419","2.90098986683731","86.9361547460541","0.8955","5","1.6385597","1","1","2","42184.6961214896","4617","10.05678","0.29","0.1093","39.3333333333333","10"],"trimmed":["94.9130434782609","95.2173913043478","80.1739130434783","0.927","5.17670609734275","100","503690.790173913","21.0419983814763","1.36267265342738","3.3061421717436","108.295014806674","0.799736842105263","5","1.51518306130435","1","1","1.95454545454545","43792.0936680006","4496.97763050759","12.0407987142857","0.297466666666667","0.114134782608696","37.2859412518896","10"],"mad":["59.304","59.304","54.8562","0.0207563999999999","1.1912096221447","0","149401.602","5.37668362538357","0.58632160515943","1.78381059883848","36.9553236249261","0.0244629000000001","0","0.21579495042","0","0","0","10487.991774362","2333.6124","10.7533141086","0.0177912","0.01897728","8.8956","0"],"min":["4","4","4","0.853","1.41878998279572","100","2.084","10.0936772612024","0.251475874908046","-1303.10826691135","25.2534846631337","0.4165","5","0.24034803","1","1","1","23732.201072604","1972","-3.496812","0.255","0.0693","13.4328358208955","10"],"max":["186","186","184","0.965","8.21780967712402","100","9147420","35.1882997859342","3.8631706100809","29.3542717520448","393.14119815602","0.912","5","2.0134761","1","1","3","86334.5932512676","8037.5712","43.618991","0.371","0.1988","49.1666666666667","10"],"range":["182","182","180","0.112","6.7990196943283","0","9147417.916","25.0946225247319","3.61169473517285","1332.4625386634","367.887713492886","0.4955","0","1.77312807","0","0","2","62602.3921786636","6065.5712","47.115803","0.116","0.1295","35.7338308457712","0"],"skew":["-0.0357022690478671","-0.0322158052280329","0.207494733620136","-0.921553653333836","-0.310756394580179","NaN","2.34875696948979","-0.0878205620175292","1.23484759287047","-4.29509365514136","1.49597629411955","-0.9554063945104","NaN","-1.34625907169014","NaN","NaN","0.00636249349355179","1.13208276502303","0.237283836549696","0.814023909644575","0.874290759637217","1.01370482347482","-0.70582948655699","NaN"],"kurtosis":["-1.17621478351106","-1.18576786318304","-1.09136584485109","-0.139673446103673","-0.146924665474169","NaN","3.74132670935079","-0.716415103038218","1.37834772035272","17.196327482176","1.0538099175569","-0.628053168273342","NaN","1.07482587826035","NaN","NaN","-0.328274544485296","1.82071353179501","-1.25431872783346","-0.426344584419686","0.457068419086011","0.835321311379423","-0.0946143699071045","NaN"],"se":["10.6421895876348","10.6812133715379","9.83235544898646","0.00615156207611785","0.304759729979529","0","519061.189560422","1.32520593763852","0.183217295940286","54.5235093322089","20.1820679733868","0.0370622331394002","0","0.0860096650635015","0","0","0.117417980942106","2775.37027472926","419.439277701527","2.59995805256305","0.006690513865059","0.00552883469497049","1.69531969522016","0"]},"columns":[{"id":".rownames","name":"","type":"character","sortable":false,"filterable":false,"rowHeader":true},{"id":"vars","name":"vars","type":"character"},{"id":"n","name":"n","type":"character"},{"id":"mean","name":"mean","type":"character"},{"id":"sd","name":"sd","type":"character"},{"id":"median","name":"median","type":"character"},{"id":"trimmed","name":"trimmed","type":"character"},{"id":"mad","name":"mad","type":"character"},{"id":"min","name":"min","type":"character"},{"id":"max","name":"max","type":"character"},{"id":"range","name":"range","type":"character"},{"id":"skew","name":"skew","type":"character"},{"id":"kurtosis","name":"kurtosis","type":"character"},{"id":"se","name":"se","type":"character"}],"bordered":true,"striped":true,"dataKey":"4327b59d1c4141324a71f8eceb49ba57"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In addition to calculating separate summary statistics for different subgroups in a dataset, it could also be useful calculate summary statistics at different levels of aggregation. For example, the <code>qog_copy_selection</code> data frame is a country-level dataset (i.e.&nbsp;each row in the dataset represents a country), and the summary statistics we calculated above were calculated using countries as the unit of analysis. However, if we are interested in analyzing phenomena at the regional level, we can calculated summary statistics for selected variables using regions as the unit of analysis. To do this, we can use the handy <code>group_by()</code> and <code>summarise()</code> functions of <em>dplyr</em>. The <code>group_by()</code> function specifies a grouping variable that defines the unit of analysis, while <code>summarise()</code> defines the relevant summary statistics to compute for each group.</p>
<p>For example, the following code generates a table presenting the mean, standard deviation, and number of observations for the “wdi_trade” and “wdi_fdiin” variables, aggregated by region. The resulting table is assigned to an object named <code>trade_fdi_by_region</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a table that displays summary statistics for "wdi_trade" # and "wdi_fdiin" at the regional level and assign to object named # "trade_fdi_by_region"</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>trade_fdi_by_region<span class="ot">&lt;-</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">meanTrade=</span><span class="fu">mean</span>(wdi_trade, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">sdTrade=</span><span class="fu">sd</span>(wdi_trade, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">meanFDI=</span><span class="fu">mean</span>(wdi_fdiin, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">sdFDI=</span><span class="fu">sd</span>(wdi_fdiin, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span><span class="fu">n</span>())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s go ahead and view <code>trade_fdi_by_region</code> in the data viewer:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># views "trade_fdi_by_region" in data viewer</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(trade_fdi_by_region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-ff1f0b971adb4d0ced6d" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ff1f0b971adb4d0ced6d">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"region":["Caribbean","EastAsia","EasternEuropePostSoviet","LatinAmerica","NorthAfricaMiddleEast","Pacific","SouthAsia","SouthEastAsia","SubSaharanAfrica","WesternEuropeNorthAmerica"],"meanTrade":[90.0269084127873,68.3427523793176,107.255465984415,63.8768615064048,87.8947381059575,81.7035572698104,44.779351344075,138.604441379787,73.1634443895657,123.602813050276],"sdTrade":[15.4334971181216,39.4839987567678,38.4992196164432,21.3149049948765,40.6172064231025,19.3976765167679,17.0388331177927,83.911599661125,43.0261272613957,98.8715369779279],"meanFDI":[7.64649533649329,4.51434978138859,5.16955761969129,3.11516019937062,3.18106601303661,3.22751469110295,2.03325652761232,5.52305626340867,4.1070950077117,-49.8237733487013],"sdFDI":[9.31786504274885,6.48871330055534,4.89798026346681,2.09593594550314,6.15912630824432,4.70848737815947,4.1396800835558,10.384417673484,6.01309078115487,267.109553699577],"n":[13,6,28,20,20,12,8,11,49,27]},"columns":[{"id":"region","name":"region","type":"character"},{"id":"meanTrade","name":"meanTrade","type":"numeric"},{"id":"sdTrade","name":"sdTrade","type":"numeric"},{"id":"meanFDI","name":"meanFDI","type":"numeric"},{"id":"sdFDI","name":"sdFDI","type":"numeric"},{"id":"n","name":"n","type":"numeric"}],"bordered":true,"striped":true,"dataKey":"dfa03eb4c4b0c0e702b1f62c3a4e8c25"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>As we can see, <code>trade_fdi_by_region</code> summarizes variation in trade and foreign direct investment (FDI) across world regions. Each row now corresponds to a region, and the columns display the regional mean and standard deviation of the “wdi_trade” and “wdi_fdiin” variables, along with the number of countries (“n”) within that region.</p>
<p>It’s worth noting that we can explicitly control the number of decimal places to which values in a data frame are rounded by embedding the functions that define the summary statistics within the <code>round()</code> function. For example, the following code modifies <code>trade_fdi_by_region</code> by rounding the values in the output table to two digits:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># round to two decimal places</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>trade_fdi_by_region<span class="ot">&lt;-</span>qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">meanTrade=</span><span class="fu">round</span>(<span class="fu">mean</span>(wdi_trade, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">sdTrade=</span><span class="fu">round</span>(<span class="fu">sd</span>(wdi_trade, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">meanFDI=</span><span class="fu">round</span>(<span class="fu">mean</span>(wdi_fdiin, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="dv">2</span>), </span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">sdFDI=</span><span class="fu">round</span>(<span class="fu">sd</span>(wdi_fdiin, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">n=</span><span class="fu">n</span>())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s view the modified version of <code>trade_fdi_by_region</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># views "trade_fdi_by_region" in data viewer</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(trade_fdi_by_region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-b8f60a2603696949606a" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b8f60a2603696949606a">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"region":["Caribbean","EastAsia","EasternEuropePostSoviet","LatinAmerica","NorthAfricaMiddleEast","Pacific","SouthAsia","SouthEastAsia","SubSaharanAfrica","WesternEuropeNorthAmerica"],"meanTrade":[90.03,68.34,107.26,63.88,87.89,81.7,44.78,138.6,73.16,123.6],"sdTrade":[15.43,39.48,38.5,21.31,40.62,19.4,17.04,83.91,43.03,98.87],"meanFDI":[7.65,4.51,5.17,3.12,3.18,3.23,2.03,5.52,4.11,-49.82],"sdFDI":[9.32,6.49,4.9,2.1,6.16,4.71,4.14,10.38,6.01,267.11],"n":[13,6,28,20,20,12,8,11,49,27]},"columns":[{"id":"region","name":"region","type":"character"},{"id":"meanTrade","name":"meanTrade","type":"numeric"},{"id":"sdTrade","name":"sdTrade","type":"numeric"},{"id":"meanFDI","name":"meanFDI","type":"numeric"},{"id":"sdFDI","name":"sdFDI","type":"numeric"},{"id":"n","name":"n","type":"numeric"}],"bordered":true,"striped":true,"dataKey":"283a6b5d64a320c137f1f88c540ceeb7"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="exploratory-visualization" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="exploratory-visualization"><span class="header-section-number">5.5</span> Exploratory Visualization</h2>
<p>In this section, we’ll discuss how to use <em>ggplot2</em> to visualize our data. <em>ggplot2</em> is the <em>tidyverse</em>’s visualization package, and is rooted in a framework known as the “grammar of graphics” (the “gg” in <em>ggplot2</em> stands for “grammar of graphics”).</p>
<p>The central idea behind the grammar of graphics is to create plots by systematically layering different visualization elements on top of each other. The foundational layer is always the data used to create the plot. In relation to this foundational data layer, we define a visualization’s aesthetic mappings (often referred to as “aes”), which specifies how to connect the underlying data to the visual properties of the visualization (such as the x and y axes, position, color, size, and shape). In other words, aesthetic mappings tell <em>ggplot2</em> how to represent the underlying data visually.</p>
<p>Next, on top of the data layer, we add <em>geometries</em> (or “geoms”) which determine the visual symbols used to represent the data, such as points, lines, or bars. Other layers, such as <em>themes</em>, can further refine the plot, by specifying aspects of its appearance not directly tied to the data (like background color, text size, or font) but which affect readability and style.</p>
<p>The syntax of <em>ggplot2</em> flows from the logic of layering that is at the heart of the grammar of graphics: each component of a plot (i.e.&nbsp;data, aesthetics, geometries, and so on) is added to the plot by chaining together relevant functions with a “+” symbol. Complex visualizations are thereby constructed piece by piece, one layer at a time.</p>
<p><em>ggplot2</em> is a remarkable package, and builds on R’s longstanding strengths as a data visualization platform. Though it’s possible to make beautiful and sophisticated publication-quality visualizations using <em>ggplot2</em>, our focus here will be on getting acquainted with the basic syntax of the package, and making some quick exploratory visualizations based on data from the <code>qog_copy_selection</code> dataset. In this regard, this section follows naturally from the previous section’s discussion of descriptive and summary statistics, since the creation of quick visualizations is another important tool of exploratory data analysis.</p>
<section id="bar-charts" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="bar-charts"><span class="header-section-number">5.5.1</span> Bar Charts</h3>
<p>We’ll start our exploration of <em>ggplot2</em>, and get a sense of how the grammar of graphics works in practice, by making some simple bar charts that display the “wdi_trade” data from <code>qog_copy_selection</code>. A bar chart with all of the country observations in the dataset would be too crowded and cluttered, so we’ll focus on plotting the observations from South Asia. Our first step will be to extract South Asian observations with non-“NA” values for “wdi_trade”:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filters South Asia observations and drops countries with "na" values for "wdi_trade"</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>qog_south_asia<span class="ot">&lt;-</span>qog_copy_selection <span class="sc">%&gt;%</span> </span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">filter</span>(region<span class="sc">==</span><span class="st">"SouthAsia"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">drop_na</span>(wdi_trade)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now that we have the data object with the data we want to plot, let’s go ahead and create our bar chart that compares trade openness (“wdi_trade”) across countries in South Asia, and assign the plot to a new object named <code>trade_southasia</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates a bar chart of the "wdi_trade" variable (central government expenditure as a share of GDP) </span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for the South Asia observations and assigns the plot to an object named "trade_southasia"</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>trade_southasia<span class="ot">&lt;-</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data=</span>qog_south_asia)<span class="sc">+</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span>cname, <span class="at">y=</span>wdi_trade))<span class="sc">+</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title=</span><span class="st">"Trade as a Percentage of GDP in South Asia</span><span class="sc">\n</span><span class="st">(2017-2020)"</span>,</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: Quality of Government Institute"</span>, </span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="st">"Country"</span>, </span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="st">"Trade as a Percentage of GDP"</span>)<span class="sc">+</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print <code>trade_southasia</code> and see what the plot looks like:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "trade_southasia"</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>trade_southasia</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-83-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Let’s unpack the code we used to create <code>trade_southasia</code>:</p>
<ul>
<li><p>The expression <code>ggplot(qog_south_asia)</code> specifies that we want to initialize <em>ggplot2</em>, and establishes <code>qog_south_asia</code> as the data object that contains the data we want to plot. In other words, in terms of the grammar of graphics, it sets <code>qog_south_asia</code> as the plot’s foundational data layer.</p></li>
<li><p><code>geom_col()</code> is a geometry function, which we use use because we want to represent the underlying data with data with a bar/column chart. Within <code>geom_col()</code>, we specify the x and y axes of the plot within <code>aes()</code>, the function used to set the aesthetic mappings that describe how variables in the data are translated into visual properties of the chosen geom.</p></li>
<li><p>Within the <code>labs()</code> function, we set labels for the x and y axes. We also indicate our desired title and caption.</p></li>
<li><p>We can use the <code>theme()</code> function to control aspects of the plot’s appearance that are not directly related to the data itself. Here, our arguments within <code>theme()</code> specify the need for a center-justified position for the plot title, and an orientation for the x-axis labels.</p></li>
</ul>
<p>This is a nice start, but it may look a slightly cleaner if we arrayed the chart in ascending order with respect to the “wdi_trade” variable. We can rearrange the visual representation of the data in this way by by using the <code>reorder()</code> function within our aesthetic mapping to specify that we want observations on the x-axis to be arrayed in ascending order with respect to “wdi_trade”. Below, we create a bar chart with the “wdi_trade” values arrayed in ascending order and assign the modified plot to a new object named <code>trade_southasia_ascending</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates a bar chart of the "wdi_trade" variable</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for the South Asia observations; countries are on the </span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co"># x axis and arrayed in ascending order with respect to the </span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co"># trade variable, which is on the y-axis; assigns the plot to an </span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co"># object named "trade_southasia_ascending"</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>trade_southasia_ascending<span class="ot">&lt;-</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(qog_south_asia)<span class="sc">+</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(cname, wdi_trade), <span class="at">y=</span>wdi_trade))<span class="sc">+</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title=</span><span class="st">"Trade as a Percentage of GDP in South Asia</span><span class="sc">\n</span><span class="st">(2017-2020)"</span>,</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: Quality of Government Institute"</span>, </span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="st">"Country"</span>, </span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="st">"Trade as a Percentage of GDP"</span>)<span class="sc">+</span></span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print <code>trade_southasia_ascending</code> and confirm that the data is now plotted in ascending order:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "trade_southasia_ascending"</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>trade_southasia_ascending</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If, instead, we want to array the data in descending order, we can simply add a minus sign in front of “wdi_trade”. Below, we create a bar chart in which the countries are arrayed in descending order with respect to “wdi_trade”, and assign the result to a new object named <code>trade_southasia_descending</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates a bar chart of the "wdi_trade" variable </span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for the South Asia observations; countries are on the x axis and arrayed in descending order with respect to the </span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="co"># trade variable, which is on the y-axis; assigns the plot to an object named "trade_southasia_descending"</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>trade_southasia_descending<span class="ot">&lt;-</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(qog_south_asia)<span class="sc">+</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(cname, <span class="sc">-</span>wdi_trade), <span class="at">y=</span>wdi_trade))<span class="sc">+</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title=</span><span class="st">"Trade as a Percentage of GDP in South Asia</span><span class="sc">\n</span><span class="st">(2017-2020)"</span>,</span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: Quality of Government Institute"</span>, </span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="st">"Country"</span>, </span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="st">"Trade as a Percentage of GDP"</span>)<span class="sc">+</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s now print <code>trade_southasia_descending</code> and confirm that the data is now in descending order:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "trade_southasia_descending"</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>trade_southasia_descending</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can also flip a bar chart on its axis to create a “sideways” bar chart by using the<code>coord_flip()</code> function. The code below takes the <code>trade_southasia_ascending</code> we created above, inverts the axes using <code>coord_flip()</code>, and assigns the result to a new object named, <code>wdi_trade_inverted</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates inverted bar chart of "wdi_trade" for South Asian Countries</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and assigns to "wdi_trade_inverted"</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>wdi_trade_inverted<span class="ot">&lt;-</span>trade_southasia_ascending<span class="sc">+</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">coord_flip</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s now print <code>wdi_trade_inverted</code> and view the reoriented bar chart:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "wdi_trade_inverted"</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>wdi_trade_inverted</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>When we use <code>coord_flip()</code> in <em>ggplot2</em> it flips the axes (i.e.&nbsp;the x-axis becomes the y-axis and vice versa). As a result, the (now) x-axis labels in <code>wdi_trade_inverted</code> are difficult to read, and need to be adjusted. We can do so by modifying the “axis.text.x” argument within the <code>theme()</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixes x axis labels</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>wdi_trade_inverted<span class="ot">&lt;-</span>wdi_trade_inverted<span class="sc">+</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">0</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s see what the plot looks like now:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints updated "wdi_trade_inverted"</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>wdi_trade_inverted</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-91-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scatterplots" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="scatterplots"><span class="header-section-number">5.5.2</span> Scatterplots</h3>
<p>Now, let’s see how we can use similar principles and syntax to build scatterplots using <em>ggplot2</em>.</p>
<p>Below, we create a scatterplot of the <code>wdi_taxrev</code> and <code>wdi_trade</code> variables; we put the former on the x-axis and the latter variable on the y-axis. Instead of using <code>geom_col()</code> to create a bar chart, we use <code>geom_point()</code>; the remaining elements are similar to the bar charts we created above. We’ll assign the scatterplot to a new object named <code>tax_trade_scatter</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates scatterplot with "wdi_taxrev" variable on x-axis and "wdi_trade" </span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="co"># variable on y-axis and assigns to object named "tax_trade_scatter"</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>tax_trade_scatter<span class="ot">&lt;-</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(qog_copy_selection)<span class="sc">+</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>wdi_taxrev, <span class="at">y=</span>wdi_trade))<span class="sc">+</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Relationship Between Trade and Tax Revenue as % of GDP</span><span class="sc">\n</span><span class="st">(2017-2021)"</span>,</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"Tax Revenue as a % of GDP"</span>, </span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Trade as a % of GDP"</span>,</span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Source: Quality of Government Institute"</span>)<span class="sc">+</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>, <span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print <code>tax_trade_scatter</code> and see what the plot looks like:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "tax_trade_scatter"</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>tax_trade_scatter</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 59 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Sometimes, we may wish to distinguish between different groups in a scatterplot. One way to do that is to assign different colors to different groups of interest. For example, if we wanted to distinguish continents in the scatterplot, we could specify <code>color=region</code> in the aesthetic mapping. The code below does so, and assigns the result to a new object named <code>tax_trade_scatter_color</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># uses color to distinguish between observations from different regions in the scatterplot </span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>tax_trade_scatter_color<span class="ot">&lt;-</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(qog_copy_selection)<span class="sc">+</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>wdi_taxrev, <span class="at">y=</span>wdi_trade, <span class="at">color=</span>region))<span class="sc">+</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Relationship Between Trade and Tax Revenue as % of GDP</span><span class="sc">\n</span><span class="st">(2017-2021)"</span>,</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"Tax Revenue as a % of GDP"</span>, </span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Trade as a % of GDP"</span>,</span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Source: Quality of Government Institute"</span>)<span class="sc">+</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>, <span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print <code>tax_trade_scatter_color</code>, and confirm that observations from different regions have been assigned different colors:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "tax_trade_scatter_color"</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>tax_trade_scatter_color</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 59 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>An alternative way of parsing categories is to use facets, which create separate visualizations for each of the different categories in a dataset. Below, for example, we use facets to create separate scatterplots for each region; we take the <code>tax_revenue_scatter</code> plot that we created above, and then call the <code>facet_wrap()</code> function to facet by region, and distribute the resulting plots across two different rows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># uses facets to make panel of different scatter plot ofs "wdi_trade" and "wdi_taxrev" </span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for each region</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>tax_trade_scatter_facets<span class="ot">&lt;-</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a> tax_trade_scatter<span class="sc">+</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>region, <span class="at">nrow=</span><span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print the newly created scatter plot, faceted by region:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "tax_trade_scatter_facets"</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>tax_trade_scatter_facets</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 59 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-97-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Finally, it’s important to note that it’s possible to layer different geometries over each other. For example, the code below layers a line of best fit (using the <code>geom_smooth()</code> function) over the scatterplot of “wdi_taxrev” and “wdi_trade”, and assigns the resulting plot to a new object named <code>tax_trade_scatter_line</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># layers line of best fit over scatterplot; wdi_trade on y axis axis </span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and wdi_taxrev on x axis; assigns new plot to object named </span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co"># "tax_trade_scatter_line"</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>tax_trade_scatter_line<span class="ot">&lt;-</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data=</span>qog_copy_selection)<span class="sc">+</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>wdi_taxrev, <span class="at">y=</span>wdi_trade))<span class="sc">+</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>wdi_taxrev, <span class="at">y=</span>wdi_trade), <span class="at">method=</span><span class="st">"lm"</span>)<span class="sc">+</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Relationship Between Trade and Tax Revenue as % of GDP</span><span class="sc">\n</span><span class="st">(2017-2021)"</span>,</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"Tax Revenue as a % of GDP"</span>, </span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Trade as a % of GDP"</span>,</span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Source: Quality of Government Institute"</span>)<span class="sc">+</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>, <span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print <code>tax_trade_scatter_line</code> and confirm that the scatterplot now has a line of best fit superimposed on the data:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "tax_trade_scatter_line"</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>tax_trade_scatter_line</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 59 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 59 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-99-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Note that the <code>geom_smooth()</code> function that we used to create the line of best fit automatically draws 95% confidence intervals around the line; this default behavior can be modified using the “se” and “level” arguments within <code>geom_smooth()</code> (for more information, see the function’s documentation).</p>
<p>In some cases, we may want to different overlay geometries on a single plot, but those geometries may be based on different datasets (unlike the <code>tax_trade_scatter_line</code> plot, in which both geometries are drawn from a single underlying dataset). The syntax of <em>ggplot2</em> can accommodate this in fairly straightforward fashion. For example, suppose we want to draw a horizontal line on <code>trade_southasia_descending</code> to indicate the average value of trade as a percentage of GDP for the countries in the <code>qog_south_asia</code> dataset; this will allow the viewer to easily tell whether a given country’s trade share of GDP is above or below the average value for all the countries in the dataset.</p>
<p>To add this horizontal dashed line, we’ll first create a separate data frame that contains the average value for “wdi_trade” within <code>qog_south_asia</code> and assign it to a new object named <code>south_asia_trade_average</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates new single-row data frame with mean value of "wdi_trade"</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="co"># variable from "south_asia_trade_average" data frame, and sets the</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="co"># name of the column containing this value to "meanSA_trade"</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>south_asia_trade_average<span class="ot">&lt;-</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>(<span class="fu">mean</span>(qog_south_asia<span class="sc">$</span>wdi_trade)) <span class="sc">%&gt;%</span> </span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">meanSA_trade=</span><span class="st">`</span><span class="at">mean(qog_south_asia$wdi_trade)</span><span class="st">`</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We’ll print <code>south_asia_trade_average</code> to confirm it looks as expected:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "south_asia_trade_average"</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>south_asia_trade_average</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  meanSA_trade
1     44.77935</code></pre>
</div>
</div>
<p>Now, let’s create our plot, in which a horizontal line based on the information in <code>south_asia_trade_average</code> is overlaid on <code>trade_southasia_descending</code> :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># makes bar chart of "wdi_trade" variable from "qog_south_asia" data</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="co"># frame arrayed in descending order, along with a dark red horizontal </span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="co"># line indicating the average "wdi_trade" value in the dataset, taken </span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="co"># from "south_asia_trade_average" </span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>qog_south_asia)<span class="sc">+</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(cname, <span class="sc">-</span>wdi_trade), <span class="at">y=</span>wdi_trade))<span class="sc">+</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">data=</span>south_asia_trade_average,</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">yintercept=</span>meanSA_trade),</span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">linetype=</span><span class="st">"dashed"</span>,</span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">color=</span><span class="st">"darkred"</span>)<span class="sc">+</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Trade as a Percentage of GDP in South Asia</span><span class="sc">\n</span><span class="st">(2017-2020)"</span>,</span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">caption =</span> <span class="st">"Source: Quality of Government Institute"</span>, </span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">x=</span><span class="st">"Country"</span>, </span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="st">"Trade as a Percentage of GDP"</span>)<span class="sc">+</span></span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-102-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The key point to note is that <code>data=qog_south_asia</code> is set in <code>ggplot()</code>, and the <code>geom_col()</code> function therefore knows to draw the columns with respect to this dataset. However, we want to create the line geometry in <code>geom_hline()</code> using the <code>south_asia_trade_average</code> data frame, so we explicitly specify this within that function. If we did not do this, <code>geom_hline()</code> would assume that the relevant reference data is <code>qog_south_asia</code>. The final result is a plot with different geometries that are created using different reference datasets.</p>
<p>As we have already mentioned, our discussion of <em>ggplot2</em> here scratches the surface of its capabilities. However, you will be able to build on this introduction to the grammar of graphics and corresponding <em>ggplot2</em> functions and syntax to make more complex exploratory and publication-quality plots that are relevant to your own work.</p>
</section>
</section>
<section id="basic-statistics-and-linear-regression" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="basic-statistics-and-linear-regression"><span class="header-section-number">5.6</span> Basic Statistics and Linear Regression</h2>
<p>In this section, we’ll review some functions that can implement some basic data analysis tasks, with a focus on linear regression (given its importance in empirical social science). Our focus is not on the methodologies themselves, or deeper questions about drawing inferences from data and the appropriateness of various models in different contexts. Our goal is simply to provide you with a tour of how to implement some standard statistical procedures in R; if you continue to use R, you will quickly come to appreciate the enormous resources if offers for statistical work. Indeed, it is in this domain that R really shines. As with the section on data visualization, our goal here is to provide a brief introduction that provides a starting point for your own exploration.</p>
<section id="correlations" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="correlations"><span class="header-section-number">5.6.1</span> Correlations</h3>
<p>Before turning to regression analysis, it can be useful to compute simple bivariate correlations between variables of interest. In the section on visualization, we created a scatterplot showing the relationship between the “wdi_trade” and “wdi_taxrev” variables from <code>qog_copy_selection</code>; now, let’s quantify this relationship by computing the correlation coefficient between these variables. We can do so by passing the variables to the <code>cor.test()</code> function; we’ll then assign the output a new object named <code>tax_trade_cc:</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># computes correlation coefficient between "wdi_taxrev" and "wdi_trade" variables and assigns </span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the result to a new object named "trade_cgexp_cc"</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>tax_trade_cc<span class="ot">&lt;-</span><span class="fu">cor.test</span>(qog_copy_selection<span class="sc">$</span>wdi_trade, qog_copy_selection<span class="sc">$</span>wdi_taxrev)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print <code>tax_trade_cc</code> to see what this output looks like:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints results of "tax_trade_cc"</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>tax_trade_cc</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  qog_copy_selection$wdi_trade and qog_copy_selection$wdi_taxrev
t = 3.2268, df = 133, p-value = 0.001576
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.1052899 0.4193207
sample estimates:
      cor 
0.2694536 </code></pre>
</div>
</div>
<p>This provides us with the relevant information that we need, but it could be helpful if the output was formatted in a more streamlined fashion. To generate a “cleaner” output, we can pass <code>tax_trade_cc</code> as an argument to the <em>broom</em> package’s <code>tidy()</code> function; we’ll assign this output to a new object named <code>tax_trade_clean_corr</code> and then print it to the console:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assigns well-formatted model output to "trade_cgexp_cc_clean"</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>tax_trade_clean_corr<span class="ot">&lt;-</span>broom<span class="sc">::</span><span class="fu">tidy</span>(tax_trade_cc)</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "tax_trade_clean_corr"</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>tax_trade_clean_corr</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 8
  estimate statistic p.value parameter conf.low conf.high method     alternative
     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      
1    0.269      3.23 0.00158       133    0.105     0.419 Pearson's… two.sided  </code></pre>
</div>
</div>
<p>If we want to quickly inspect the correlations between several variables in a dataset, we can use the the <code>cor()</code> function to generate a correlation matrix. To illustrate the use of this function, we’ll generate a correlation matrix that concisely displays the correlations between all of the continuous variables in <code>qog_copy_selection_numeric</code>. First we’ll generate a new dataset that contains only the continuous variables of interest, by dropping the dichotomous variables from <code>qog_copy_selection_numeric</code> using the <code>select()</code> function; we’ll assign this dataset to an object named <code>qog_copy_selection_numeric_continuous</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removes dummy variables from "qog_copy_selection_numeric" </span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="co"># before making correlation matrix</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>qog_copy_selection_numeric_continuous<span class="ot">&lt;-</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>  qog_copy_selection_numeric <span class="sc">%&gt;%</span> </span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(atop_ally, bmr_dem, gol_est))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, we’ll pass <code>qog_copy_selection_numeric_continuous</code> to the <code>cor()</code> function to generate our correlation and matrix, rounding to two digits.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates correlation matrix for observations in </span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="co"># "qog_copy_selection_numeric_continuous" and assigns result </span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="co"># to object named "qog_copy_selection_numeric_cor_matrix"</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>qog_copy_selection_numeric_cor_matrix<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="fu">cor</span>(qog_copy_selection_numeric_continuous, <span class="at">use=</span><span class="st">"complete.obs"</span>), <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>When we print the correlation matrix, it looks something like this:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "qog_copy_selection_numeric_cor_matrix"</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>qog_copy_selection_numeric_cor_matrix</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      undp_hdi wdi_expedu wdi_acel wdi_area wdi_taxrev
undp_hdi                  1.00       0.66     0.44    -0.32       0.46
wdi_expedu                0.66       1.00     0.25    -0.29       0.64
wdi_acel                  0.44       0.25     1.00     0.05       0.09
wdi_area                 -0.32      -0.29     0.05     1.00      -0.47
wdi_taxrev                0.46       0.64     0.09    -0.47       1.00
wdi_expmil               -0.04      -0.20     0.15     0.56      -0.17
wdi_fdiin                -0.25       0.10    -0.06     0.06       0.16
wdi_trade                 0.41       0.31     0.16    -0.57       0.35
cbie_index                0.17      -0.04    -0.07    -0.59      -0.03
wbgi_rle                  0.92       0.70     0.38    -0.40       0.47
mad_gdppc                 0.86       0.64     0.35    -0.18       0.34
mad_gdppc1900             0.77       0.47     0.32    -0.19       0.27
bci_bci                  -0.89      -0.76    -0.42     0.41      -0.51
lis_gini                 -0.81      -0.45    -0.46     0.36      -0.46
top_top1_income_share    -0.76      -0.37    -0.55     0.46      -0.33
wdi_wip                   0.44       0.48    -0.08    -0.63       0.38
                      wdi_expmil wdi_fdiin wdi_trade cbie_index wbgi_rle
undp_hdi                   -0.04     -0.25      0.41       0.17     0.92
wdi_expedu                 -0.20      0.10      0.31      -0.04     0.70
wdi_acel                    0.15     -0.06      0.16      -0.07     0.38
wdi_area                    0.56      0.06     -0.57      -0.59    -0.40
wdi_taxrev                 -0.17      0.16      0.35      -0.03     0.47
wdi_expmil                  1.00      0.15     -0.48      -0.37    -0.18
wdi_fdiin                   0.15      1.00     -0.34      -0.10    -0.21
wdi_trade                  -0.48     -0.34      1.00       0.57     0.37
cbie_index                 -0.37     -0.10      0.57       1.00     0.13
wbgi_rle                   -0.18     -0.21      0.37       0.13     1.00
mad_gdppc                   0.03     -0.30      0.26       0.06     0.81
mad_gdppc1900               0.09     -0.36      0.25      -0.11     0.76
bci_bci                     0.22      0.22     -0.40      -0.07    -0.97
lis_gini                   -0.02      0.10     -0.60      -0.34    -0.69
top_top1_income_share       0.20      0.15     -0.47      -0.32    -0.73
wdi_wip                    -0.58     -0.12      0.46       0.40     0.40
                      mad_gdppc mad_gdppc1900 bci_bci lis_gini
undp_hdi                   0.86          0.77   -0.89    -0.81
wdi_expedu                 0.64          0.47   -0.76    -0.45
wdi_acel                   0.35          0.32   -0.42    -0.46
wdi_area                  -0.18         -0.19    0.41     0.36
wdi_taxrev                 0.34          0.27   -0.51    -0.46
wdi_expmil                 0.03          0.09    0.22    -0.02
wdi_fdiin                 -0.30         -0.36    0.22     0.10
wdi_trade                  0.26          0.25   -0.40    -0.60
cbie_index                 0.06         -0.11   -0.07    -0.34
wbgi_rle                   0.81          0.76   -0.97    -0.69
mad_gdppc                  1.00          0.63   -0.78    -0.63
mad_gdppc1900              0.63          1.00   -0.73    -0.47
bci_bci                   -0.78         -0.73    1.00     0.66
lis_gini                  -0.63         -0.47    0.66     1.00
top_top1_income_share     -0.60         -0.46    0.70     0.77
wdi_wip                    0.40          0.29   -0.41    -0.33
                      top_top1_income_share wdi_wip
undp_hdi                              -0.76    0.44
wdi_expedu                            -0.37    0.48
wdi_acel                              -0.55   -0.08
wdi_area                               0.46   -0.63
wdi_taxrev                            -0.33    0.38
wdi_expmil                             0.20   -0.58
wdi_fdiin                              0.15   -0.12
wdi_trade                             -0.47    0.46
cbie_index                            -0.32    0.40
wbgi_rle                              -0.73    0.40
mad_gdppc                             -0.60    0.40
mad_gdppc1900                         -0.46    0.29
bci_bci                                0.70   -0.41
lis_gini                               0.77   -0.33
top_top1_income_share                  1.00   -0.26
wdi_wip                               -0.26    1.00</code></pre>
</div>
</div>
<p>We can also view the correlation matrix in the data viewer:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(qog_copy_selection_numeric_cor_matrix)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-36294f352b95f2136459" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-36294f352b95f2136459">{"x":{"tag":{"name":"Reactable","attribs":{"data":{".rownames":["undp_hdi","wdi_expedu","wdi_acel","wdi_area","wdi_taxrev","wdi_expmil","wdi_fdiin","wdi_trade","cbie_index","wbgi_rle","mad_gdppc","mad_gdppc1900","bci_bci","lis_gini","top_top1_income_share","wdi_wip"],"undp_hdi":[1,0.66,0.44,-0.32,0.46,-0.04,-0.25,0.41,0.17,0.92,0.86,0.77,-0.89,-0.81,-0.76,0.44],"wdi_expedu":[0.66,1,0.25,-0.29,0.64,-0.2,0.1,0.31,-0.04,0.7,0.64,0.47,-0.76,-0.45,-0.37,0.48],"wdi_acel":[0.44,0.25,1,0.05,0.09,0.15,-0.06,0.16,-0.07,0.38,0.35,0.32,-0.42,-0.46,-0.55,-0.08],"wdi_area":[-0.32,-0.29,0.05,1,-0.47,0.56,0.06,-0.57,-0.59,-0.4,-0.18,-0.19,0.41,0.36,0.46,-0.63],"wdi_taxrev":[0.46,0.64,0.09,-0.47,1,-0.17,0.16,0.35,-0.03,0.47,0.34,0.27,-0.51,-0.46,-0.33,0.38],"wdi_expmil":[-0.04,-0.2,0.15,0.56,-0.17,1,0.15,-0.48,-0.37,-0.18,0.03,0.09,0.22,-0.02,0.2,-0.58],"wdi_fdiin":[-0.25,0.1,-0.06,0.06,0.16,0.15,1,-0.34,-0.1,-0.21,-0.3,-0.36,0.22,0.1,0.15,-0.12],"wdi_trade":[0.41,0.31,0.16,-0.57,0.35,-0.48,-0.34,1,0.57,0.37,0.26,0.25,-0.4,-0.6,-0.47,0.46],"cbie_index":[0.17,-0.04,-0.07,-0.59,-0.03,-0.37,-0.1,0.57,1,0.13,0.06,-0.11,-0.07,-0.34,-0.32,0.4],"wbgi_rle":[0.92,0.7,0.38,-0.4,0.47,-0.18,-0.21,0.37,0.13,1,0.81,0.76,-0.97,-0.69,-0.73,0.4],"mad_gdppc":[0.86,0.64,0.35,-0.18,0.34,0.03,-0.3,0.26,0.06,0.81,1,0.63,-0.78,-0.63,-0.6,0.4],"mad_gdppc1900":[0.77,0.47,0.32,-0.19,0.27,0.09,-0.36,0.25,-0.11,0.76,0.63,1,-0.73,-0.47,-0.46,0.29],"bci_bci":[-0.89,-0.76,-0.42,0.41,-0.51,0.22,0.22,-0.4,-0.07,-0.97,-0.78,-0.73,1,0.66,0.7,-0.41],"lis_gini":[-0.81,-0.45,-0.46,0.36,-0.46,-0.02,0.1,-0.6,-0.34,-0.69,-0.63,-0.47,0.66,1,0.77,-0.33],"top_top1_income_share":[-0.76,-0.37,-0.55,0.46,-0.33,0.2,0.15,-0.47,-0.32,-0.73,-0.6,-0.46,0.7,0.77,1,-0.26],"wdi_wip":[0.44,0.48,-0.08,-0.63,0.38,-0.58,-0.12,0.46,0.4,0.4,0.4,0.29,-0.41,-0.33,-0.26,1]},"columns":[{"id":".rownames","name":"","type":"character","sortable":false,"filterable":false,"width":150,"sticky":"left","style":{"backgroundColor":"#f7f7f7","borderRight":"1px solid #eee"},"rowHeader":true},{"id":"undp_hdi","name":"undp_hdi","type":"numeric"},{"id":"wdi_expedu","name":"wdi_expedu","type":"numeric"},{"id":"wdi_acel","name":"wdi_acel","type":"numeric"},{"id":"wdi_area","name":"wdi_area","type":"numeric"},{"id":"wdi_taxrev","name":"wdi_taxrev","type":"numeric"},{"id":"wdi_expmil","name":"wdi_expmil","type":"numeric"},{"id":"wdi_fdiin","name":"wdi_fdiin","type":"numeric"},{"id":"wdi_trade","name":"wdi_trade","type":"numeric"},{"id":"cbie_index","name":"cbie_index","type":"numeric"},{"id":"wbgi_rle","name":"wbgi_rle","type":"numeric"},{"id":"mad_gdppc","name":"mad_gdppc","type":"numeric"},{"id":"mad_gdppc1900","name":"mad_gdppc1900","type":"numeric"},{"id":"bci_bci","name":"bci_bci","type":"numeric"},{"id":"lis_gini","name":"lis_gini","type":"numeric"},{"id":"top_top1_income_share","name":"top_top1_income_share","type":"numeric"},{"id":"wdi_wip","name":"wdi_wip","type":"numeric"}],"bordered":true,"striped":true,"dataKey":"79cfa4d431a9b92a8f2090830f432e3c"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="bivariate-and-multiple-regression" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="bivariate-and-multiple-regression"><span class="header-section-number">5.6.2</span> Bivariate and Multiple Regression</h3>
<p>We can run a linear regression model in R using the <code>lm()</code> function, where the first argument is an expression that takes the form <code>dependent_variable~independent_variable</code>, and the second argument specifies the underlying dataset that contains the relevant variables. In cases where there is more than one independent variable (i.e.&nbsp;in a multiple regression context), the various independent variables can be separated with a “+” sign (i.e.&nbsp;<code>dependent_variable~independent_variable1 + independent_variable2 + independent_variable3~</code>). Below, we demonstrate how to implement a bivariate regression, by regressing “wdi_trade” on “wdi_taxrev” (using the data from <code>qog_copy_selection</code>). We assign the regression output to a new object named <code>regression1:</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># implements bivariate regression with "wdi_trade" as DV and "wdi_taxrev" as IV; </span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="co"># regresion output assigned to "regression1" object</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>regression1<span class="ot">&lt;-</span><span class="fu">lm</span>(wdi_trade<span class="sc">~</span>wdi_taxrev, <span class="at">data=</span>qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now that we’ve run the regression, and assigned its corresponding output to the <code>regression1</code> object, we can print the output (which contains the relevant regression coefficients and standard errors) by passing <code>regression1</code> to the <code>summary()</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints output of "regresion1"</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wdi_trade ~ wdi_taxrev, data = qog_copy_selection)

Residuals:
   Min     1Q Median     3Q    Max 
-67.50 -30.49 -17.67  10.61 279.40 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  54.1326    12.6885   4.266 3.75e-05 ***
wdi_taxrev    2.3047     0.7142   3.227  0.00158 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 57.07 on 133 degrees of freedom
  (59 observations deleted due to missingness)
Multiple R-squared:  0.07261,   Adjusted R-squared:  0.06563 
F-statistic: 10.41 on 1 and 133 DF,  p-value: 0.001576</code></pre>
</div>
</div>
<p>Now, we’ll add some additional independent variables using a “+” sign, and assign the output to <code>regression2</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Implements multiple regression with "wdi_trade" as DV, </span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and assigns output to object named "regression2"</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>regression2<span class="ot">&lt;-</span><span class="fu">lm</span>(wdi_trade<span class="sc">~+</span>wdi_taxrev<span class="sc">+</span>wdi_area<span class="sc">+</span>wdi_expmil<span class="sc">+</span>bmr_dem<span class="sc">+</span>top_top1_income_share<span class="sc">+</span>undp_hdi, <span class="at">data=</span>qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>As before, we can pass the regression output object as an argument to the <code>summary()</code> function to print the regression results:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints regression2 output</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wdi_trade ~ +wdi_taxrev + wdi_area + wdi_expmil + 
    bmr_dem + top_top1_income_share + undp_hdi, data = qog_copy_selection)

Residuals:
    Min      1Q  Median      3Q     Max 
-82.299 -25.942  -6.451  17.967 237.258 

Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)           -2.826e+01  3.480e+01  -0.812  0.41852    
wdi_taxrev             2.687e+00  8.646e-01   3.107  0.00240 ** 
wdi_area              -6.050e-06  2.101e-06  -2.880  0.00478 ** 
wdi_expmil            -8.393e+00  4.180e+00  -2.008  0.04706 *  
bmr_dem               -3.441e+01  1.246e+01  -2.761  0.00675 ** 
top_top1_income_share -6.164e+01  1.093e+02  -0.564  0.57373    
undp_hdi               1.711e+02  3.689e+01   4.639 9.64e-06 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 48.54 on 111 degrees of freedom
  (76 observations deleted due to missingness)
Multiple R-squared:  0.3342,    Adjusted R-squared:  0.2982 
F-statistic: 9.286 on 6 and 111 DF,  p-value: 3.055e-08</code></pre>
</div>
</div>
<p>Sometimes, it is desirable or necessary to transform variables before they are included in a regression model. Of course, one could add the transformed variable to the dataset using <code>mutate()</code>, and then add it to the regression model, but it’s also possible to make simple variable transformations “on the fly”. For instance, instead of adding “wdi_area”, let’s say we want to add the natural logarithm of “wdi_area” to the model; we can do so by simply adding <code>log(wdi_area)</code> to the model, as below (we’ll assign the resulting output to <code>regression2</code>, and thereby override the previously created object):</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Implements multiple regression with "wdi_trade" as DV, </span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and assigns output to object named "regression2"</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>regression2<span class="ot">&lt;-</span><span class="fu">lm</span>(wdi_trade<span class="sc">~</span>wdi_taxrev<span class="sc">+</span><span class="fu">log</span>(wdi_area)<span class="sc">+</span>wdi_expmil<span class="sc">+</span>bmr_dem<span class="sc">+</span>top_top1_income_share<span class="sc">+</span>undp_hdi, <span class="at">data=</span>qog_copy_selection)</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="co"># prints updated output</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>regression2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wdi_trade ~ wdi_taxrev + log(wdi_area) + wdi_expmil + 
    bmr_dem + top_top1_income_share + undp_hdi, data = qog_copy_selection)

Coefficients:
          (Intercept)             wdi_taxrev          log(wdi_area)  
              163.730                  1.807                -14.472  
           wdi_expmil                bmr_dem  top_top1_income_share  
               -8.028                -27.183                -12.786  
             undp_hdi  
              140.767  </code></pre>
</div>
</div>
<p>Note that we can also use the <em>broom</em> package’s <code>tidy()</code> function to organize and view the regression output:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints regression output using "tidy" function</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(regression2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 5
  term                  estimate std.error statistic  p.value
  &lt;chr&gt;                    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)             164.      37.5       4.37  2.84e- 5
2 wdi_taxrev                1.81     0.742     2.43  1.65e- 2
3 log(wdi_area)           -14.5      1.95     -7.41  2.63e-11
4 wdi_expmil               -8.03     3.54     -2.27  2.54e- 2
5 bmr_dem                 -27.2     10.6      -2.56  1.18e- 2
6 top_top1_income_share   -12.8     91.7      -0.139 8.89e- 1
7 undp_hdi                141.      30.5       4.62  1.04e- 5</code></pre>
</div>
</div>
<p>Later, we’ll learn how to assemble regression results into publication-quality regression tables.</p>
</section>
<section id="categorical-variables-in-regression-models" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3" class="anchored" data-anchor-id="categorical-variables-in-regression-models"><span class="header-section-number">5.6.3</span> Categorical Variables in Regression Models</h3>
<p>If we want to add categorical variables to a regression model, we can directly include variables that are of the class “character” without running into any issues. Under the hood, R will convert those character variables into dichotomous variables, and calculate the regression coefficients and standard errors accordingly. To see this, let’s try adding the “region” variable to <code>regression2 above.</code> First, we’ll confirm that the “region” variable is of the character class:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># confirms that "region" is of class character</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(qog_copy_selection<span class="sc">$</span>region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adds "region" categorical variable (of class "character") in </span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="co"># regression model and assigns it to a new object named "regression3"</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>regression3<span class="ot">&lt;-</span><span class="fu">lm</span>(wdi_trade<span class="sc">~+</span>wdi_taxrev<span class="sc">+</span><span class="fu">log</span>(wdi_area)<span class="sc">+</span>wdi_expmil<span class="sc">+</span>bmr_dem<span class="sc">+</span>top_top1_income_share<span class="sc">+</span>undp_hdi<span class="sc">+</span>region, <span class="at">data=</span>qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s now print the <code>regression3</code> output:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "regression3" object</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression3)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wdi_trade ~ +wdi_taxrev + log(wdi_area) + wdi_expmil + 
    bmr_dem + top_top1_income_share + undp_hdi + region, data = qog_copy_selection)

Residuals:
    Min      1Q  Median      3Q     Max 
-66.240 -23.213  -2.547  20.048 199.484 

Coefficients:
                                Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                     128.0267    63.6460   2.012   0.0469 *  
wdi_taxrev                        1.5045     0.7972   1.887   0.0620 .  
log(wdi_area)                   -15.1387     2.1516  -7.036 2.33e-10 ***
wdi_expmil                       -7.6143     4.0386  -1.885   0.0622 .  
bmr_dem                         -17.2052    11.5473  -1.490   0.1393    
top_top1_income_share           101.6392   110.6312   0.919   0.3604    
undp_hdi                        103.9597    53.2017   1.954   0.0534 .  
regionEastAsia                   50.0052    48.6743   1.027   0.3067    
regionEasternEuropePostSoviet    63.4546    43.7913   1.449   0.1504    
regionLatinAmerica               34.6228    43.4997   0.796   0.4279    
regionNorthAfricaMiddleEast      42.0853    45.8175   0.919   0.3605    
regionPacific                    17.0738    58.1295   0.294   0.7696    
regionSouthAsia                  20.3102    46.7917   0.434   0.6652    
regionSouthEastAsia              84.2277    44.7907   1.880   0.0629 .  
regionSubSaharanAfrica           43.9737    42.4805   1.035   0.3030    
regionWesternEuropeNorthAmerica  60.8143    45.4060   1.339   0.1834    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 40.67 on 102 degrees of freedom
  (76 observations deleted due to missingness)
Multiple R-squared:  0.5704,    Adjusted R-squared:  0.5072 
F-statistic: 9.028 on 15 and 102 DF,  p-value: 5.891e-13</code></pre>
</div>
</div>
<p>Note that “Caribbean” is the excluded category that serves as the reference with against which the effects of the other regional categories are interpreted. If we are okay with accepting the default excluded category (which is always the first category by alphabetical order, hence “Caribbean” as the excluded category in this case) running the regression with a character variable is perfectly fine and provides valid results.</p>
<p>However, if we want to change the reference category, we’ll have to either use a factor variable or create and include dummy variables in our regression. In R, a factor is a data type that’s specifically designed for categorical variables; factors consider each separate category within a categorical variable as a distinct “level”, which allows them to be treated as dummy variables in regression models. Indeed, when we include a categorical variable of the “character” class, R converts that variable into a factor under the hood before including it in the regression, with the “levels” being treated as dummy variables, and the excluded level being the category that is first in alphabetical order. If we want to change the excluded level, we have to get under the hood and “relevel” the factor, so that the desired excluded category is first in the factor order.</p>
<p>To see how this works, let’s say that we want to make “LatinAmerica” the reference variable. First, we’ll first change the region variable from a “character” variable to a “factor” variable:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set "region" variable as factor</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>qog_copy_selection<span class="sc">$</span>region<span class="ot">&lt;-</span><span class="fu">as.factor</span>(qog_copy_selection<span class="sc">$</span>region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Before proceeding, well confirm that the conversion has successfully taken place:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># confirm conversion</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(qog_copy_selection<span class="sc">$</span>region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
</div>
<p>Now, we’ll check the levels of the “region” factor variable using the <code>levels()</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check levels of "region" factor variable</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(qog_copy_selection<span class="sc">$</span>region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Caribbean"                 "EastAsia"                 
 [3] "EasternEuropePostSoviet"   "LatinAmerica"             
 [5] "NorthAfricaMiddleEast"     "Pacific"                  
 [7] "SouthAsia"                 "SouthEastAsia"            
 [9] "SubSaharanAfrica"          "WesternEuropeNorthAmerica"</code></pre>
</div>
</div>
<p>Note that by default, the levels are arrayed in alphabetical order. Let’s relevel the region variable, and set “LatinAmerica” as the excluded/reference category using the <code>relevel()</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevels "region" factor variable to set "LatinAmerica" as reference category</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>qog_copy_selection<span class="sc">$</span>region<span class="ot">&lt;-</span><span class="fu">relevel</span>(qog_copy_selection<span class="sc">$</span>region, <span class="at">ref=</span><span class="st">"LatinAmerica"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s confirm that the releveling has successfully taken place:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check levels of "region" factor variable</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(qog_copy_selection<span class="sc">$</span>region)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "LatinAmerica"              "Caribbean"                
 [3] "EastAsia"                  "EasternEuropePostSoviet"  
 [5] "NorthAfricaMiddleEast"     "Pacific"                  
 [7] "SouthAsia"                 "SouthEastAsia"            
 [9] "SubSaharanAfrica"          "WesternEuropeNorthAmerica"</code></pre>
</div>
</div>
<p>Note that “LatinAmerica” is now the first category, which means that it will be used as the reference/excluded category in a regression. Let’s confirm this by running a regression with the “region” factor variable and assigning the output to a new object named <code>regression4:</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># runs regression with releveled factor variable with "LatinAmerica" as # reference and assigns output to "regression4"</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>regression4<span class="ot">&lt;-</span><span class="fu">lm</span>(wdi_trade<span class="sc">~+</span>wdi_taxrev<span class="sc">+</span><span class="fu">log</span>(wdi_area)<span class="sc">+</span>wdi_expmil<span class="sc">+</span>bmr_dem<span class="sc">+</span>top_top1_income_share<span class="sc">+</span>undp_hdi<span class="sc">+</span>region, <span class="at">data=</span>qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print the regression output and confirm that “LatinAmerica” is the excluded regional category:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints model output for "regression4"</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(regression4)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 5
   term                            estimate std.error statistic  p.value
   &lt;chr&gt;                              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)                       163.      54.0       3.01  3.28e- 3
 2 wdi_taxrev                          1.50     0.797     1.89  6.20e- 2
 3 log(wdi_area)                     -15.1      2.15     -7.04  2.33e-10
 4 wdi_expmil                         -7.61     4.04     -1.89  6.22e- 2
 5 bmr_dem                           -17.2     11.5      -1.49  1.39e- 1
 6 top_top1_income_share             102.     111.        0.919 3.60e- 1
 7 undp_hdi                          104.      53.2       1.95  5.34e- 2
 8 regionCaribbean                   -34.6     43.5      -0.796 4.28e- 1
 9 regionEastAsia                     15.4     25.3       0.608 5.45e- 1
10 regionEasternEuropePostSoviet      28.8     17.1       1.68  9.56e- 2
11 regionNorthAfricaMiddleEast         7.46    22.3       0.335 7.38e- 1
12 regionPacific                     -17.5     42.9      -0.410 6.83e- 1
13 regionSouthAsia                   -14.3     23.9      -0.598 5.51e- 1
14 regionSouthEastAsia                49.6     20.2       2.46  1.57e- 2
15 regionSubSaharanAfrica              9.35    17.1       0.548 5.85e- 1
16 regionWesternEuropeNorthAmerica    26.2     19.8       1.32  1.89e- 1</code></pre>
</div>
</div>
<p>If we want full control over the excluded/reference category when including categorical variables, another option is to simply create dichotomous/dummy variables based on the categorical variable, and explicitly decide which dichotomous variable to exclude as the reference category. To make these dummy variables, we can (as we have learned), use the <code>dummy_cols()</code> function from the <em>fastDummies</em> package.</p>
<p>To illustrate, let’s make dummy variables based on the “region” variable:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use "region" field to make region dummy variables in "qog_copy_selection"</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>qog_copy_selection<span class="ot">&lt;-</span>qog_copy_selection <span class="sc">%&gt;%</span> <span class="fu">dummy_cols</span>(<span class="st">"region"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, we will generate another regression, assigned to the new object named <code>regression5</code>, that adds these dummy variables, while excluding “LatinAmerica” as the reference variable:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># includes dummy variables in regression with "LatinAmerica" as the </span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="co"># excluded category; model output assigned to object named </span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="co"># "regression5"</span></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>regression5<span class="ot">&lt;-</span><span class="fu">lm</span>(wdi_trade<span class="sc">~</span>wdi_taxrev<span class="sc">+</span><span class="fu">log</span>(wdi_area)<span class="sc">++</span>wdi_expmil<span class="sc">+</span>bmr_dem<span class="sc">+</span>top_top1_income_share<span class="sc">+</span>undp_hdi<span class="sc">+</span>region_Caribbean<span class="sc">+</span>region_EastAsia<span class="sc">+</span>region_EasternEuropePostSoviet<span class="sc">+</span>region_NorthAfricaMiddleEast<span class="sc">+</span>region_Pacific<span class="sc">+</span>region_SouthAsia<span class="sc">+</span>region_SouthEastAsia<span class="sc">+</span>region_SubSaharanAfrica<span class="sc">+</span>region_WesternEuropeNorthAmerica, <span class="at">data=</span>qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print the results from <code>regression5</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints model output for "regression5"</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(regression5)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 5
   term                             estimate std.error statistic  p.value
   &lt;chr&gt;                               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)                        163.      54.0       3.01  3.28e- 3
 2 wdi_taxrev                           1.50     0.797     1.89  6.20e- 2
 3 log(wdi_area)                      -15.1      2.15     -7.04  2.33e-10
 4 wdi_expmil                          -7.61     4.04     -1.89  6.22e- 2
 5 bmr_dem                            -17.2     11.5      -1.49  1.39e- 1
 6 top_top1_income_share              102.     111.        0.919 3.60e- 1
 7 undp_hdi                           104.      53.2       1.95  5.34e- 2
 8 region_Caribbean                   -34.6     43.5      -0.796 4.28e- 1
 9 region_EastAsia                     15.4     25.3       0.608 5.45e- 1
10 region_EasternEuropePostSoviet      28.8     17.1       1.68  9.56e- 2
11 region_NorthAfricaMiddleEast         7.46    22.3       0.335 7.38e- 1
12 region_Pacific                     -17.5     42.9      -0.410 6.83e- 1
13 region_SouthAsia                   -14.3     23.9      -0.598 5.51e- 1
14 region_SouthEastAsia                49.6     20.2       2.46  1.57e- 2
15 region_SubSaharanAfrica              9.35    17.1       0.548 5.85e- 1
16 region_WesternEuropeNorthAmerica    26.2     19.8       1.32  1.89e- 1</code></pre>
</div>
</div>
<p>Note that the coefficients and standard errors are the same as the results in <code>regression5</code>; this is expected since both regressions ultimately use dummy variables with “LatinAmerica” as the excluded reference category (even though they set it as the reference category in different ways).</p>
</section>
<section id="interaction-terms-in-a-regression" class="level3" data-number="5.6.4">
<h3 data-number="5.6.4" class="anchored" data-anchor-id="interaction-terms-in-a-regression"><span class="header-section-number">5.6.4</span> Interaction Terms in a Regression</h3>
<p>It is often useful to include interaction terms in our regression models. Interaction terms allow us to explore situations in which the effect of one independent variable depends on the value of another independent variable. In R, interaction terms can be defined with a “*” between the two components of the interaction. When an interaction term is included in a regression model using the “*” operator, there is no need to include the individual components of the interaction separately in the model, because R automatically includes the main effects by default.</p>
<p>Let’s explore a simple regression model with an interaction term between “wdi_taxrev” and “bmr_dem”, which is a dichotomous variable that indicates whether a country is a democracy. The dependent variable remains “wdi_trade”. Below, we’ll run the model, and assign the output to an object named <code>taxrev_democracy_interaction</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run regression with interaction term between "wdi_taxrev" and "bmr_dem"</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>taxrev_democracy_interaction<span class="ot">&lt;-</span><span class="fu">lm</span>(wdi_trade<span class="sc">~</span>wdi_taxrev<span class="sc">*</span>bmr_dem, <span class="at">data=</span>qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s now print the regression results:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints regression results of "taxrev_democracy_interaction"</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(taxrev_democracy_interaction)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wdi_trade ~ wdi_taxrev * bmr_dem, data = qog_copy_selection)

Residuals:
   Min     1Q Median     3Q    Max 
-71.74 -30.47 -13.44  13.19 272.78 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)         78.5060    19.2650   4.075 7.93e-05 ***
wdi_taxrev           0.1516     1.4607   0.104   0.9175    
bmr_dem            -39.4475    27.0224  -1.460   0.1467    
wdi_taxrev:bmr_dem   2.9917     1.7501   1.709   0.0897 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 56.87 on 131 degrees of freedom
  (59 observations deleted due to missingness)
Multiple R-squared:  0.09307,   Adjusted R-squared:  0.0723 
F-statistic: 4.481 on 3 and 131 DF,  p-value: 0.004982</code></pre>
</div>
</div>
<p>The interpretation of regression results in the context of an interaction term is of course tricky, since the coefficients on the individual variables that are part of the interaction term can no longer be interpreted in isolation. They can only be interpreted in conjunction with the other component of the interaction. Let’s say, for example, that we’re interested in the impact of democracy (“bmr_dem”) on trade as a share of GDP (“wdi_trade”). Given the interaction term, we cannot simply infer that the trade share of GDP is 39.4 percentage points lower in democracies, on average, than non-democracies. The coefficient on “bmr_dem” tells us that the trade share of GDP is on average 39.4 points lower for democracies when “wdi_taxrev” equals 0. However, this information is of limited substantive value, since all governments collect at least some tax revenue. Conversely, the coefficient on “wdi_taxrev” tells us the impact of a unit change in “wdi_taxrev” on “wdi_trade” for non-democracies (where “bmr_dem” is 0) but not for democracies (where “bmr_dem” is 1).</p>
<p>Instead of trying to interpret the impact of “wdi_taxrev” and “bmr_dem” on “wdi_trade” from just looking at the regression table, it would be more useful to get a sense of the substantive impact of each of these variables while accounting for the interaction term by assigning meaningful values to the moderating variable. In particular, we’ll calculate predicted values that demonstrate the substantive impact of each of these variables in the context of the interaction, and also plot these predicted values to visualize the impact of the independent variables after accounting for the interactive effect.</p>
<p>We’ll begin by calculating the predicted values of “wdi_trade” for democracies and non-democracies, while holding “wdi_taxrev” at its mean. First, we’ll calculate the mean value of “wdi_taxrev”:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Finds mean value of "wdi_taxrev" variable and assigns to</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="co"># object named "mean_taxrev" </span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>mean_taxrev<span class="ot">&lt;-</span><span class="fu">mean</span>(qog_copy_selection<span class="sc">$</span>wdi_taxrev, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, we’ll use the <em>ggeffects</em> package’s <code>ggpredict()</code> function to calculate the predicted values of “wdi_trade” for different values of “bmr_dem” (i.e.&nbsp;for democracies and non-democracies) while holding “wdi_taxrev” at its mean:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculates predicted values of "wdi_trade" for different values of </span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="co"># "bmr_dem", with "wdi_taxrev" held at mean</span></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>predicted_values_democracy<span class="ot">&lt;-</span><span class="fu">ggpredict</span>(<span class="at">model=</span>taxrev_democracy_interaction, <span class="at">term=</span><span class="st">"bmr_dem"</span>, <span class="at">condition=</span><span class="fu">c</span>(<span class="at">wdi_taxrev=</span>mean_taxrev))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>In the code above, the first argument specifies the regression model for which we want to calculate predicted values; the second argument is the independent variable whose impact on the dependent variable we want to predict; and the third argument specifies the value at which the moderating variable should be held when calculating the predicted values. We assigned the predicted values output to a new object named <code>predicted_values_democracy</code>, which we’ll now inspect:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prints "predicted_values_democracy" table</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>predicted_values_democracy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># Predicted values of wdi_trade

bmr_dem | Predicted |        95% CI
-----------------------------------
      0 |     80.96 | 59.97, 101.95
      1 |     90.01 | 77.28, 102.75</code></pre>
</div>
</div>
<p>These predicted values are generated by taking the regression equation and coefficients from <code>taxrev_democracy_interaction</code>, and plugging in the mean value of “wdi_taxrev” when “bmr_dem” is set to 0 and when it is set to 1.</p>
<p>We can plot these values, along with their 95% confidence intervals, using <em>ggplot2</em>. In order to more explicitly connect the arguments used to create the plot to the values in <code>predicted_values_democracy</code>, it is useful to print <code>predicted_values_democracy</code> as a data frame:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints underlying structure of "predicted_values_democracy"</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as.data.frame</span>(predicted_values_democracy))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x predicted std.error conf.low conf.high group
1 0  80.96319 10.609727 59.97462  101.9518     1
2 1  90.01373  6.438564 77.27671  102.7507     1</code></pre>
</div>
</div>
<p>Now, let’s go ahead and make our plot, which we’ll assign to a new object named <code>predicted_values_democracy_plotted</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates plot of "predicted_values_democracy"; shows predicted values</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="co"># of "wdi_trade" for different values of democracy ("bmr_dem") when </span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="co"># "wdi_taxrev" is held at mean</span></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>predicted_values_democracy_plotted<span class="ot">&lt;-</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(predicted_values_democracy)<span class="sc">+</span></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>predicted))<span class="sc">+</span></span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(x, <span class="at">ymin=</span>conf.low, <span class="at">ymax=</span>conf.high), <span class="at">width=</span><span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>, <span class="at">by=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Predicted Effects of Democracy on Trade</span><span class="sc">\n</span><span class="st">(with tax revenue as a share of GDP set to mean)"</span>,</span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Predicted Trade Share of GDP"</span>,</span>
<span id="cb171-11"><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"Democracy"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print <code>predicted_values_democracy_plotted</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "predicted_values_democracy_plotted"</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>predicted_values_democracy_plotted</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-137-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now, let’s calculate the predicted values of “wdi_trade” for different values of “wdi_taxrev” for both democratic and non-democratic countries, by using the same <code>ggpredict()</code> function. The first argument to the <code>ggpredict()</code> function is the same as before; the second argument, <code>terms=c("wdi_taxrev", "bmr_dem)</code>, indicates that we want to calculate predicted values across a range of tax revenues, for both democracies and non-democracies. We’ll assign these predicted values to a new object named <code>predicted_values_taxrev</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculates predicted values for trade share of GDP for</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="co"># both values of the democracy indicator (bmr_dem=0 and 1), </span></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="co"># across the observed range of "wdi_taxrev" and assigns the result</span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a><span class="co"># to "predicted_values_taxrev" object</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a>predicted_values_taxrev <span class="ot">&lt;-</span> <span class="fu">ggpredict</span>(<span class="at">model=</span>taxrev_democracy_interaction, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"wdi_taxrev"</span>, <span class="st">"bmr_dem"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>When we print <code>predicted_values_taxrev</code> it looks something like this:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "predicted_values_taxrev"</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>predicted_values_taxrev</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># Predicted values of wdi_trade

bmr_dem: 0

wdi_taxrev | Predicted |         95% CI
---------------------------------------
         0 |     78.51 |  40.40, 116.62
        10 |     80.02 |  62.43,  97.62
        20 |     81.54 |  52.61, 110.46
        30 |     83.05 |  27.97, 138.13
        40 |     84.57 |   1.50, 167.64
        50 |     86.08 | -25.44, 197.61

bmr_dem: 1

wdi_taxrev | Predicted |         95% CI
---------------------------------------
         0 |     39.06 |   1.57,  76.54
        10 |     70.49 |  50.18,  90.80
        20 |    101.92 |  89.79, 114.06
        30 |    133.36 | 108.67, 158.04
        40 |    164.79 | 122.38, 207.20
        50 |    196.22 | 135.27, 257.17</code></pre>
</div>
</div>
<p>Before creating a plot, let’s print <code>predicted_values_taxrev</code> as a data frame:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "predicted_values_taxrev" as data frame</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(predicted_values_taxrev)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>    x predicted std.error   conf.low conf.high group
1   0  78.50602 19.265036  40.395182 116.61686     0
2   0  39.05852 18.949079   1.572717  76.54432     1
3  10  80.02177  8.895043  62.425258  97.61829     0
4  10  70.49129 10.267926  50.178878  90.80369     1
5  20  81.53753 14.622377  52.610982 110.46408     0
6  20 101.92405  6.134634  89.788284 114.05982     1
7  30  83.05329 27.842736  27.973714 138.13286     0
8  30 133.35682 12.477095 108.674153 158.03949     1
9  40  84.56904 41.992070   1.498713 167.63937     0
10 40 164.78959 21.437415 122.381270 207.19791     1
11 50  86.08480 56.375188 -25.438770 197.60837     0
12 50 196.22236 30.810524 135.271794 257.17293     1</code></pre>
</div>
</div>
<p>Now, let’s go ahead and create a plot of these predicted values and assign the result to a new object named <code>predicted_values_taxrev_plotted</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates plot of "predicted_values_taxrev"; shows predicted values</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="co"># of "wdi_trade" for both values of the democracy indicator across the </span></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="co"># observed range of "wdi_taxrev" and assigns the result to "predicted_values_taxrev_plotted"</span></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>predicted_values_taxrev_plotted <span class="ot">&lt;-</span></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(predicted_values_taxrev)<span class="sc">+</span></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> predicted, <span class="at">color =</span> group), <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high, <span class="at">fill =</span> group), <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Predicted Effect of Tax Revenue on Trade Share of GDP</span><span class="sc">\n</span><span class="st">by Democracy Status"</span>,</span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Tax Revenue (% of GDP)"</span>,</span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Predicted Trade Share of GDP"</span>,</span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"Democracy"</span>,</span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> <span class="st">"Democracy"</span>)<span class="sc">+</span></span>
<span id="cb178-13"><a href="#cb178-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb178-14"><a href="#cb178-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Note that since we are plotting a line, rather than single points, we use the <code>geom_ribbon()</code> geometry to show the confidence intervals. Let’s see what the plot looks like:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "predicted_values_taxrev_plotted"</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>predicted_values_taxrev_plotted</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-142-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Let’s refine this plot by modifying the labels and colors of the legend, and how they map onto the lines and confidence intervals. We’ll start by creating vectors to store the desired colors and labels:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co"># defines colors and labels</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>pv_colors<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"0"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"#d62728"</span>)</span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>pv_labels<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"0"</span> <span class="ot">=</span> <span class="st">"Non-democracy"</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Democracy"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, we’ll modify the plot using this styling. We’ll take the existing <code>predicted_values_taxrev_plotted</code> plot, and add this styling to the legend and the line (via <code>scale_color_manual()</code> and confidence intervals (via <code>scale_fill_manual()</code>). We’ll assign the modified plot to a new object named <code>predicted_values_taxrev_plotted_refined</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># refines appearance of "predicted_values_taxrev_plotted" by modifying # legend and colors</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>predicted_values_taxrev_plotted_refined<span class="ot">&lt;-</span></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>  predicted_values_taxrev_plotted<span class="sc">+</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span>pv_colors, <span class="at">labels=</span>pv_labels, <span class="at">name=</span><span class="st">"Regime Type"</span>)<span class="sc">+</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>pv_colors, <span class="at">labels=</span>pv_labels, <span class="at">name=</span><span class="st">"Regime Type"</span> )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Lets print <code>predicted_values_taxrev_plotted_refined</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "predicted_values_taxrev_plotted_refined"</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>predicted_values_taxrev_plotted_refined</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-145-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The plot suggests that democracies tend to trade more as tax revenue as a share of GDP increases, while tax revenue does not have much of an impact on trade for non-democracies; however, the confidence intervals look like they overlap substantially, suggesting that the difference between regime types is likely small and that the interaction effect is weak. In other words, there does not appear to be a strong and unique “democracy effect” in the relationship between tax revenue as a share of GDP and trade as a share of GDP.</p>
<p>So far, we’ve tried to interpret our regression results in the presence of an interaction term by generating and plotting predicted values. The predicted values plots we created, in particular, show the expected outcomes for trade as a percentage of GDP for countries with different characteristics with respect to democracy and tax revenue. It is also useful to generate marginal effects plots; unlike a predicted values plot, which shows predicted values of the dependent variable on the y-axis, a marginal effects plot shows the partial derivative/slope of the independent variable of interest on the y-axis, and values of the moderating variable on the x-axis. This plot helps us visualize how a small change in the independent variable impacts the dependent variable for different values of the moderating variable, which allows us to get a sense of the strength of the interaction. That is, if the marginal effect changes meaningfully across values of the moderating variable, it suggests a powerful interaction effect; on the other hand, if the marginal effect does not meaningfully change across values of the moderating variable, it suggests a weak interaction effect.</p>
<p>The confidence intervals displayed on a marginal effects plot are especially useful. When the confidence intervals overlap with zero, it suggests that the impact of the independent variable of interest on the dependent variable of interest for a given level of the moderating variable is weak. On the other hand, in regions for the moderating variable where the confidence intervals do NOT include zero, it suggests a statistically significant impact of X on Y. Importantly, the impact of an independent variable of interest on the dependent variable may be statistically significant for some levels of the moderating variable but not others, and a marginal effects plot is especially useful in quickly identifying these “zones of significance”.</p>
<p>There are many ways to create a marginal effects plot, but the <em>interplot</em> package allows us to quickly generate useful marginal effects plots using the <code>interplot()</code> function. Below, we demonstrate the use of this <code>interplot()</code> function by creating a marginal effects plot that shows the impact of democracy on trade as a share of GDP across different levels of the moderating variable, tax revenues as a share of GDP (“wdi_taxrev”). We’ll assign this marginal effects plot to a new object named <code>marginal_effect_democracy_plot</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Marginal effect of democracy (bmr_dem) on trade share of GDP across </span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="co"># different levels of the moderating variable (tax revenue as a share</span></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a><span class="co"># of GDP)</span></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>marginal_effect_democracy_plot <span class="ot">&lt;-</span> </span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interplot</span>(</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">m =</span> taxrev_democracy_interaction, <span class="co"># model object</span></span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">var1 =</span> <span class="st">"bmr_dem"</span>,      <span class="co"># independent variable of interest</span></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">var2 =</span> <span class="st">"wdi_taxrev"</span>) <span class="sc">+</span>    <span class="co"># moderator</span></span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tax Revenue (% of GDP)"</span>,</span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Marginal Effect of Democracy on Trade"</span>,</span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Marginal Effect of Democracy on Trade Across Tax Revenue"</span>)<span class="sc">+</span></span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s now print <code>marginal_effect_democracy_plot</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "marginal_effect_democracy_plot"</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>marginal_effect_democracy_plot</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-147-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The plot allows us to visualize the impact of regime type on trade at different levels of tax revenue; it suggests that the marginal effect of democracy increases as tax revenue rises, but the confidence intervals include zero across most of the observed range of the moderating variable, indicating that this relationship is not statistically distinguishable from zero at conventional confidence levels.</p>
<p>Now, let’s visualize the marginal effect of tax revenue as a share of GDP on trade for different levels of democracy:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interplot</span>(</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">m =</span> taxrev_democracy_interaction,</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var1 =</span> <span class="st">"wdi_taxrev"</span>,   <span class="co"># independent variable of interest</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">var2 =</span> <span class="st">"bmr_dem"</span>) <span class="sc">+</span>       <span class="co"># moderator (0 = non-democracy, 1 = democracy)) +</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Democracy (0 = Non-democracy, 1 = Democracy)"</span>,</span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Marginal Effect of Tax Revenue on Trade"</span>,</span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Marginal Effect of Tax Revenue on Trade by Regime Type"</span>) <span class="sc">+</span></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-148-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This plot suggests that “wdi_taxrev” exerts a positive and statistically significant impact on “wdi_trade” for democracies, but not for non-democracies. However, although the marginal effect for democracies is statistically distinguishable from zero, the interaction term in the regression model is not statistically significant at the 95% level, indicating that we cannot conclude that the effect of tax revenue on trade is significantly different between democracies and non-democracies (this is reflected in the plot by the overlap of the regime-specific confidence intervals). In other words, while tax revenue appears to matter for trade in democracies, we cannot be confident that this difference across regime types is not due to random chance.</p>
<p>We’ve just gone through some techniques to interpret regression results that include an interaction between a continuous independent variable, and a dichotomous one. We can also use these techniques to make sense of regression results that include an interaction between two continuous independent variables. To illustrate, let’s consider another regression model, this time with “wdi_taxrev” and “undp_hdi” (the human development index), and an interaction between these variables, as the independent variables, and “wdi_trade” as the dependent variable. We’ll assign the regression results to an object named <code>taxrev_hdi_interaction</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run regression with "wdi_trade" as DV, and interaction term between </span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="co"># "wdi_taxrev" and "undp_hdi" (two continuous variables) as IVs</span></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>taxrev_hdi_interaction<span class="ot">&lt;-</span><span class="fu">lm</span>(wdi_trade<span class="sc">~</span>wdi_taxrev<span class="sc">*</span>undp_hdi, <span class="at">data=</span>qog_copy_selection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s print the regression results:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints regression results</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(taxrev_hdi_interaction)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wdi_trade ~ wdi_taxrev * undp_hdi, data = qog_copy_selection)

Residuals:
    Min      1Q  Median      3Q     Max 
-89.430 -32.099  -9.118  17.897 262.709 

Coefficients:
                     Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept)         -30.35740   53.88275  -0.563   0.5741  
wdi_taxrev            1.42787    3.25988   0.438   0.6621  
undp_hdi            131.81632   74.14701   1.778   0.0778 .
wdi_taxrev:undp_hdi   0.06938    4.28513   0.016   0.9871  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 54.21 on 131 degrees of freedom
  (59 observations deleted due to missingness)
Multiple R-squared:  0.1758,    Adjusted R-squared:  0.1569 
F-statistic: 9.315 on 3 and 131 DF,  p-value: 1.258e-05</code></pre>
</div>
</div>
<p>We can see that the regression results show an interaction term that is not significant at conventional thresholds, but we can further unpack this with some predicted values and</p>
</section>
</section>
<section id="exporting-analysis-objects" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="exporting-analysis-objects"><span class="header-section-number">5.7</span> Exporting Analysis Objects</h2>


</section>

</main> <!-- /main -->
<div style="text-align:right; margin-top: 1em;">
  <a href="https://github.com/aranganath24/IBS_CRDDS_R" target="_blank">View Source</a>
</div>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./session3.html" class="pagination-link" aria-label="Transferring, Processing, and Wrangling Data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transferring, Processing, and Wrangling Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./session5.html" class="pagination-link" aria-label="Tools for Reproducibility and Reporting">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Tools for Reproducibility and Reporting</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/blob/main/session4.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/edit/main/session4.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>