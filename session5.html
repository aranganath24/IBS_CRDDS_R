<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>6&nbsp; R Tools for Reproducibility and Reporting – A Crash Course in R for Social Scientists</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./summary.html" rel="next">
<link href="./session4.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-27c261d06b905028a18691de25d09dde.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./session5.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R Tools for Reproducibility and Reporting</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">A Crash Course in R for Social Scientists</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/aranganath24/IBS_CRDDS_R" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R Foundations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Functional Programming</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transferring, Processing, and Wrangling Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Elementary Data Visualization and Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./session5.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R Tools for Reproducibility and Reporting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Conclusion and Future Reading</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preliminaries" id="toc-preliminaries" class="nav-link active" data-scroll-target="#preliminaries"><span class="header-section-number">6.1</span> Preliminaries</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">6.2</span> Introduction</a></li>
  <li><a href="#rstudio-projects-introduction" id="toc-rstudio-projects-introduction" class="nav-link" data-scroll-target="#rstudio-projects-introduction"><span class="header-section-number">6.3</span> RStudio Projects: Introduction</a>
  <ul>
  <li><a href="#creating-an-rstudio-project" id="toc-creating-an-rstudio-project" class="nav-link" data-scroll-target="#creating-an-rstudio-project"><span class="header-section-number">6.3.1</span> Creating an RStudio Project</a></li>
  <li><a href="#organizing-an-rstudio-project" id="toc-organizing-an-rstudio-project" class="nav-link" data-scroll-target="#organizing-an-rstudio-project"><span class="header-section-number">6.3.2</span> Organizing an RStudio Project</a></li>
  </ul></li>
  <li><a href="#rstudio-projects-data-management-and-reproducibility-benefits" id="toc-rstudio-projects-data-management-and-reproducibility-benefits" class="nav-link" data-scroll-target="#rstudio-projects-data-management-and-reproducibility-benefits"><span class="header-section-number">6.4</span> RStudio Projects: Data Management and Reproducibility Benefits</a>
  <ul>
  <li><a href="#using-renv-to-create-project-specific-package-libraries" id="toc-using-renv-to-create-project-specific-package-libraries" class="nav-link" data-scroll-target="#using-renv-to-create-project-specific-package-libraries"><span class="header-section-number">6.4.1</span> Using <em>renv</em> to create project-specific package libraries</a></li>
  <li><a href="#using-projects-to-define-and-manage-file-paths" id="toc-using-projects-to-define-and-manage-file-paths" class="nav-link" data-scroll-target="#using-projects-to-define-and-manage-file-paths"><span class="header-section-number">6.4.2</span> Using projects to define and manage file paths</a></li>
  </ul></li>
  <li><a href="#quarto" id="toc-quarto" class="nav-link" data-scroll-target="#quarto"><span class="header-section-number">7</span> Quarto</a>
  <ul>
  <li><a href="#making-a-new-quarto-document" id="toc-making-a-new-quarto-document" class="nav-link" data-scroll-target="#making-a-new-quarto-document"><span class="header-section-number">7.1</span> Making a New Quarto Document</a></li>
  <li><a href="#writing-a-quarto-document" id="toc-writing-a-quarto-document" class="nav-link" data-scroll-target="#writing-a-quarto-document"><span class="header-section-number">7.2</span> Writing a Quarto Document</a></li>
  <li><a href="#rendering-a-quarto-document" id="toc-rendering-a-quarto-document" class="nav-link" data-scroll-target="#rendering-a-quarto-document"><span class="header-section-number">7.3</span> Rendering a Quarto Document</a></li>
  <li><a href="#managing-file-paths-in-quarto" id="toc-managing-file-paths-in-quarto" class="nav-link" data-scroll-target="#managing-file-paths-in-quarto"><span class="header-section-number">7.4</span> Managing file paths in Quarto</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/blob/main/session5.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/edit/main/session5.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R Tools for Reproducibility and Reporting</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="preliminaries" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="preliminaries"><span class="header-section-number">6.1</span> Preliminaries</h2>
<p>Please load the <em>tidyverse</em>. Below, we’ll also eventually install and load a library called <em>here</em>, but it is not necessary to do so at the outset.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load library</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="introduction" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="introduction"><span class="header-section-number">6.2</span> Introduction</h2>
<p>In this lesson, we’ll learn about some tools that can help you write reproducible R code and manage your projects, as well as communicate your results with others (whether collaborators, students, the broader scholarly community, or the public) in a transparent and compelling way. In particular, we will introduce RStudio’s <em>Projects</em> feature, which provides a useful container for the various components of an R project (i.e.&nbsp;raw data, analysis outputs and processed data, scripts etc) and helps keep these components organized and sharable. We will also introduce <em>Quarto</em>, an open-source publishing system that enables you to produce articles, websites, slides, books, and other documents. The <em>Quarto</em> ecosystem is too vast for us to explore in a comprehensive here, so our focus will be on using <em>Quarto</em> as a platform for literate programming, which refers to the practice of writing code as human readable scripts that integrate narrative text, code, and code outputs into cohesive and accessible documents.</p>
</section>
<section id="rstudio-projects-introduction" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="rstudio-projects-introduction"><span class="header-section-number">6.3</span> RStudio Projects: Introduction</h2>
<p>As we move forward in using R, the scope and complexity of our work will inevitably increase, which means that it will become increasingly important (and challenging) to systematically track the various components of our projects, and to share these projects with others. R Studio’s <em>Project</em> functionality can make these data and project management tasks more tractable and streamlined, which in turn facilitates the reproducibility of our work.</p>
<p>An RStudio Project, quite simply, is a folder/directory in which we can store all of the materials associated with an R-based project, such as our raw data, scripts, outputs (i.e.&nbsp;visualizations, processed data etc.), and reports. These project directories function as self-contained workspaces with features that support reproducible workflows. Before exploring these features in more detail, let’s first learn how to create an R project.</p>
<section id="creating-an-rstudio-project" class="level3" data-number="6.3.1">
<h3 data-number="6.3.1" class="anchored" data-anchor-id="creating-an-rstudio-project"><span class="header-section-number">6.3.1</span> Creating an RStudio Project</h3>
<p>To start an RStudio Project, first go to <strong>File</strong> and click <strong>New Project</strong>:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic1.png" class="img-fluid figure-img" width="1248">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.1: Start a Project
</figcaption>
</figure>
</div>
</div>
</div>
<p>Then, select the option to start a project in a new working directory:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic2.png" class="img-fluid figure-img" width="1368">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.2: Create Project in New Directory
</figcaption>
</figure>
</div>
</div>
</div>
<p>You can retroactively make a given directory an R project by selecting the “Existing Directory” option, but we will create a project in a new directory so that everyone is on the same page.</p>
<p>Next, select “New Project” in the <strong>Project Type</strong> menu:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic3.png" class="img-fluid figure-img" width="1342">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.3: Select Project Type
</figcaption>
</figure>
</div>
</div>
</div>
<p>In the next menu of the project wizard, we will specify a name and location for the R project directory. We will name the directory “r-reproducible-research”. Please go ahead and select an appropriate location for this directory on your computer, and also make sure that the “Use renv with this project” button is checked. We will have more to say about <em>renv</em> later in the lesson. Go ahead and click the “Create Project” button, once your project wizard window looks something like this:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-4" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic4.png" class="img-fluid figure-img" width="1008">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.4: Specify directory name and location, and initialize renv
</figcaption>
</figure>
</div>
</div>
</div>
<p>At this point, the project will be created, and a project-specific R Studio window, named after the project, will open. Note the project files in the “Files” pane. Especially significant is the <strong>.RProj</strong> file, which takes the name of the project. It is this file that defines a directory as an R Project directory that functions as a self-contained workspace for a given project. File paths within an R Project can be defined in relative terms with respect to this main project directory (i.e.&nbsp;the directory which has the <code>.Rproj</code> file), which is a point we’ll return to below.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-5" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic5.png" class="img-fluid figure-img" width="1268">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.5: RStudio project window and files
</figcaption>
</figure>
</div>
</div>
</div>
<p>We can also open up the project directory by navigating to it within our local machine’s file system:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-6" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic6.png" class="img-fluid figure-img" width="908">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.6: R studio project directory
</figcaption>
</figure>
</div>
</div>
</div>
<p>Once the project is set up, you can open your project by double-clicking the <strong>.RProj</strong> file, within R Studio or from your computer’s file directory; this will launch R Studio with the correct settings and project-specific working directory.</p>
<p>Once a project is created, you can also set the project options by going to <strong>Tools</strong> in the R Studio menu bar, and then clicking <strong>Project Options:</strong></p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-7" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic7.png" class="img-fluid figure-img" width="1256">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.7: Project Options
</figcaption>
</figure>
</div>
</div>
</div>
<p>This will bring you to a menu interface that looks like the following:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-8" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic8.png" class="img-fluid figure-img" width="1138">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.8: Project Options Menu
</figcaption>
</figure>
</div>
</div>
</div>
<p>You can explore the various options, but it’s generally recommended to set all of the workspace options to “No”, as above, especially if you are working on a research project that will ultimately be shared and published. <strong>.RData</strong> is a binary file that R uses to save your workspace (which includes all of the R objects you create) across multiple sessions. Hadley Wickham, a leading R developer (particularly on the <em>tidyverse</em> suite we’ve been using extensively the past few days), recommends avoiding <strong>.RData</strong>, and saving all of your work in reproducible scripts that can precisely regenerate all of your work. Using scripts, rather than .RData, to keep track of your objects and work (and regenerate them as necessary) will make your work more reproducible, since it reduces the likelihood that you unknowingly carry over old objects into new work and create hidden dependencies in your code ( by relying on objects from a previous session that were not explicitly created in your current script). In addition, carrying over the workspace session to session may end up leading to a cluttered environment, with a lot of superfluous objects you can’t keep track of. In short, you will generally be best-served by relying on well-documented scripts, rather than <strong>.RData</strong> to track your work and restore your environment after closing a session; using <strong>.RData</strong> to save your workspace could be more convenient in the short run, but will likely be more painful in the long run.</p>
</section>
<section id="organizing-an-rstudio-project" class="level3" data-number="6.3.2">
<h3 data-number="6.3.2" class="anchored" data-anchor-id="organizing-an-rstudio-project"><span class="header-section-number">6.3.2</span> Organizing an RStudio Project</h3>
<p>You can choose how to organize your project directory, but it’s standard practice to create the following sub-directories to store the various components of a typical project:</p>
<ul>
<li><p>Raw Data: Contains the “raw” pre-processed data that we are starting with.</p></li>
<li><p>Processed Data: This sub-directory can be used to write out data that has been modified or transformed in the course of the analysis (which is implemented through project scripts)</p></li>
<li><p>Analysis Outputs: Contains analysis objects created through the analysis, such as visualizations, graphs, tables etc.</p></li>
<li><p>Scripts: The R scripts used to implement the analysis</p></li>
<li><p>Documents and Reports: Contains project documentation and reports used to communicate results and workflows with various audiences</p></li>
</ul>
<p>We’ll go ahead and create these sub-directories in the main project directory, which we will also refer to as the project’s root directory (the root directory can always be identified as the directory that contains the <strong>.Rproj</strong> file). Our project directory now looks something like this:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-9" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic9.png" class="img-fluid figure-img" width="916">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.9: R studio project directory organization
</figcaption>
</figure>
</div>
</div>
</div>
<p>These new sub-directories should also show up in the “Files” pane at the bottom-right of your R Studio interface (if you don’t see the new sub-directories, you may have to right-click within the “Files” window pane and click “Reload”.</p>
<p>Now that the project directory has a high-level organizational structure, we can begin populating it. To start, we’ll add the raw quality of government cross-national dataset to the raw data directory. We’ll use this dataset to demonstrate some important reproducibility-related features of R projects in the sections below.</p>
</section>
</section>
<section id="rstudio-projects-data-management-and-reproducibility-benefits" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="rstudio-projects-data-management-and-reproducibility-benefits"><span class="header-section-number">6.4</span> RStudio Projects: Data Management and Reproducibility Benefits</h2>
<p>Now that we’ve set up an RStudio Project, it is natural to wonder what exactly the point is; after all, at a first glance, an RStudio Project looks like a simple directory, of the kind we’re used to working with. In fact, the RStudio Project structure offers significant project management and reproducibility benefits.</p>
<p>One of the primary benefits of an R Project is that it creates a standard working directory. When you create an R project, and subsequently use it as a container for your project files, R automatically sets the working directory to the root directory of the project, ensuring that relative paths work consistently and reliably regardless of where in the folder your scripts or files are located. In other words, this feature allows you to not worry about managing file directories; everything in the project file can be referenced in your script with respect to the root directory of the project (i.e.&nbsp;the project’s top-level directory that contains the <code>.Rproj</code> file).</p>
<p>Second, each R Project is self-contained, which means that variables and objects in one project do not interfere with another. In addition, you can have multiple RStudio windows open for different projects, and they won’t share variables or loaded packages, which is helpful if you’re working on multiple research projects at a time.</p>
<p>Third, each Project can have its own set of package versions, which prevents conflicts between projects that require different package versions. More generally, R Projects allow for a lot of customization that defines R’s behavior for that specific project, without generalizing to other projects and R-related files. Below, we’ll see how the <em>renv</em> package can be used to manage project-specific package environments so that scripts don’t break due to package versioning issues.</p>
<p>Finally, working within a project allows for more effective and organized file management. Instead of dispersing relevant files and directories across your computer, which makes it difficult to keep track of everything, a project allows us to create sub-directories for scripts, data, results, and documents and reports that are centrally located and easy to find.</p>
<p>Now, we’ll turn to a more extensive discussion of how RStudio Projects facilitate reproducibility by allowing for project-specific package libraries, and the the use of relative file paths with respect to the Project’s root directory.</p>
<section id="using-renv-to-create-project-specific-package-libraries" class="level3" data-number="6.4.1">
<h3 data-number="6.4.1" class="anchored" data-anchor-id="using-renv-to-create-project-specific-package-libraries"><span class="header-section-number">6.4.1</span> Using <em>renv</em> to create project-specific package libraries</h3>
<p>We have worked extensively with user-written packages in our previous lessons. These packages extend R’s functionality, and allow us to implement a wide range of tasks using functions that we don’t have to program ourselves. One of the downsides to working in a package-based ecosystem, however, is that they can sometimes create challenges for reproducibility, since many versions of a given package are likely to exist (since packages are constantly evolving over time).</p>
<p>For example, if your analysis is based on one version of a package but a collaborator has a different version of that package installed on their machine, they will encounter challenges when running your code. Or, you might encounter challenges when trying to re-run your code after a long period of time, since you updated your packages but your code is based on an earlier version.</p>
<p>The <em>renv</em> package allows us to address the threats to reproducibility that arise in a dynamic package-based ecosystem. In particular, it works with the RStudio Project structure to create project-specific package libraries that record the exact versions of the packages used in a project’s analysis, and allow collaborators (or your future self) to easily regenerate the precise package environment required to reproduce an analysis. In other words, without <em>renv</em> all of your R projects share a single “global” library. If you update a package for one project, you might accidentally break another. The <em>renv</em> package provides a clean solution to this problem by allowing you to spin up project-specific package environments.</p>
<p>The <em>renv</em> workflow may take a bit of getting used to, but it is relatively straightforward to implement:</p>
<ol type="1">
<li>From inside your project, initialize <em>renv</em> with the <code>init()</code> function (i.e.&nbsp;<code>renv::init()</code>). This generates a project-specific package library (<code>renv/library</code>), and a “lockfile” (<code>renv.lock</code>). When you install a package within a project, it will live in the project-specific package library; when you load a package with the <code>library()</code> function, the package will be loaded from that library. The lockfile contains detailed metadata about every package in the project-specific package library, and can be used to recreate a package library at any time (for example, when you move to a different computer or share your project with a collaborator). In other words, the lockfile is a blueprint that allows anyone to “spin up” the exact project library needed to reproduce an analysis. Because we already selected the “Use renv with this project” button when we created our project, <em>renv</em> is already initialized, and we do not need to run <code>renv::init()</code>; on the other hand, if we had not selected that option, we would have to run that command if we wanted to use <em>renv</em> to track our packages.</li>
<li>Once <em>renv</em> has been initialized, we can install packages for use in our project environment in the usual way with the <code>install.packages()</code> function. When a project is managed by <em>renv</em>, this function automatically installs packages into the project-specific library rather than your global R library (the function <code>renv::install()</code> can also be used, and is especially useful when installing specific packages or versions from GitHub). It is important to note that if we initialize <em>renv</em> at the outset as we did (which is the best practice), the project-specific package library will be empty, even if we’ve already installed those packages elsewhere on our computer. As a result, if you want to use a package within a project that uses <em>renv</em>, you must install it within that project.</li>
<li>After installing the packages, we need to ensure that information about the packages is recorded to the lockfile by running <code>renv::snapshot()</code>. This function updates the lockfile after a package is installed.</li>
<li>At this point, everything needed to recreate our project with this precise package library is in place. Let’s say you need to share your analysis with a collaborator. Once you share your RStudio Project with them, they can run <code>renv::restore()</code> on their machine; at this point, <em>renv</em> will read the lock file and install those exact package versions into the project-specific package library on their machine.</li>
</ol>
<p>It’s essential to emphasize that the project-specific package library and the lockfile do not automatically remain in sync. If <code>renv::snapshot()</code> isn’t run, a package can be installed, but not registered in the lockfile. Conversely, a package can be in the lockfile, but not actually installed, if <code>renv::restore()</code> isn’t run. If you’re ever lost, and unsure about whether everything is in sync, run <code>renv::status()</code>, which will either confirm everything is in sync, or note a discrepancy. If something is installed, but not recorded in the lockfile, run <code>snapshot()</code> within your project console. If something is recorded in the lockfile but not installed, you’re missing a package that should be there, and you can bring your lockfile and package library into sync with <code>restore()</code>.</p>
<p>To get a quick sense of how this works in practice, let’s create a new script in our “scripts” folder called “reproducibility-demo.R”. Let’s say we need to use the <em>tidyverse</em> in this script, and immediately run <code>library(tidyverse)</code> as usual, since we’ve already installed it in our global environment:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-10" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic10.png" class="img-fluid figure-img" width="1459">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.10: Tidyverse not found within project
</figcaption>
</figure>
</div>
</div>
</div>
<p>Note that we get an error saying “there is no package called ‘tidyverse’.” That is because while we may have the <em>tidyverse</em> installed in our global environment, we haven’t installed it within our project-specific project directory yet; our project is an isolated, self-contained environment and doesn’t pull in packages from the global environment. So, let’s go ahead and install the tidyverse within our project:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-11" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-11-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic11.png" class="img-fluid figure-img" width="1445">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-11-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.11: Tidyverse installed withing project
</figcaption>
</figure>
</div>
</div>
</div>
<p>The <em>tidyverse</em> successfully installed within our project. Remember, though, that it hasn’t yet been recorded to the lockfile, which we can confirm by running <code>renv:status()</code>:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-12" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-12-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic12.png" class="img-fluid figure-img" width="1293">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-12-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.12: Library out of sync with lockfile
</figcaption>
</figure>
</div>
</div>
</div>
<p>To record the <em>tidyverse</em> packages to the lockfile, ensure you have saved the script containing the <code>library(tidyverse)</code> command, and then run <code>renv::snapshot()</code>:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-13" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-13-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic13.png" class="img-fluid figure-img" width="1365">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-13-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.13: Lockfile written
</figcaption>
</figure>
</div>
</div>
</div>
<p>As we can see, the lockfile has been updated and now includes the <em>tidyverse</em> packages. Now, when we run <code>renv::status()</code>, we see that everything is in sync:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-14" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-14-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic14.png" class="img-fluid figure-img" width="1284">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-14-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.14: Lockfile and library in sync
</figcaption>
</figure>
</div>
</div>
</div>
<p>At this point, we can go ahead and run our analysis. We can share the project with collaborators, and they can use <code>renv::restore()</code> to install the exact versions of the packages we used in the analysis from the information in the lockfile.</p>
</section>
<section id="using-projects-to-define-and-manage-file-paths" class="level3" data-number="6.4.2">
<h3 data-number="6.4.2" class="anchored" data-anchor-id="using-projects-to-define-and-manage-file-paths"><span class="header-section-number">6.4.2</span> Using projects to define and manage file paths</h3>
<p>In order to appreciate how working with RStudio Projects can help us manage our file paths, let’s continue with the script we’ve been working on. Now that we’ve installed and loaded the <em>tidyverse</em> packages, let’s say we want to read in the “qog_bas_cs_jan25.csv” data living in the “raw_data” sub-directory.</p>
<p>Because we are working in an RStudio Project, the project’s root directory is consistently set as the working directory whenever the project is opened. This allows us to use a reliable relative file path. For example, we can read the data in with the following: <code>read_csv("raw_data/qog_bas_cs_jan25.csv")</code></p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-15" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-15-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic15.png" class="img-fluid figure-img" width="1326">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-15-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.15: Reading in data with relative file path
</figcaption>
</figure>
</div>
</div>
</div>
<p>If we were not working inside an RStudio Project, the working directory would depend on how and from where R was launched, making relative paths fragile and often forcing us to to hard-code absolute file paths that only work on our own computer, which creates an obstacle to reproducibility.</p>
<p>The standardization of the working directory makes project management more convenient, and also enables sharing. For example, if you needed to share your work with a collaborator, you could zip up the R Project directory and send it to them. When they run your scripts, everything should work as they did on your own computer even though their directory structure is likely different, since all the file paths are defined in relative terms with respect to the root of the project directory. In addition, GitHub recognizes <strong>.RProj</strong> files, which allows you to push an R project directory and its components to GitHub. When a collaborator clones the repository to their local machine, they will be able to run your scripts (since the working directory is the Project’s root directory, and all file paths are defined in relation to it), add to your scripts, and push the changes back up to GitHub. When you update your local repository, everything should continue to work seamlessly.</p>
</section>
</section>
<section id="quarto" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Quarto</h1>
<p>Quarto is an open source publishing system that allows us to create a variety of outputs (such as reports, presentations, websites, and dashboards) that facilitate research related communications with a variety of audiences, including colleagues, collaborators and co-authors, students, and the public. It is compatible with a variety of programming languages, including R.</p>
<p>One of the many benefits of Quarto is that it enables <em>literate programming</em>, a concept developed by the computer scientist Donald Knuth. Literate programming is a practice in which the authors of code embed their code in human-readable documents that also contain narrative exposition of the code, and the actual outputs of the code, so that others can clearly understanding how the different parts of an analysis fit together. Among other things, literate programming facilitates transparency and clarity when communicating about the scripts used to generate research results. The lesson plans we’ve used in this workshop work within the literate programming paradigm, to the extent that they combine narrative text, blocks of code, and code outputs into an integrated document. Below, we’ll learn how to create simple literate programming documents using Quarto.</p>
<section id="making-a-new-quarto-document" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="making-a-new-quarto-document"><span class="header-section-number">7.1</span> Making a New Quarto Document</h2>
<p>To start a new Quarto Document, open up R Studio, then click <strong>New File</strong>, then select <strong>Quarto Document</strong>:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-16" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-16-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic16.png" class="img-fluid figure-img" width="1312">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-16-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.1: Start a new Quarto Document
</figcaption>
</figure>
</div>
</div>
</div>
<p>Once you do so, it will bring up a menu like the one below; go ahead and give your document a name, and list your name as the author, then click <strong>OK</strong>:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-17" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-17-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic17.png" class="img-fluid figure-img" width="1271">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-17-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.2: Give the Quarto document a title and author
</figcaption>
</figure>
</div>
</div>
</div>
<p>Once you click OK, a new Quarto document, with file extension “.qmd” will be created. It’ll look something like this:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-18" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-18-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic18.png" class="img-fluid figure-img" width="1512">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-18-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.3: Quarto document document
</figcaption>
</figure>
</div>
</div>
</div>
<p>The document comes prepopulated with some pre-populated text that can serve as a useful guide to some relevant syntax and get you acquainted with Quarto. We’ll go ahead and save the Quarto document (which has extension “.qmd”) to the “documents-reports” sub-directory of our project with the name “r-reproducibility-report.qmd”. Now that we’ve saved the document, let’s begin modifying it and writing a simple document.</p>
</section>
<section id="writing-a-quarto-document" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="writing-a-quarto-document"><span class="header-section-number">7.2</span> Writing a Quarto Document</h2>
<p>A Quarto document is comprised of three main elements. First, there is the YAML header, which contains metadata for the entire document, and allows us to define document settings and set rules for how the document will behave. Among many other things, we can use the YAML header to specify the desired output type (i.e.&nbsp;html, pdf, word), and define a table of contents. In our YAML file, we’ll specify some simple behavior for what we want the table of contents to look like:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-19" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-19-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic19.png" class="img-fluid figure-img" width="1321">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-19-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.4: Quarto document YAML
</figcaption>
</figure>
</div>
</div>
</div>
<p>Note that this is a pretty simple YAML header, and it is possible to customize a document in complex ways using the YAML header; however, this is beyond the scope of our lesson.</p>
<p>Second, there is document text, which is formatted in the Markdown language. Markdown is extremely simple, and if you are not familiar with it, can quickly get started by consulting this <a href="https://www.markdownguide.org/basic-syntax/">guide</a>. You also have the option of formatting your text using the Quarto toolbar; from there, you can do all of the things you could also do with Markdown, such as add headers, add bullet points, format your text, add hyperlinks, and add images (among other things):</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-20" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-20-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic20.png" class="img-fluid figure-img" width="1232">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-20-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.5: Quarto document toolbar
</figcaption>
</figure>
</div>
</div>
</div>
<p>Finally, the third main components of a Quarto file are “code chunks”, where you can create blocks of code which generate outputs embedded in the document. You can also comment the code added within these blocks, just as you would comment code in a script. To create a code chunk you can go to to <strong>Code</strong> in the R Studio Menu bar up top, then click <strong>Insert Chunk</strong>. Another way, perhaps easier, is to click the green “C” button in the Quarto menu:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-21" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-21-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic21.png" class="img-fluid figure-img" width="1342">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-21-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.6: Add a code chunk to a Quarto document
</figcaption>
</figure>
</div>
</div>
</div>
<p>Then, you can add code (and code comments) within the code chunk, and run it by clicking the green arrow. After you click the “Run” button, the, code will run and the result will print immediately below the chunk:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-22" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-22-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic22.png" class="img-fluid figure-img" width="1188">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-22-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.7: Running a code chunk
</figcaption>
</figure>
</div>
</div>
</div>
<p>There are various ways to customize your code blocks and specify their behavior. For example, we can hide code blocks so that only the output is shown in the rendered document, using the <code>#! echo: false</code> setting in the code chunk:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-23" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-23-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic23.png" class="img-fluid figure-img" width="1330">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-23-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.8: Running a code chunk
</figcaption>
</figure>
</div>
</div>
</div>
<p>We can also create code blocks that don’t execute, so that the final report shows the code block without the output; you can suppress code warnings; and so on. For more information on the relevant syntax needed to customize code chunks in these (and other) ways, see this <a href="https://quarto.org/docs/computations/execution-options.html">guide to Quarto</a>.</p>
</section>
<section id="rendering-a-quarto-document" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="rendering-a-quarto-document"><span class="header-section-number">7.3</span> Rendering a Quarto Document</h2>
<p>At this point, let’s spin up a rendered document using the “.qmd” file we’ve been working on. First, we’ll save our changes. Then, we can render the html document by clicking the <strong>Render</strong> button in the Quarto Menu:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-24" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-24-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic24.png" class="img-fluid figure-img" width="1350">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-24-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.9: Rendering the document
</figcaption>
</figure>
</div>
</div>
</div>
<p>The rendered document should appear in either a separate window, or in your R Studio Viewer pane. You can choose where the document renders by clicking the small downward-pointing arrow next to the <strong>Render</strong> button, and clicking either <strong>Preview in Window</strong> or <strong>Preview in Viewer Pane</strong>:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-25" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-25-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic25.png" class="img-fluid figure-img" width="1346">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-25-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.10: Rendering options
</figcaption>
</figure>
</div>
</div>
</div>
<p>Once we render the document (we’ve chosen to render the document in a separate window) it will look something like this:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-26" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-26-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic26.png" class="img-fluid figure-img" width="1386">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-26-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.11: Rendered html document
</figcaption>
</figure>
</div>
</div>
</div>
<p>Note that after rendering, an html file (as well as an additional sub-directory with html-related files) will also be created in the same directory as your .qmd file; these files will update each time you render the <strong>.qmd</strong> file by clicking the <strong>Render</strong> button:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-27" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-27-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic27.png" class="img-fluid figure-img" width="909">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-27-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.12: Rendered html file in same directory as .qmd file
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="managing-file-paths-in-quarto" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="managing-file-paths-in-quarto"><span class="header-section-number">7.4</span> Managing file paths in Quarto</h2>
<p>R Projects and Quarto are two essential R tools that enable data management, sharing, and communication, both within the scholarly community and with the broader public. Though we’ve introduced these tools separately, it’s likely you’ll want to use them in conjunction (for instance, by placing your Quarto files and rendered documents within the <strong>reports-documents</strong> subdirectory of your R Project directory, as we did above).</p>
<p>As we discussed above, the R Project environment is a self-contained directory, where file paths can be set relative to the project’s root directory (i.e.&nbsp;the highest-level directory within the R project, which contains the <strong>.RProj</strong> file). When working with Quarto, the program automatically sets the root directory for the code that’s executed within the document to the same location as the <strong>.qmd</strong> file. When Quarto files are in an R Project, the working directory set by the location of the Quarto file overrides the working directory set by the R Project. For example, if the .qmd file is in the <strong>documents-reports</strong> directory (as it is here), it will set that as its root directory; as a result, it would be impossible to access the data (in the <strong>raw_data</strong> folder) from the Quarto document using a file path that is set relative to the Project’s root directory.</p>
<p>To make this more concrete, recall that earlier, we showed that we can read in our dataset with a relative path defined with respect to the project root (i.e.&nbsp;<code>read_csv("raw_data/qog_bas_cs_jan25.csv")</code> ). If we try to read in the data in the same way using a code chunk in our Quarto document, we’ll get an error, because Quarto sets the working directory to the directory of the “.qmd” file:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-28" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-28-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic28.png" class="img-fluid figure-img" width="1378">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-28-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.13: Cannot read in data with relative path
</figcaption>
</figure>
</div>
</div>
</div>
<p>In other words, the file path doesn’t work; the code chunk is looking for the data in the <strong>reports-documents</strong> directory, but it doesn’t exist there. As expected, attempts to render the document fail for the same reason; when the rendering process hits the code chunk that tries to read in the data, it fails, and the rendering process terminates.</p>
<p>The easiest solution to this problem is to use the <code>here()</code> function from the <em>here</em> package, which automatically finds the root directory of the R Project you’re working in (remember that the root directory of your R project is the directory in which the <code>.Rproj</code> file is located) and builds paths from there. To see how it works, go ahead and install this package with the following:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"here"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Then, load the <em>here</em> package at the top of your Quarto document by passing it to the <code>library()</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Then, whenever you need to read in data from your <strong>raw_data</strong> directory into a <strong>.qmd</strong> file in another (i.e.&nbsp;<strong>report-documents</strong>) directory, simply use the <code>here()</code> function within that code chunk to set the working directory as the Project’s root directory. After setting the working directory as the root directory, go ahead and read in your data as you would in a script (i.e.&nbsp;using a path defined relative to the root directory), and it should successfully read in. In short, the <code>here()</code> function overrides the default behavior within Quarto documents to set the working directory as the directory with the <strong>.qmd</strong> file, and forces these documents to follow the default behavior of R Project files and use the root directory of the R Project as the working directory that can be used to define relative file paths. Let’s see how it works; we’ll read in the data using a file path relative to the root directory by first using the <code>here()</code> function to set the working directory as the Project’s root directory, then running the code with the relative file path. Now, when we run the code chunk, it works:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot-29" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-29-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="session5/pictures2/pic29.png" class="img-fluid figure-img" width="1512">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-29-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7.14: Using the here() package in Quarto
</figcaption>
</figure>
</div>
</div>
</div>
<p>At this point, the file will also successfully render.</p>
<p>So, to summarize:</p>
<ol type="1">
<li><p>In an R Project, the working directory is automatically set to be the root of the R Project directory, and files can be read into the R environment in scripts that use file paths that are defined relative to the root directory</p></li>
<li><p>However, when working in Quarto documents, Quarto defaults to setting the working directory as the directory in which the <strong>.qmd</strong> file exists, which overrides the behavior of an R Project (which defaults to setting the working directory as the Project’s root directory). As a result, while one could read in data from the <strong>raw_data</strong> folder into a script in the <strong>scripts</strong> folder using a relative path defined with respect to the Project’s root directory, it would not be possible to read in data from the <strong>raw_data</strong> folder into a Quarto document in the <strong>reports-documents</strong> using a relative path defined with respect to the Project’s root directory.</p></li>
<li><p>In order to force Quarto to use the root directory of the R Project as the working directory, we can use the <code>here()</code> function. By using the <code>here()</code> function to set the working directory as the Project’s root directory (within a code block right before reading in data), we can read in the data using a file path that is defined with respect to the root of the R Project directory, rather one that is defined with respect to the directory in which the <strong>.qmd</strong> file is located.</p></li>
</ol>


</section>
</section>

</main> <!-- /main -->
<div style="text-align:right; margin-top: 1em;">
  <a href="https://github.com/aranganath24/IBS_CRDDS_R" target="_blank">View Source</a>
</div>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./session4.html" class="pagination-link" aria-label="Elementary Data Visualization and Analysis">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Elementary Data Visualization and Analysis</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./summary.html" class="pagination-link" aria-label="Conclusion and Future Reading">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Conclusion and Future Reading</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/blob/main/session5.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/edit/main/session5.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/aranganath24/IBS_CRDDS_R/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>